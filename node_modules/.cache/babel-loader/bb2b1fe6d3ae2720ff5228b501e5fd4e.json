{"ast":null,"code":"import _classCallCheck from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/src/pages/content-moderation.js\";\nimport React, { Component } from \"react\";\nimport { Container, Row, Col, Button, Input // FormGroup, Label\n} from \"reactstrap\";\nimport { ToastsStore } from \"react-toasts\";\nimport { Link } from \"react-router-dom\";\nimport config from \"../config/index\";\nimport { getContentModerations, updateContentModeration } from \"../http/http-calls\";\nimport CustomDateRangePicker from \"../components/date-range-picker\";\nimport CustomTable from \"../components/custom-table\";\nimport { format } from \"date-fns\";\nimport moment from \"moment\";\nimport { showToast } from \"../helper-methods\"; // import isWithinRange from 'date-fns';\n// import moment from \"moment\";\n\nvar ContentModeration = /*#__PURE__*/function (_Component) {\n  _inherits(ContentModeration, _Component);\n\n  var _super = _createSuper(ContentModeration);\n\n  function ContentModeration() {\n    var _this;\n\n    _classCallCheck(this, ContentModeration);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      contentModerationStatusList: config.contentModerationStatusList,\n      contentModerationReasonList: config.contentModerationReasonList,\n      contentModerationList: [],\n      contentModerationListBackup: [],\n      headerKeys: [{\n        id: \"id\",\n        label: \"id\"\n      }, {\n        id: \"name\",\n        label: \"Creator\"\n      }, {\n        id: \"flaggedBy\",\n        label: \"Flagged By\"\n      }, {\n        id: \"date\",\n        label: \"Date\"\n      }, {\n        id: \"reason\",\n        label: \"Reason\"\n      }, {\n        id: \"status\",\n        label: \"Status\"\n      }, {\n        id: \"updatedAt\",\n        label: \"Last Updated At\"\n      }, {\n        id: \"details\",\n        label: \"Details\"\n      }],\n      filters: {\n        dateRange: {\n          startDate: null,\n          endDate: null,\n          focusedInput: null,\n          startDateId: \"startDate\",\n          endDateId: \"endDate\"\n        },\n        reason: \"\",\n        flaggedBy: \"\",\n        status: \"\",\n        search: \"\"\n      },\n      loading: {\n        loadingData: false,\n        changeStatusLoading: false,\n        changeReasonLoading: false\n      }\n    };\n\n    _this._onDatesChange = function (startDate, endDate) {\n      console.log(\"on date change\", startDate, endDate);\n      var filters = _this.state.filters;\n      filters.dateRange.startDate = startDate;\n      filters.dateRange.endDate = endDate;\n\n      _this.setState({\n        filters: filters\n      });\n\n      if (filters.dateRange.startDate && filters.dateRange.endDate) {\n        console.log(\"range selction complete\");\n\n        _this._filterContentModerationList();\n      }\n    };\n\n    _this._onFocusChange = function (input) {\n      console.log(input);\n      var filters = _this.state.filters;\n      filters.dateRange.focusedInput = input;\n\n      _this.setState({\n        filters: filters\n      });\n    };\n\n    _this._manageLoading = function (key, value) {\n      var _this$state$loading = _this.state.loading,\n          loadingData = _this$state$loading.loadingData,\n          changeStatusLoading = _this$state$loading.changeStatusLoading,\n          changeReasonLoading = _this$state$loading.changeReasonLoading;\n\n      if (key === \"data\") {\n        loadingData = value;\n      } else if (key === \"change-status\") {\n        changeStatusLoading = value;\n      } else if (key === \"change-reason\") {\n        changeReasonLoading = value;\n      }\n\n      _this.setState({\n        loading: {\n          loadingData: loadingData,\n          changeStatusLoading: changeStatusLoading,\n          changeReasonLoading: changeReasonLoading\n        }\n      });\n    };\n\n    _this._dataFormat = function (cell, row, header) {\n      // console.log(cell, row, header);\n      if (header === \"flaggedBy\") {\n        return row.flaggedBy.userType === \"User\" ? /*#__PURE__*/React.createElement(\"div\", {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(Link, {\n          to: \"/subscriber-view/\".concat(row.flaggedBy.id),\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 11\n          }\n        }, row.flaggedBy.userType, \" \", /*#__PURE__*/React.createElement(\"br\", {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 38\n          }\n        }), \"(\", row.flaggedBy.name.full, \")\")) : /*#__PURE__*/React.createElement(\"div\", {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 9\n          }\n        }, row.flaggedBy.userType, \" \", /*#__PURE__*/React.createElement(\"br\", {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 36\n          }\n        }), \"(\", row.flaggedBy.name.full, \")\");\n      } else if (header === \"name\") {\n        return /*#__PURE__*/React.createElement(Link, {\n          to: \"/creator-view/\".concat(row._postId._influencer.id),\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 9\n          }\n        }, row.name);\n      } else if (header === \"date\") {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 14\n          }\n        }, _this._formatDate(cell, \"MMM d, yyyy\"));\n      } else if (header === \"updatedAt\") {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 9\n          }\n        }, row.lastUpdatedBy && row.lastUpdatedBy.name.full, /*#__PURE__*/React.createElement(\"br\", {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 11\n          }\n        }), _this._formatDate(row.updatedAt, \"MMM d, yyyy, HH:mm\"));\n      } else if (header === \"reason\") {\n        return /*#__PURE__*/React.createElement(Input, {\n          type: \"select\",\n          name: \"reason\",\n          value: cell,\n          onChange: function onChange(e) {\n            return _this._updateContentModeration(e, row, \"reason\");\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 9\n          }\n        }, _this.state.contentModerationReasonList.map(function (reason) {\n          return /*#__PURE__*/React.createElement(\"option\", {\n            key: reason,\n            value: reason,\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 13\n            }\n          }, reason);\n        }));\n      } else if (header === \"status\") {\n        return /*#__PURE__*/React.createElement(Input, {\n          type: \"select\",\n          name: \"status\",\n          value: cell,\n          onChange: function onChange(e) {\n            return _this._updateContentModeration(e, row, \"status\");\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 9\n          }\n        }, _this.state.contentModerationStatusList.map(function (status) {\n          return /*#__PURE__*/React.createElement(\"option\", {\n            key: status,\n            value: status,\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 13\n            }\n          }, status);\n        }));\n      } else if (header === \"details\") {\n        console.log('cell details :', cell, row);\n        return row._postId ? /*#__PURE__*/React.createElement(\"a\", {\n          href: '/post/' + row._postId._id,\n          rel: \"noopener noreferrer\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 9\n          }\n        }, \"Link\") : /*#__PURE__*/React.createElement(React.Fragment, null, \"N/A\");\n      } else {\n        return cell;\n      }\n    };\n\n    _this._filterOnChange = function (_ref) {\n      var currentTarget = _ref.currentTarget;\n      var filters = _this.state.filters;\n      filters[currentTarget.name] = currentTarget.value;\n\n      _this.setState({\n        filters: filters\n      });\n\n      if (currentTarget.name !== \"search\") {\n        _this._filterContentModerationList();\n      }\n    };\n\n    _this._filterContentModerationList = function () {\n      var filterConditions = []; // console.log(this.state);\n\n      var _this$state = _this.state,\n          filters = _this$state.filters,\n          contentModerationListBackup = _this$state.contentModerationListBackup,\n          contentModerationList = _this$state.contentModerationList;\n      Object.keys(filters).forEach(function (key) {\n        if (filters[key]) {\n          filterConditions.push(key);\n        }\n      }); // console.log(filterConditions);\n\n      contentModerationList = contentModerationListBackup;\n\n      if (filterConditions.length) {\n        if (filters.dateRange.startDate && filters.dateRange.endDate) {\n          contentModerationList = contentModerationList.filter(function (each) {\n            // console.log('====>>',filters.dateRange.startDate.toDate(), each.date, isAfter((filters.dateRange.startDate.toDate()), each.date))\n            // return (filters.dateRange.startDate.toDate()) >= new Date(each.date);\n            return moment(moment(each.date).format(\"YYYY-MM-DD\")).isBetween(filters.dateRange.startDate.format(\"YYYY-MM-DD\"), filters.dateRange.endDate.format(\"YYYY-MM-DD\"), null, \"[]\");\n          });\n        }\n\n        if (filters.reason) {\n          contentModerationList = contentModerationList.filter(function (each) {\n            return each.reason.toLowerCase() === filters.reason.toLowerCase();\n          });\n        }\n\n        if (filters.flaggedBy) {\n          contentModerationList = contentModerationList.filter(function (each) {\n            return each.flaggedBy.userType.toLowerCase() === filters.flaggedBy.toLowerCase();\n          });\n        }\n\n        if (filters.status) {\n          contentModerationList = contentModerationList.filter(function (each) {\n            return each.status.toLowerCase() === filters.status.toLowerCase();\n          });\n        }\n\n        if (filters.search.trim().length) {\n          contentModerationList = contentModerationList.filter(function (each) {\n            return each.name.toLowerCase().includes(filters.search.toLowerCase()) || each.flaggedBy.name.full.toLowerCase().includes(filters.search.toLowerCase()) || each.reason.toLowerCase().includes(filters.search.toLowerCase()) || each.status.toLowerCase().includes(filters.search.toLowerCase());\n          });\n        }\n\n        _this.setState({\n          contentModerationList: contentModerationList\n        });\n      } else {\n        _this.setState({\n          contentModerationList: contentModerationListBackup\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(ContentModeration, [{\n    key: \"_formatDate\",\n    value: function _formatDate(date, dateFormat) {\n      return format(new Date(date), dateFormat);\n    }\n  }, {\n    key: \"_getContentModerations\",\n    value: function _getContentModerations() {\n      var _this2 = this;\n\n      this._manageLoading(\"data\", true);\n\n      getContentModerations().then(function (response) {\n        _this2._manageLoading(\"data\", false);\n\n        var contentModerationList = response.reports.map(function (each) {\n          var influencer;\n\n          if (each._userId) {\n            influencer = each._userId.name.full;\n          } else {\n            influencer = each._postId._influencer.name.full;\n          }\n\n          each._reportedBy.userType = each._reportedBy.userType.toLowerCase() === \"admin\" ? \"Admin\" : \"User\";\n          return {\n            name: influencer,\n            id: each._id,\n            flaggedBy: each._reportedBy,\n            date: each.createdAt,\n            reason: each.subject,\n            status: each.status,\n            lastUpdatedBy: each.lastUpdatedBy,\n            updatedAt: each.updatedAt,\n            _postId: each.hasOwnProperty('_postId') ? each._postId : null\n          };\n        });\n        contentModerationList = contentModerationList.sort(function (item1, item2) {\n          return new Date(item2.date) - new Date(item1.date);\n        });\n\n        _this2.setState({\n          contentModerationList: contentModerationList,\n          contentModerationListBackup: contentModerationList\n        });\n      }, function (error) {\n        console.log(error);\n\n        _this2._manageLoading(\"data\", false); // ToastsStore.error(error.reason, 3000);\n\n\n        showToast(error.reason && error.reason.length ? error.reason : \"Server error. Try again after sometime.\", \"error\");\n      });\n    }\n  }, {\n    key: \"_updateContentModeration\",\n    value: function _updateContentModeration(_ref2, data, key) {\n      var currentTarget = _ref2.currentTarget;\n      console.log(key, currentTarget.value);\n      var contentModerationList = this.state.contentModerationList;\n      var content = contentModerationList.find(function (each) {\n        return each.id === data.id;\n      });\n      content[key] = currentTarget.value;\n      var dataToUpdate = {\n        subject: content.reason,\n        status: content.status\n      };\n      this.setState({\n        contentModerationList: contentModerationList,\n        contentModerationListBackup: contentModerationList\n      });\n      updateContentModeration(content.id, dataToUpdate).then(function (response) {\n        console.log(response);\n        var property = key.charAt(0).toUpperCase() + key.slice(1);\n        ToastsStore.success(property + \" changed Successfully!\", 3000);\n      }, function (error) {\n        console.log(error); // ToastsStore.error(error.reason, 3000);\n\n        showToast(error.reason && error.reason.length ? error.reason : \"Server error. Try again after sometime.\", \"error\");\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._getContentModerations();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state2 = this.state,\n          contentModerationStatusList = _this$state2.contentModerationStatusList,\n          contentModerationReasonList = _this$state2.contentModerationReasonList,\n          filters = _this$state2.filters,\n          loading = _this$state2.loading;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"app TruFansPgBg animated fadeIn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Container, {\n        fluid: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        xs: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"PgTitle justify-content-start align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 17\n        }\n      }, \"Content Moderation\")), !loading.loadingData && /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"filterWrap filterWrap-TransactionsPg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-filter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ml-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(CustomDateRangePicker, {\n        dateRange: filters.dateRange,\n        onDatesChange: this._onDatesChange,\n        onFocusChange: this._onFocusChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(Input, {\n        type: \"select\",\n        name: \"reason\",\n        value: filters.reason,\n        onChange: this._filterOnChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 25\n        }\n      }, \"Reason\"), contentModerationReasonList.map(function (reason) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          key: reason,\n          value: reason,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 27\n          }\n        }, reason);\n      })), /*#__PURE__*/React.createElement(Input, {\n        type: \"select\",\n        name: \"flaggedBy\",\n        value: filters.flaggedBy,\n        onChange: this._filterOnChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 25\n        }\n      }, \"Flagged By\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"admin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 25\n        }\n      }, \"Admin\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"user\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 25\n        }\n      }, \"User\")), /*#__PURE__*/React.createElement(Input, {\n        type: \"select\",\n        name: \"status\",\n        value: filters.status,\n        onChange: this._filterOnChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 25\n        }\n      }, \"Status\"), contentModerationStatusList.map(function (status) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          key: status,\n          value: status,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 27\n          }\n        }, status);\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center mt-md-3 mt-xl-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        type: \"text\",\n        id: \"search\",\n        name: \"search\",\n        placeholder: \"Search\",\n        autoComplete: \"off\",\n        className: \"ml-2\",\n        value: filters.search,\n        onChange: this._filterOnChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        color: \"secondary\",\n        className: \"ml-2\",\n        onClick: this._filterContentModerationList,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"icon-magnifier\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 25\n        }\n      })))), \" \", /*#__PURE__*/React.createElement(CustomTable, {\n        tableData: this.state.contentModerationList,\n        headerKeys: this.state.headerKeys,\n        dataFormat: this._dataFormat,\n        rowSelection: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 19\n        }\n      })), loading.loadingData && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"filterWrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"loading-section list-loading\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-spinner fa-spin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 21\n        }\n      }), \" \\xA0 Loading Content Moderations..\"))))));\n    }\n  }]);\n\n  return ContentModeration;\n}(Component);\n\nexport default ContentModeration;","map":{"version":3,"sources":["/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/src/pages/content-moderation.js"],"names":["React","Component","Container","Row","Col","Button","Input","ToastsStore","Link","config","getContentModerations","updateContentModeration","CustomDateRangePicker","CustomTable","format","moment","showToast","ContentModeration","state","contentModerationStatusList","contentModerationReasonList","contentModerationList","contentModerationListBackup","headerKeys","id","label","filters","dateRange","startDate","endDate","focusedInput","startDateId","endDateId","reason","flaggedBy","status","search","loading","loadingData","changeStatusLoading","changeReasonLoading","_onDatesChange","console","log","setState","_filterContentModerationList","_onFocusChange","input","_manageLoading","key","value","_dataFormat","cell","row","header","userType","name","full","_postId","_influencer","_formatDate","lastUpdatedBy","updatedAt","e","_updateContentModeration","map","_id","_filterOnChange","currentTarget","filterConditions","Object","keys","forEach","push","length","filter","each","date","isBetween","toLowerCase","trim","includes","dateFormat","Date","then","response","reports","influencer","_userId","_reportedBy","createdAt","subject","hasOwnProperty","sort","item1","item2","error","data","content","find","dataToUpdate","property","charAt","toUpperCase","slice","success","_getContentModerations"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  Container,\n  Row,\n  Col,\n  Button,\n  Input\n  // FormGroup, Label\n} from \"reactstrap\";\nimport { ToastsStore } from \"react-toasts\";\nimport { Link } from \"react-router-dom\";\nimport config from \"../config/index\";\nimport {\n  getContentModerations,\n  updateContentModeration\n} from \"../http/http-calls\";\nimport CustomDateRangePicker from \"../components/date-range-picker\";\nimport CustomTable from \"../components/custom-table\";\nimport { format } from \"date-fns\";\nimport moment from \"moment\";\nimport { showToast } from \"../helper-methods\";\n\n// import isWithinRange from 'date-fns';\n// import moment from \"moment\";\nclass ContentModeration extends Component {\n  state = {\n    contentModerationStatusList: config.contentModerationStatusList,\n    contentModerationReasonList: config.contentModerationReasonList,\n    contentModerationList: [],\n    contentModerationListBackup: [],\n    headerKeys: [\n      { id: \"id\", label: \"id\" },\n      { id: \"name\", label: \"Creator\" },\n      { id: \"flaggedBy\", label: \"Flagged By\" },\n      { id: \"date\", label: \"Date\" },\n      { id: \"reason\", label: \"Reason\" },\n      { id: \"status\", label: \"Status\" },\n      { id: \"updatedAt\", label: \"Last Updated At\" },\n      { id: \"details\", label: \"Details\" }\n    ],\n    filters: {\n      dateRange: {\n        startDate: null,\n        endDate: null,\n        focusedInput: null,\n        startDateId: \"startDate\",\n        endDateId: \"endDate\"\n      },\n      reason: \"\",\n      flaggedBy: \"\",\n      status: \"\",\n      search: \"\"\n    },\n    loading: {\n      loadingData: false,\n      changeStatusLoading: false,\n      changeReasonLoading: false\n    }\n  };\n\n  _onDatesChange = (startDate, endDate) => {\n    console.log(\"on date change\", startDate, endDate);\n    let { filters } = this.state;\n    filters.dateRange.startDate = startDate;\n    filters.dateRange.endDate = endDate;\n    this.setState({ filters });\n    if (filters.dateRange.startDate && filters.dateRange.endDate) {\n      console.log(\"range selction complete\");\n      this._filterContentModerationList();\n    }\n  };\n\n  _onFocusChange = input => {\n    console.log(input);\n    let { filters } = this.state;\n    filters.dateRange.focusedInput = input;\n    this.setState({ filters });\n  };\n\n  _formatDate(date, dateFormat) {\n    return format(new Date(date), dateFormat);\n  }\n\n  _manageLoading = (key, value) => {\n    let {\n      loadingData,\n      changeStatusLoading,\n      changeReasonLoading\n    } = this.state.loading;\n    if (key === \"data\") {\n      loadingData = value;\n    } else if (key === \"change-status\") {\n      changeStatusLoading = value;\n    } else if (key === \"change-reason\") {\n      changeReasonLoading = value;\n    }\n    this.setState({\n      loading: { loadingData, changeStatusLoading, changeReasonLoading }\n    });\n  };\n\n  _getContentModerations() {\n    this._manageLoading(\"data\", true);\n    getContentModerations().then(\n      response => {\n        this._manageLoading(\"data\", false);\n        let contentModerationList = response.reports.map(each => {\n          let influencer;\n          if (each._userId) {\n            influencer = each._userId.name.full;\n          } else {\n            influencer = each._postId._influencer.name.full;\n          }\n          each._reportedBy.userType =\n            each._reportedBy.userType.toLowerCase() === \"admin\"\n              ? \"Admin\"\n              : \"User\";\n          return {\n            name: influencer,\n            id: each._id,\n            flaggedBy: each._reportedBy,\n            date: each.createdAt,\n            reason: each.subject,\n            status: each.status,\n            lastUpdatedBy: each.lastUpdatedBy,\n            updatedAt: each.updatedAt,\n            _postId: each.hasOwnProperty('_postId') ? each._postId : null\n          };\n        });\n        contentModerationList = contentModerationList.sort((item1,item2)=>{\n          return new Date(item2.date) - new Date(item1.date);\n        })\n        this.setState({\n          contentModerationList,\n          contentModerationListBackup: contentModerationList\n        });\n      },\n      error => {\n        console.log(error);\n        this._manageLoading(\"data\", false);\n        // ToastsStore.error(error.reason, 3000);\n        showToast(\n          error.reason && error.reason.length\n            ? error.reason\n            : \"Server error. Try again after sometime.\",\n          \"error\"\n        );\n      }\n    );\n  }\n\n  _dataFormat = (cell, row, header) => {\n    // console.log(cell, row, header);\n    if (header === \"flaggedBy\") {\n      return row.flaggedBy.userType === \"User\" ? (\n        <div>\n          <Link to={`/subscriber-view/${row.flaggedBy.id}`}>\n            {row.flaggedBy.userType} <br />({row.flaggedBy.name.full})\n          </Link>\n        </div>\n      ) : (\n        <div>\n          {row.flaggedBy.userType} <br />({row.flaggedBy.name.full})\n        </div>\n      );\n    } else if (header === \"name\") {\n      return (\n        <Link to={`/creator-view/${row._postId._influencer.id}`}>\n          {row.name}\n        </Link>\n      )\n    } else if (header === \"date\") {\n      return <div>{this._formatDate(cell, \"MMM d, yyyy\")}</div>;\n    } else if (header === \"updatedAt\") {\n      return (\n        <div>\n          {row.lastUpdatedBy && row.lastUpdatedBy.name.full}\n          <br />\n          {this._formatDate(row.updatedAt, \"MMM d, yyyy, HH:mm\")}\n        </div>\n      );\n    } else if (header === \"reason\") {\n      return (\n        <Input\n          type=\"select\"\n          name=\"reason\"\n          value={cell}\n          onChange={e => this._updateContentModeration(e, row, \"reason\")}\n        >\n          {this.state.contentModerationReasonList.map(reason => (\n            <option key={reason} value={reason}>\n              {reason}\n            </option>\n          ))}\n        </Input>\n      );\n    } else if (header === \"status\") {\n      return (\n        <Input\n          type=\"select\"\n          name=\"status\"\n          value={cell}\n          onChange={e => this._updateContentModeration(e, row, \"status\")}\n        >\n          {/* <option value=\"status\">Status</option> */}\n          {this.state.contentModerationStatusList.map(status => (\n            <option key={status} value={status}>\n              {status}\n            </option>\n          ))}\n        </Input>\n      );\n    } else if (header === \"details\") {\n      console.log('cell details :', cell, row);\n      return row._postId ? (\n        <a href={'/post/'+row._postId._id} rel=\"noopener noreferrer\">\n          Link\n        </a>\n      ) : (\n        <>N/A</>\n      );\n    } else {\n      return cell;\n    }\n  };\n\n  _filterOnChange = ({ currentTarget }) => {\n    let { filters } = this.state;\n    filters[currentTarget.name] = currentTarget.value;\n    this.setState({ filters });\n    if (currentTarget.name !== \"search\") {\n      this._filterContentModerationList();\n    }\n  };\n\n  _filterContentModerationList = () => {\n    let filterConditions = [];\n    // console.log(this.state);\n    let {\n      filters,\n      contentModerationListBackup,\n      contentModerationList\n    } = this.state;\n    Object.keys(filters).forEach(key => {\n      if (filters[key]) {\n        filterConditions.push(key);\n      }\n    });\n    // console.log(filterConditions);\n    contentModerationList = contentModerationListBackup;\n    if (filterConditions.length) {\n      if (filters.dateRange.startDate && filters.dateRange.endDate) {\n        contentModerationList = contentModerationList.filter(each => {\n          // console.log('====>>',filters.dateRange.startDate.toDate(), each.date, isAfter((filters.dateRange.startDate.toDate()), each.date))\n          // return (filters.dateRange.startDate.toDate()) >= new Date(each.date);\n          return moment(moment(each.date).format(\"YYYY-MM-DD\")).isBetween(\n            filters.dateRange.startDate.format(\"YYYY-MM-DD\"),\n            filters.dateRange.endDate.format(\"YYYY-MM-DD\"),\n            null,\n            \"[]\"\n          );\n        });\n      }\n      if (filters.reason) {\n        contentModerationList = contentModerationList.filter(each => {\n          return each.reason.toLowerCase() === filters.reason.toLowerCase();\n        });\n      }\n      if (filters.flaggedBy) {\n        contentModerationList = contentModerationList.filter(each => {\n          return (\n            each.flaggedBy.userType.toLowerCase() ===\n            filters.flaggedBy.toLowerCase()\n          );\n        });\n      }\n      if (filters.status) {\n        contentModerationList = contentModerationList.filter(each => {\n          return each.status.toLowerCase() === filters.status.toLowerCase();\n        });\n      }\n      if (filters.search.trim().length) {\n        contentModerationList = contentModerationList.filter(each => {\n          return (\n            each.name.toLowerCase().includes(filters.search.toLowerCase()) ||\n            each.flaggedBy.name.full\n              .toLowerCase()\n              .includes(filters.search.toLowerCase()) ||\n            each.reason.toLowerCase().includes(filters.search.toLowerCase()) ||\n            each.status.toLowerCase().includes(filters.search.toLowerCase())\n          );\n        });\n      }\n      this.setState({ contentModerationList });\n    } else {\n      this.setState({ contentModerationList: contentModerationListBackup });\n    }\n  };\n\n  _updateContentModeration({ currentTarget }, data, key) {\n    console.log(key, currentTarget.value);\n    let { contentModerationList } = this.state;\n    let content = contentModerationList.find(each => each.id === data.id);\n    content[key] = currentTarget.value;\n    let dataToUpdate = {\n      subject: content.reason,\n      status: content.status\n    };\n    this.setState({\n      contentModerationList,\n      contentModerationListBackup: contentModerationList\n    });\n    updateContentModeration(content.id, dataToUpdate).then(\n      response => {\n        console.log(response);\n        let property = key.charAt(0).toUpperCase() + key.slice(1);\n        ToastsStore.success(property + \" changed Successfully!\", 3000);\n      },\n      error => {\n        console.log(error);\n        // ToastsStore.error(error.reason, 3000);\n        showToast(\n          error.reason && error.reason.length\n            ? error.reason\n            : \"Server error. Try again after sometime.\",\n          \"error\"\n        );\n      }\n    );\n  }\n\n  componentDidMount() {\n    this._getContentModerations();\n  }\n\n  render() {\n    const {\n      contentModerationStatusList,\n      contentModerationReasonList,\n      filters,\n      loading\n    } = this.state;\n\n    return (\n      <div className=\"app TruFansPgBg animated fadeIn\">\n        <Container fluid>\n          <Row>\n            <Col xs=\"12\">\n              <div className=\"PgTitle justify-content-start align-items-center\">\n                {/* on clicking the below btn, it should take back the user to the previous page in history */}\n                {/* <Button color=\"ghost-dark\" className=\"customBackBtn\">\n                  <i className=\"fa fa-arrow-left\"></i>\n                </Button> */}\n\n                <h2>Content Moderation</h2>\n              </div>\n              {!loading.loadingData && (\n                <div>\n                  {/* filters */}\n                  <div className=\"filterWrap filterWrap-TransactionsPg\">\n                    <div className=\"d-flex align-items-center\">\n                      <i className=\"fa fa-filter\"></i>\n                      {/* there will be a \"Date Range\" below in place of an input field */}\n                      {/* <Input\n                    type=\"text\"\n                    id=\"\"\n                    placeholder=\"Date Range\"\n                    className=\"ml-2\"\n                  /> */}\n                      <div className=\"ml-2\">\n                        <CustomDateRangePicker\n                          dateRange={filters.dateRange}\n                          onDatesChange={this._onDatesChange}\n                          onFocusChange={this._onFocusChange}\n                        ></CustomDateRangePicker>\n                      </div>\n                      <Input\n                        type=\"select\"\n                        name=\"reason\"\n                        value={filters.reason}\n                        onChange={this._filterOnChange}\n                      >\n                        <option value=\"\">Reason</option>\n                        {contentModerationReasonList.map(reason => (\n                          <option key={reason} value={reason}>\n                            {reason}\n                          </option>\n                        ))}\n                      </Input>\n                      <Input\n                        type=\"select\"\n                        name=\"flaggedBy\"\n                        value={filters.flaggedBy}\n                        onChange={this._filterOnChange}\n                      >\n                        <option value=\"\">Flagged By</option>\n                        <option value=\"admin\">Admin</option>\n                        <option value=\"user\">User</option>\n                      </Input>\n                      <Input\n                        type=\"select\"\n                        name=\"status\"\n                        value={filters.status}\n                        onChange={this._filterOnChange}\n                      >\n                        <option value=\"\">Status</option>\n                        {contentModerationStatusList.map(status => (\n                          <option key={status} value={status}>\n                            {status}\n                          </option>\n                        ))}\n                      </Input>\n                    </div>\n\n                    <div className=\"d-flex align-items-center mt-md-3 mt-xl-0\">\n                      <Input\n                        type=\"text\"\n                        id=\"search\"\n                        name=\"search\"\n                        placeholder=\"Search\"\n                        autoComplete=\"off\"\n                        className=\"ml-2\"\n                        value={filters.search}\n                        onChange={this._filterOnChange}\n                      />\n                      <Button\n                        color=\"secondary\"\n                        className=\"ml-2\"\n                        onClick={this._filterContentModerationList}\n                      >\n                        <i className=\"icon-magnifier\"></i>\n                      </Button>\n                    </div>\n                  </div>{\" \"}\n                  {/* filterWrap */}\n                  <CustomTable\n                    tableData={this.state.contentModerationList}\n                    headerKeys={this.state.headerKeys}\n                    dataFormat={this._dataFormat}\n                    rowSelection={false}\n                  ></CustomTable>\n                </div>\n              )}\n              {loading.loadingData && (\n                <div className=\"filterWrap\">\n                  <div className=\"loading-section list-loading\">\n                    <i className=\"fa fa-spinner fa-spin\"></i> &nbsp; Loading\n                    Content Moderations..\n                  </div>\n                </div>\n              )}\n            </Col>\n          </Row>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default ContentModeration;\n"]},"metadata":{},"sourceType":"module"}