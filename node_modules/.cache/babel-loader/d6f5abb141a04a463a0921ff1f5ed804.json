{"ast":null,"code":"import _classCallCheck from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/src/pages/Creators/influencer.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Container, Row, Col, Button, Input } from \"reactstrap\";\nimport CustomTable from \"../../components/custom-table\";\nimport { getAllCreators, changeUserStatus, sendMessage, editInfluencer } from \"../../http/http-calls\";\nimport config from \"../../config\";\nimport { ToastsStore } from \"react-toasts\";\nimport SubscriberListModal from \"../../components/subscriber-list-modal\";\nimport ReferralsListModal from \"../../components/referrals-list-modal\";\nimport CopyclipBoard from \"../../components/copy-clipboard\";\nimport TextEditor from \"../../components/text-editor\";\nimport { showToast, deepClone, formatPhoneNumber } from \"../../helper-methods\";\nimport cloneDeep from \"clone-deep\";\nimport CustomDataTable from \"../../components/custom-data-table\";\nimport AddInfluencerModal from \"../../components/add-influencer-modal\";\nimport { parsePhoneNumberFromString } from \"libphonenumber-js\";\n\nvar Creators = /*#__PURE__*/function (_Component) {\n  _inherits(Creators, _Component);\n\n  var _super = _createSuper(Creators);\n\n  function Creators() {\n    var _this;\n\n    _classCallCheck(this, Creators);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      subscriberModal: {\n        isOpen: false,\n        data: null\n      },\n      referralsModal: {\n        isOpen: false,\n        data: null\n      },\n      addInfluencerModal: {\n        isOpen: false,\n        data: null,\n        type: \"add\"\n      },\n      creatorList: [],\n      creatorListBackup: [],\n      headerKeys: [{\n        id: \"id\",\n        label: \"id\"\n      }, {\n        id: \"name\",\n        label: \"Name\"\n      }, // { id: \"flag\", label: \"Flag\" },\n      {\n        id: \"email\",\n        label: \"Email\"\n      }, {\n        id: \"phone\",\n        label: \"Phone\"\n      }, {\n        id: \"products\",\n        label: \"Products\"\n      }, {\n        id: \"sales\",\n        label: \"Sales\"\n      }, {\n        id: \"status\",\n        label: \"Status\"\n      }, {\n        id: \"action\",\n        label: \"Action\",\n        noSort: true\n      } // { id: \"subscribers\", label: \"Subscribers\" },\n      // { id: \"rate\", label: \"Rate\" },\n      // { id: \"lifeTime\", label: \"Lifetime\" },\n      // { id: \"referrals\", label: \"Referrals\" },\n      // { id: \"paymentEnabled\", label: \"KYC\" },\n      // { id: \"payoutEnabled\", label: \"Pay Out\" },\n      ],\n      subscriberCounts: config.productCount,\n      filters: {\n        subscribers: \"\",\n        status: \"\",\n        search: \"\"\n      },\n      loading: {\n        loadingData: false,\n        changeStatusLoading: false,\n        sendingMessage: false\n      },\n      contact: {\n        via: \"email\",\n        message: \"\"\n      },\n      selectedCreators: [],\n      totalCount: 0,\n      creatorFieldsKeyMap: {\n        name: \"name\",\n        email: \"email\",\n        phone: \"phone\",\n        subscribers: \"_subscriptions\",\n        rate: \"subscriptionFees\",\n        lifeTime: \"_credit\",\n        referrals: \"_invitations\",\n        paymentEnabled: \"paymentEnabled\",\n        payoutEnabled: \"payoutEnabled\",\n        status: \"status\"\n      },\n      tableConfig: {\n        pageNumber: 1,\n        pageSize: 10,\n        sort: {\n          sortBy: \"createdAt\",\n          sortOrder: \"desc\"\n        },\n        filters: {}\n      }\n    };\n\n    _this._onToggleInfluencerModal = function (type, data) {\n      var _JSON$parse = JSON.parse(JSON.stringify(_this.state)),\n          addInfluencerModal = _JSON$parse.addInfluencerModal;\n\n      addInfluencerModal.isOpen = !addInfluencerModal.isOpen;\n      addInfluencerModal.type = type;\n      addInfluencerModal.data = data; // referralsModal.data = creator;\n\n      _this.setState({\n        addInfluencerModal: addInfluencerModal\n      }, function () {\n        console.log(_this.state);\n      });\n    };\n\n    _this._onToggleSubscriberModal = function (creator) {\n      var _JSON$parse2 = JSON.parse(JSON.stringify(_this.state)),\n          subscriberModal = _JSON$parse2.subscriberModal;\n\n      subscriberModal.isOpen = !subscriberModal.isOpen;\n      subscriberModal.data = creator;\n\n      _this.setState({\n        subscriberModal: subscriberModal\n      }, function () {\n        console.log(_this.state);\n      });\n    };\n\n    _this._manageLoading = function (key, value) {\n      var _this$state$loading = _this.state.loading,\n          loadingData = _this$state$loading.loadingData,\n          changeStatusLoading = _this$state$loading.changeStatusLoading,\n          sendingMessage = _this$state$loading.sendingMessage;\n\n      if (key === \"data\") {\n        loadingData = value;\n      } else if (key === \"change-status\") {\n        changeStatusLoading = value;\n      } else if (key === \"send-message\") {\n        sendingMessage = value;\n      }\n\n      _this.setState({\n        loading: {\n          loadingData: loadingData,\n          changeStatusLoading: changeStatusLoading,\n          sendingMessage: sendingMessage\n        }\n      });\n    };\n\n    _this._onStatusUpdate = function (data) {\n      var creatorList = _this.state.creatorList;\n      var creatorData = creatorList.find(function (each) {\n        return each.id === data.id;\n      }); // creatorData.status =\n      //   creatorData.status === \"Active\" ? \"Inactive\" : \"Active\";\n\n      _this.setState({\n        creatorList: creatorList,\n        creatorListBackup: creatorList\n      });\n\n      console.log(creatorList);\n\n      _this._manageLoading(\"change-status\", true);\n\n      var status = {};\n\n      if (creatorData.status.toLowerCase() === \"active\") {\n        status[\"isActive\"] = false;\n        creatorData.status = \"Inactive\";\n      } else {\n        status[\"isActive\"] = true;\n        creatorData.status = \"Active\";\n      }\n\n      editInfluencer(status, data.id).then(function (response) {\n        console.log(response);\n\n        _this._manageLoading(\"change-status\", false);\n\n        ToastsStore.success(\"Status changed Successfully!\", 3000);\n      }, function (error) {\n        console.log(error);\n\n        _this._manageLoading(\"change-status\", false); // ToastsStore.error(error.reason, 3000);\n\n\n        showToast(error.reason && error.reason.length ? error.reason : \"Server error. Try again after sometime.\", \"error\");\n      });\n    };\n\n    _this._dataFormat = function (cell, row, header) {\n      // console.log(cell, row, header);\n      if (header === \"-name\") {\n        return /*#__PURE__*/React.createElement(Link, {\n          to: \"/creator-view/\".concat(row.id),\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"d-flex justify-content-start align-items-center\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: \"https://www.countryflags.io/\".concat(row.flag, \"/flat/24.png\"),\n          alt: \"flag\",\n          className: \"mr-2\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }\n        }), row.name)); // } else if (header === \"flag\") {\n        //  return (\n        //     <img src={`https://www.countryflags.io/${row.flag}/flat/24.png`} alt=\"flag\" />\n        //   )\n      } else if (header === \"-email\") {\n        return row.email ? /*#__PURE__*/React.createElement(CopyclipBoard, {\n          copiedValue: row.email,\n          border: \"none\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 9\n          }\n        }) : \"-\";\n      } else if (header === \"-phone\") {\n        return row.phone !== \"-\" ? /*#__PURE__*/React.createElement(CopyclipBoard, {\n          copiedValue: row.phone // copiedValue={parsePhoneNumberFromString(\n          //   row.phone\n          // ).formatInternational()}\n          ,\n          border: \"none\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 9\n          }\n        }) : \"-\";\n      } else if (header === \"subscribers\") {\n        return cell.length ? /*#__PURE__*/React.createElement(\"span\", {\n          onClick: function onClick() {\n            return _this._onToggleSubscriberModal(row);\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 9\n          }\n        }, cell.length) : 0;\n      } else if (header === \"referrals\") {\n        return cell.length ? /*#__PURE__*/React.createElement(\"span\", {\n          onClick: function onClick() {\n            return _this._onToggleReferralsModal(row);\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 9\n          }\n        }, cell.length) : \"-\";\n      } else if (header === \"paymentEnabled\") {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 9\n          }\n        }, row.paymentEnabled ? /*#__PURE__*/React.createElement(\"i\", {\n          className: \"fa fa-check\",\n          \"aria-hidden\": \"true\",\n          title: \"Pay in completed\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }\n        }) : /*#__PURE__*/React.createElement(\"i\", {\n          className: \"fa fa-times\",\n          \"aria-hidden\": \"true\",\n          title: \"Pay in incompleted\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }\n        }), \"\\xA0\", row.payoutEnabled ? /*#__PURE__*/React.createElement(\"i\", {\n          className: \"fa fa-check\",\n          \"aria-hidden\": \"true\",\n          title: \"Pay out completed\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }\n        }) : /*#__PURE__*/React.createElement(\"i\", {\n          className: \"fa fa-times\",\n          \"aria-hidden\": \"true\",\n          title: \"Pay out incompleted\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }\n        }));\n      } else if (header === \"status\") {\n        return /*#__PURE__*/React.createElement(Input, {\n          type: \"select\",\n          value: cell,\n          onChange: function onChange() {\n            return _this._onStatusUpdate(row);\n          } // disabled={this.state.loading.changeStatusLoading}\n          ,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"option\", {\n          value: \"Active\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 11\n          }\n        }, \"Active\"), /*#__PURE__*/React.createElement(\"option\", {\n          value: \"Inactive\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 11\n          }\n        }, \"Inactive\"));\n      } else if (header === \"action\") {\n        return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n          className: \"mr-2\",\n          color: \"ghost-primary\",\n          onClick: function onClick() {\n            return _this._onToggleInfluencerModal(\"edit\", row);\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"fa fa-pencil\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }\n        })), /*#__PURE__*/React.createElement(Link, {\n          to: \"/\",\n          target: \"_blank\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          style: {\n            color: \"orangered\",\n            textDecoration: \"none\"\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"fa fa-eye\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 15\n          }\n        }))));\n      } else if (header === \"rate\") {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          title: \"Basic\",\n          style: {\n            textDecoration: \"none\"\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 11\n          }\n        }, row.rate && Number.isInteger(row.rate) ? \"$\" + row.rate : row.rate === 0 ? 0 : \"$\" + row.rate.toFixed(2)), \"\\xA0 \\xA0\", /*#__PURE__*/React.createElement(\"span\", {\n          title: \"Plus\",\n          style: {\n            textDecoration: \"none\"\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 11\n          }\n        }, row.plus && Number.isInteger(row.plus) ? \"$\" + row.plus : row.plus === 0 ? 0 : \"$\" + row.plus.toFixed(2)), \"\\xA0 \\xA0\", /*#__PURE__*/React.createElement(\"span\", {\n          title: \"Premium\",\n          style: {\n            textDecoration: \"none\"\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 11\n          }\n        }, row.premium && Number.isInteger(row.premium) ? \"$\" + row.premium : row.premium === 0 ? 0 : \"$\" + row.premium.toFixed(2))); // return typeof cell === \"number\" ? \"$\" + cell.toFixed(2) : \"-\";\n      } else if (header === \"lifeTime\") {\n        return typeof cell === \"number\" ? cell.toFixed(2) : \"-\";\n      } else {\n        return cell;\n      }\n    };\n\n    _this._getAllCreators = function (data) {\n      var _deepClone = deepClone(_this.state),\n          creatorList = _deepClone.creatorList,\n          tableConfig = _deepClone.tableConfig;\n\n      if (!creatorList.length) {\n        _this._manageLoading(\"data\", true);\n      }\n\n      getAllCreators(data).then(function (response) {\n        _this._manageLoading(\"data\", false);\n\n        tableConfig.loading = false;\n\n        _this.setState({\n          tableConfig: tableConfig\n        });\n\n        var creatorListResp = response.influencers.map(function (each) {\n          return {\n            name: \"\".concat(each.name.first, \" \").concat(each.name.last),\n            id: each.id,\n            email: each.email,\n            phone: each.phone || \"-\",\n            sales: each.totalEarned,\n            products: each.productCount,\n            // profilePicture: each.profilePicture || config.defaultUserPicture,\n            // subscribers: each._subscriptions,\n            // rate: each.subscriptionFees\n            //   ? Number(each.subscriptionFees.amount)\n            //   : \"-\",\n            // plus: each.plusSubscriptionFees\n            //   ? Number(each.plusSubscriptionFees.amount)\n            //   : \"-\",\n            // premium: each.premiumSubscriptionFees\n            //   ? Number(each.premiumSubscriptionFees.amount)\n            //   : \"-\",\n            // lifeTime: each._credit.reduce((acc, item) => {\n            //   return (acc = acc + item.amountToDestination);\n            // }, 0),\n            // referrals: each._invitations,\n            status: each.isActive ? \"Active\" : \"Inactive\" // payoutEnabled: each.payoutEnabled,\n            // paymentEnabled: each.paymentEnabled,\n            // createdAt: each.createdAt,\n\n          };\n        }); // creatorList = creatorList.sort((item1,item2)=>{\n        //   return new Date(item2.createdAt) - new Date(item1.createdAt);\n        // })\n\n        _this.setState({\n          creatorList: creatorListResp,\n          creatorListBackup: creatorListResp,\n          totalCount: response.count\n        });\n      }, function (error) {\n        console.log(error);\n        tableConfig.loading = false;\n\n        _this.setState({\n          tableConfig: tableConfig\n        });\n\n        _this._manageLoading(\"data\", false); // ToastsStore.error(error.reason, 3000);\n\n\n        showToast(error.reason && error.reason.length ? error.reason : \"Server error. Try again after sometime.\", \"error\");\n      });\n    };\n\n    _this._filterOnChange = function (_ref) {\n      var currentTarget = _ref.currentTarget;\n      var filters = _this.state.filters;\n      filters[currentTarget.name] = currentTarget.value;\n\n      _this.setState({\n        filters: filters\n      });\n\n      if (currentTarget.name !== \"search\") {\n        // this._filterCreatorList();\n        _this._applyFilterChanges();\n      }\n    };\n\n    _this._filterCreatorList = function () {\n      var filterConditions = []; // console.log(this.state);\n\n      var _this$state = _this.state,\n          filters = _this$state.filters,\n          creatorListBackup = _this$state.creatorListBackup,\n          creatorList = _this$state.creatorList;\n      Object.keys(filters).forEach(function (key) {\n        if (filters[key]) {\n          filterConditions.push(key);\n        }\n      });\n      console.log(filterConditions);\n      creatorList = creatorListBackup;\n\n      if (filterConditions.length) {\n        if (filters.subscribers) {\n          console.log(filters.subscribers);\n          var range = _this.state.subscriberCounts[filters.subscribers].value;\n          console.log(range);\n          creatorList = creatorList.filter(function (each) {\n            console.log(each.subscribers, each.subscribers >= range.min, each.subscribers <= range.max);\n\n            if (range.min && !range.max) {\n              return each.subscribers.length > range.min;\n            } else {\n              return each.subscribers.length >= range.min && each.subscribers.length <= range.max;\n            }\n          });\n        }\n\n        if (filters.status) {\n          creatorList = creatorList.filter(function (each) {\n            return each.status.toLowerCase() === filters.status.toLowerCase();\n          });\n        }\n\n        if (filters.search.trim().length) {\n          creatorList = creatorList.filter(function (each) {\n            return each.name.toLowerCase().includes(filters.search.toLowerCase()) || each.email.toLowerCase().includes(filters.search.toLowerCase()) || each.phone.toLowerCase().includes(filters.search.toLowerCase());\n          });\n        }\n\n        _this.setState({\n          creatorList: creatorList\n        });\n      } else {\n        _this.setState({\n          creatorList: creatorListBackup\n        });\n      }\n    };\n\n    _this._setSelectedRows = function (data) {\n      console.log(data);\n      var selectedCreators = _this.state.selectedCreators;\n      selectedCreators = data;\n\n      _this.setState({\n        selectedCreators: selectedCreators\n      });\n    };\n\n    _this._contactOnChange = function (_ref2) {\n      var currentTarget = _ref2.currentTarget;\n      var contact = _this.state.contact;\n      contact[currentTarget.name] = currentTarget.value;\n\n      _this.setState({\n        contact: contact\n      });\n    };\n\n    _this._sendMessage = function () {\n      var _this$state2 = _this.state,\n          contact = _this$state2.contact,\n          selectedCreators = _this$state2.selectedCreators;\n      var data = {\n        idlist: selectedCreators,\n        text: contact.via === \"email\" ? contact.message : _this._extractContent(contact.message)\n      };\n\n      if (!data.idlist.length) {\n        ToastsStore.warning(\"Please select atleast one creator\", 3000);\n        return;\n      }\n\n      if (!data.text.trim().length) {\n        ToastsStore.warning(\"Please write some message\", 3000);\n        return;\n      }\n\n      console.log(data);\n\n      _this._manageLoading(\"send-message\", true);\n\n      sendMessage(contact.via, data).then(function (response) {\n        console.log(response);\n\n        _this._setMessageContent(\"\", \"message\");\n\n        _this._manageLoading(\"send-message\", false);\n\n        ToastsStore.success(\"Message sent Successfully!\", 3000);\n      }, function (error) {\n        console.log(error);\n\n        _this._manageLoading(\"send-message\", false); // ToastsStore.error(error.reason, 3000);\n\n\n        showToast(error.reason && error.reason.length ? error.reason : \"Server error. Try again after sometime.\", \"error\");\n      });\n    };\n\n    _this._paginate = function (pageNumber, pageSize) {\n      console.log(\"pageNumber, pageSize :\", pageNumber, pageSize);\n      var tableConfig = _this.state.tableConfig;\n      tableConfig.pageNumber = pageNumber;\n      tableConfig.pageSize = pageSize;\n      tableConfig.loading = true;\n      setTimeout(function () {\n        _this.setState({\n          tableConfig: tableConfig\n        }, function () {\n          _this._getAllCreators(_this.state.tableConfig);\n        });\n      }, 100);\n    };\n\n    _this._onSortChange = function (sortName, sortOrder) {\n      var _deepClone2 = deepClone(_this.state),\n          tableConfig = _deepClone2.tableConfig;\n\n      tableConfig.sort.sortBy = _this.state.creatorFieldsKeyMap[sortName];\n      tableConfig.sort.sortOrder = sortOrder;\n      tableConfig.loading = true;\n\n      _this.setState({\n        tableConfig: tableConfig\n      }, function () {\n        _this._getAllCreators(tableConfig);\n      });\n\n      console.log(\"sortName, sortOrder :\", sortName, sortOrder);\n    };\n\n    _this._applyFilterChanges = function () {\n      var _deepClone3 = deepClone(_this.state),\n          filters = _deepClone3.filters,\n          tableConfig = _deepClone3.tableConfig;\n\n      var data = {};\n\n      if (filters.subscribers.length) {\n        data._subscriptions = {\n          lowerLimit: _this.state.subscriberCounts[filters.subscribers].value.min,\n          upperLimit: _this.state.subscriberCounts[filters.subscribers].value.max\n        };\n      }\n\n      if (filters.status.length) {\n        data.isActive = filters.status === \"Active\" ? true : false;\n      }\n\n      tableConfig.filters = data;\n\n      if (filters.search.length) {\n        tableConfig.search = filters.search;\n      } else {\n        tableConfig.search = \"\";\n      }\n\n      tableConfig.loading = true;\n\n      _this.setState({\n        tableConfig: tableConfig\n      }, function () {\n        _this._getAllCreators(tableConfig);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Creators, [{\n    key: \"_extractContent\",\n    value: function _extractContent(s) {\n      var span = document.createElement(\"span\");\n      span.innerHTML = s;\n      return span.textContent || span.innerText;\n    }\n  }, {\n    key: \"_setMessageContent\",\n    value: function _setMessageContent(value, key) {\n      var contact = this.state.contact;\n      contact[key] = value;\n      this.setState({\n        contact: contact\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._getAllCreators(this.state.tableConfig);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      console.log(\"creatorList\", this.state.creatorList);\n      var _this$state3 = this.state,\n          contact = _this$state3.contact,\n          loading = _this$state3.loading,\n          totalCount = _this$state3.totalCount,\n          tableConfig = _this$state3.tableConfig;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"app TruFansPgBg animated fadeIn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 601,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Container, {\n        fluid: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 602,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 603,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        xs: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"PgTitle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 605,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \" justify-content-start align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 606,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 612,\n          columnNumber: 19\n        }\n      }, \"Influencers\")), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"BtnPurple\",\n        onClick: function onClick() {\n          return _this2._onToggleInfluencerModal(\"add\", null);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-plus mr-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 19\n        }\n      }), \"New Influencer\")), !this.state.loading.loadingData && /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 622,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"filterWrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 625,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-filter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 626,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(Input, {\n        type: \"select\",\n        name: \"sales\",\n        value: this.state.filters.subscribers,\n        onChange: this._filterOnChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 628,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 633,\n          columnNumber: 25\n        }\n      }, \"Sales\"), this.state.subscriberCounts.map(function (option, index) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          key: index,\n          value: index,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 639,\n            columnNumber: 27\n          }\n        }, option.label);\n      })), /*#__PURE__*/React.createElement(Input, {\n        type: \"select\",\n        name: \"products\",\n        value: this.state.filters.subscribers,\n        onChange: this._filterOnChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 645,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 650,\n          columnNumber: 25\n        }\n      }, \"Products\"), this.state.subscriberCounts.map(function (option, index) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          key: index,\n          value: index,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 652,\n            columnNumber: 27\n          }\n        }, option.label);\n      })), /*#__PURE__*/React.createElement(Input, {\n        type: \"select\",\n        name: \"status\",\n        value: this.state.filters.status,\n        onChange: this._filterOnChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 657,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 25\n        }\n      }, \"Status\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Active\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 663,\n          columnNumber: 25\n        }\n      }, \"Active\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Inactive\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 25\n        }\n      }, \"Inactive\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 668,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        type: \"text\",\n        name: \"search\",\n        placeholder: \"Search\",\n        autoComplete: \"off\",\n        className: \"ml-2\",\n        value: this.state.filters.search,\n        onChange: this._filterOnChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 669,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        color: \"secondary\",\n        className: \"ml-2\",\n        onClick: function onClick() {\n          return _this2._applyFilterChanges();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 679,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"icon-magnifier\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 683,\n          columnNumber: 25\n        }\n      })))), /*#__PURE__*/React.createElement(CustomDataTable, {\n        tableData: this.state.creatorList,\n        headerKeys: this.state.headerKeys,\n        dataFormat: this._dataFormat,\n        totalCount: totalCount,\n        rowSelection: true,\n        onPaginate: function onPaginate(pageNumber, pageSize) {\n          return _this2._paginate(pageNumber, pageSize);\n        },\n        onSortChange: function onSortChange(sortName, sortOrder) {\n          return _this2._onSortChange(sortName, sortOrder);\n        },\n        setSelectedRows: function setSelectedRows(data) {\n          return _this2._setSelectedRows(data);\n        },\n        showTableLoading: tableConfig.loading,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 696,\n          columnNumber: 19\n        }\n      })), this.state.loading.loadingData && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"filterWrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 713,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"loading-section list-loading\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 714,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-spinner fa-spin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 715,\n          columnNumber: 21\n        }\n      }), \" \\xA0 Loading Creators..\")), /*#__PURE__*/React.createElement(SubscriberListModal, {\n        isOpen: this.state.subscriberModal.isOpen,\n        creatorData: this.state.subscriberModal.data,\n        toggle: function toggle() {\n          return _this2._onToggleSubscriberModal();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 774,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(ReferralsListModal, {\n        isOpen: this.state.referralsModal.isOpen,\n        creatorData: this.state.referralsModal.data,\n        toggle: function toggle() {\n          return _this2._onToggleReferralsModal();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 782,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(AddInfluencerModal, {\n        type: this.state.addInfluencerModal.type,\n        data: this.state.addInfluencerModal.data,\n        isOpen: this.state.addInfluencerModal.isOpen,\n        toggle: function toggle() {\n          return _this2._onToggleInfluencerModal();\n        },\n        reloadInfluencerList: this._getAllCreators,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 789,\n          columnNumber: 15\n        }\n      })))));\n    }\n  }]);\n\n  return Creators;\n}(Component);\n\nexport default Creators;","map":{"version":3,"sources":["/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/src/pages/Creators/influencer.js"],"names":["React","Component","Link","Container","Row","Col","Button","Input","CustomTable","getAllCreators","changeUserStatus","sendMessage","editInfluencer","config","ToastsStore","SubscriberListModal","ReferralsListModal","CopyclipBoard","TextEditor","showToast","deepClone","formatPhoneNumber","cloneDeep","CustomDataTable","AddInfluencerModal","parsePhoneNumberFromString","Creators","state","subscriberModal","isOpen","data","referralsModal","addInfluencerModal","type","creatorList","creatorListBackup","headerKeys","id","label","noSort","subscriberCounts","productCount","filters","subscribers","status","search","loading","loadingData","changeStatusLoading","sendingMessage","contact","via","message","selectedCreators","totalCount","creatorFieldsKeyMap","name","email","phone","rate","lifeTime","referrals","paymentEnabled","payoutEnabled","tableConfig","pageNumber","pageSize","sort","sortBy","sortOrder","_onToggleInfluencerModal","JSON","parse","stringify","setState","console","log","_onToggleSubscriberModal","creator","_manageLoading","key","value","_onStatusUpdate","creatorData","find","each","toLowerCase","then","response","success","error","reason","length","_dataFormat","cell","row","header","flag","_onToggleReferralsModal","color","textDecoration","Number","isInteger","toFixed","plus","premium","_getAllCreators","creatorListResp","influencers","map","first","last","sales","totalEarned","products","isActive","count","_filterOnChange","currentTarget","_applyFilterChanges","_filterCreatorList","filterConditions","Object","keys","forEach","push","range","filter","min","max","trim","includes","_setSelectedRows","_contactOnChange","_sendMessage","idlist","text","_extractContent","warning","_setMessageContent","_paginate","setTimeout","_onSortChange","sortName","_subscriptions","lowerLimit","upperLimit","s","span","document","createElement","innerHTML","textContent","innerText","option","index"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Container, Row, Col, Button, Input } from \"reactstrap\";\nimport CustomTable from \"../../components/custom-table\";\nimport {\n  getAllCreators,\n  changeUserStatus,\n  sendMessage,\n  editInfluencer,\n} from \"../../http/http-calls\";\nimport config from \"../../config\";\nimport { ToastsStore } from \"react-toasts\";\nimport SubscriberListModal from \"../../components/subscriber-list-modal\";\nimport ReferralsListModal from \"../../components/referrals-list-modal\";\nimport CopyclipBoard from \"../../components/copy-clipboard\";\nimport TextEditor from \"../../components/text-editor\";\nimport { showToast, deepClone, formatPhoneNumber } from \"../../helper-methods\";\nimport cloneDeep from \"clone-deep\";\nimport CustomDataTable from \"../../components/custom-data-table\";\nimport AddInfluencerModal from \"../../components/add-influencer-modal\";\nimport { parsePhoneNumberFromString } from \"libphonenumber-js\";\n\nclass Creators extends Component {\n  state = {\n    subscriberModal: {\n      isOpen: false,\n      data: null,\n    },\n    referralsModal: {\n      isOpen: false,\n      data: null,\n    },\n    addInfluencerModal: {\n      isOpen: false,\n      data: null,\n      type: \"add\",\n    },\n    creatorList: [],\n    creatorListBackup: [],\n    headerKeys: [\n      { id: \"id\", label: \"id\" },\n      { id: \"name\", label: \"Name\" },\n      // { id: \"flag\", label: \"Flag\" },\n      { id: \"email\", label: \"Email\" },\n      { id: \"phone\", label: \"Phone\" },\n      { id: \"products\", label: \"Products\" },\n      { id: \"sales\", label: \"Sales\" },\n      { id: \"status\", label: \"Status\" },\n      { id: \"action\", label: \"Action\", noSort: true },\n\n      // { id: \"subscribers\", label: \"Subscribers\" },\n      // { id: \"rate\", label: \"Rate\" },\n      // { id: \"lifeTime\", label: \"Lifetime\" },\n      // { id: \"referrals\", label: \"Referrals\" },\n      // { id: \"paymentEnabled\", label: \"KYC\" },\n      // { id: \"payoutEnabled\", label: \"Pay Out\" },\n    ],\n    subscriberCounts: config.productCount,\n    filters: {\n      subscribers: \"\",\n      status: \"\",\n      search: \"\",\n    },\n    loading: {\n      loadingData: false,\n      changeStatusLoading: false,\n      sendingMessage: false,\n    },\n    contact: {\n      via: \"email\",\n      message: \"\",\n    },\n    selectedCreators: [],\n    totalCount: 0,\n    creatorFieldsKeyMap: {\n      name: \"name\",\n      email: \"email\",\n      phone: \"phone\",\n      subscribers: \"_subscriptions\",\n      rate: \"subscriptionFees\",\n      lifeTime: \"_credit\",\n      referrals: \"_invitations\",\n      paymentEnabled: \"paymentEnabled\",\n      payoutEnabled: \"payoutEnabled\",\n      status: \"status\",\n    },\n    tableConfig: {\n      pageNumber: 1,\n      pageSize: 10,\n      sort: {\n        sortBy: \"createdAt\",\n        sortOrder: \"desc\",\n      },\n      filters: {},\n    },\n  };\n\n  _onToggleInfluencerModal = (type, data) => {\n    let { addInfluencerModal } = JSON.parse(JSON.stringify(this.state));\n    addInfluencerModal.isOpen = !addInfluencerModal.isOpen;\n    addInfluencerModal.type = type;\n    addInfluencerModal.data = data;\n\n    // referralsModal.data = creator;\n    this.setState(\n      {\n        addInfluencerModal,\n      },\n      () => {\n        console.log(this.state);\n      }\n    );\n  };\n\n  _onToggleSubscriberModal = (creator) => {\n    let { subscriberModal } = JSON.parse(JSON.stringify(this.state));\n    subscriberModal.isOpen = !subscriberModal.isOpen;\n    subscriberModal.data = creator;\n    this.setState(\n      {\n        subscriberModal,\n      },\n      () => {\n        console.log(this.state);\n      }\n    );\n  };\n\n  _manageLoading = (key, value) => {\n    let {\n      loadingData,\n      changeStatusLoading,\n      sendingMessage,\n    } = this.state.loading;\n    if (key === \"data\") {\n      loadingData = value;\n    } else if (key === \"change-status\") {\n      changeStatusLoading = value;\n    } else if (key === \"send-message\") {\n      sendingMessage = value;\n    }\n    this.setState({\n      loading: { loadingData, changeStatusLoading, sendingMessage },\n    });\n  };\n\n  _onStatusUpdate = (data) => {\n    let { creatorList } = this.state;\n    let creatorData = creatorList.find((each) => each.id === data.id);\n    // creatorData.status =\n    //   creatorData.status === \"Active\" ? \"Inactive\" : \"Active\";\n    this.setState({\n      creatorList,\n      creatorListBackup: creatorList,\n    });\n    console.log(creatorList);\n    this._manageLoading(\"change-status\", true);\n\n    let status = {};\n\n    if (creatorData.status.toLowerCase() === \"active\") {\n      status[\"isActive\"] = false;\n      creatorData.status = \"Inactive\";\n    } else {\n      status[\"isActive\"] = true;\n      creatorData.status = \"Active\";\n    }\n\n    editInfluencer(status,data.id).then(\n      (response) => {\n        console.log(response);\n        this._manageLoading(\"change-status\", false);\n        ToastsStore.success(\"Status changed Successfully!\", 3000);\n      },\n      (error) => {\n        console.log(error);\n        this._manageLoading(\"change-status\", false);\n        // ToastsStore.error(error.reason, 3000);\n        showToast(\n          error.reason && error.reason.length\n            ? error.reason\n            : \"Server error. Try again after sometime.\",\n          \"error\"\n        );\n      }\n    );\n  };\n\n  _dataFormat = (cell, row, header) => {\n    // console.log(cell, row, header);\n    if (header === \"-name\") {\n      return (\n        <Link to={`/creator-view/${row.id}`}>\n          <div className='d-flex justify-content-start align-items-center'>\n            {/* <div className=\"personImgWrap\">\n              <img\n                className=\"personImg\"\n                src={row.profilePicture}\n                alt=\"Profile Thumbnail\"\n              />\n            </div> */}\n            <img\n              src={`https://www.countryflags.io/${row.flag}/flat/24.png`}\n              alt='flag'\n              className='mr-2'\n            />\n            {row.name}\n          </div>\n        </Link>\n      );\n      // } else if (header === \"flag\") {\n      //  return (\n      //     <img src={`https://www.countryflags.io/${row.flag}/flat/24.png`} alt=\"flag\" />\n      //   )\n    } else if (header === \"-email\") {\n      return row.email ? (\n        <CopyclipBoard copiedValue={row.email} border='none'></CopyclipBoard>\n      ) : (\n        \"-\"\n      );\n    } else if (header === \"-phone\") {\n      return row.phone !== \"-\" ? (\n        <CopyclipBoard\n          copiedValue={row.phone}\n          // copiedValue={parsePhoneNumberFromString(\n          //   row.phone\n          // ).formatInternational()}\n          border='none'></CopyclipBoard>\n      ) : (\n        \"-\"\n      );\n    } else if (header === \"subscribers\") {\n      return cell.length ? (\n        <span onClick={() => this._onToggleSubscriberModal(row)}>\n          {cell.length}\n        </span>\n      ) : (\n        0\n      );\n    } else if (header === \"referrals\") {\n      return cell.length ? (\n        <span onClick={() => this._onToggleReferralsModal(row)}>\n          {cell.length}\n        </span>\n      ) : (\n        \"-\"\n      );\n    } else if (header === \"paymentEnabled\") {\n      return (\n        <div>\n          {row.paymentEnabled ? (\n            <i\n              className='fa fa-check'\n              aria-hidden='true'\n              title='Pay in completed'></i>\n          ) : (\n            <i\n              className='fa fa-times'\n              aria-hidden='true'\n              title='Pay in incompleted'></i>\n          )}\n          &nbsp;\n          {row.payoutEnabled ? (\n            <i\n              className='fa fa-check'\n              aria-hidden='true'\n              title='Pay out completed'></i>\n          ) : (\n            <i\n              className='fa fa-times'\n              aria-hidden='true'\n              title='Pay out incompleted'></i>\n          )}\n        </div>\n      );\n    } else if (header === \"status\") {\n      return (\n        <Input\n          type='select'\n          value={cell}\n          onChange={() => this._onStatusUpdate(row)}\n          // disabled={this.state.loading.changeStatusLoading}\n        >\n          <option value='Active'>Active</option>\n          <option value='Inactive'>Inactive</option>\n        </Input>\n      );\n    } else if (header === \"action\") {\n      return (\n        <>\n          {/* <Link to={`/creator-view/${row.id}`}> */}\n          <Button\n            className='mr-2'\n            color='ghost-primary'\n            onClick={() => this._onToggleInfluencerModal(\"edit\", row)}>\n            <i className='fa fa-pencil'></i>\n            {/* Edit */}\n          </Button>\n          <Link to={\"/\"} target='_blank'>\n            <span style={{ color: \"orangered\", textDecoration: \"none\" }}>\n              {/* Profile View */}\n              <i className='fa fa-eye'></i>\n            </span>\n          </Link>\n          {/* <Button\n            color=\"ghost-primary\"\n            onClick={() => this._onToggleInfluencerModal(\"view\", row)}\n          >\n            View\n          </Button> */}\n          {/* </Link> */}\n        </>\n      );\n    } else if (header === \"rate\") {\n      return (\n        <p>\n          <span title='Basic' style={{ textDecoration: \"none\" }}>\n            {row.rate && Number.isInteger(row.rate)\n              ? \"$\" + row.rate\n              : row.rate === 0\n              ? 0\n              : \"$\" + row.rate.toFixed(2)}\n          </span>\n          &nbsp; &nbsp;\n          <span title='Plus' style={{ textDecoration: \"none\" }}>\n            {row.plus && Number.isInteger(row.plus)\n              ? \"$\" + row.plus\n              : row.plus === 0\n              ? 0\n              : \"$\" + row.plus.toFixed(2)}\n          </span>\n          &nbsp; &nbsp;\n          <span title='Premium' style={{ textDecoration: \"none\" }}>\n            {row.premium && Number.isInteger(row.premium)\n              ? \"$\" + row.premium\n              : row.premium === 0\n              ? 0\n              : \"$\" + row.premium.toFixed(2)}\n          </span>\n        </p>\n      );\n      // return typeof cell === \"number\" ? \"$\" + cell.toFixed(2) : \"-\";\n    } else if (header === \"lifeTime\") {\n      return typeof cell === \"number\" ? cell.toFixed(2) : \"-\";\n    } else {\n      return cell;\n    }\n  };\n\n  _getAllCreators = (data) => {\n    let { creatorList, tableConfig } = deepClone(this.state);\n    if (!creatorList.length) {\n      this._manageLoading(\"data\", true);\n    }\n    getAllCreators(data).then(\n      (response) => {\n        this._manageLoading(\"data\", false);\n        tableConfig.loading = false;\n        this.setState({ tableConfig });\n        let creatorListResp = response.influencers.map((each) => {\n          return {\n            name: `${each.name.first} ${each.name.last}`,\n            id: each.id,\n            email: each.email,\n            phone: each.phone || \"-\",\n            sales: each.totalEarned,\n            products: each.productCount,\n            // profilePicture: each.profilePicture || config.defaultUserPicture,\n            // subscribers: each._subscriptions,\n            // rate: each.subscriptionFees\n            //   ? Number(each.subscriptionFees.amount)\n            //   : \"-\",\n            // plus: each.plusSubscriptionFees\n            //   ? Number(each.plusSubscriptionFees.amount)\n            //   : \"-\",\n            // premium: each.premiumSubscriptionFees\n            //   ? Number(each.premiumSubscriptionFees.amount)\n            //   : \"-\",\n            // lifeTime: each._credit.reduce((acc, item) => {\n            //   return (acc = acc + item.amountToDestination);\n            // }, 0),\n            // referrals: each._invitations,\n            status: each.isActive ? \"Active\" : \"Inactive\",\n            // payoutEnabled: each.payoutEnabled,\n            // paymentEnabled: each.paymentEnabled,\n            // createdAt: each.createdAt,\n          };\n        });\n        // creatorList = creatorList.sort((item1,item2)=>{\n        //   return new Date(item2.createdAt) - new Date(item1.createdAt);\n        // })\n        this.setState({\n          creatorList: creatorListResp,\n          creatorListBackup: creatorListResp,\n          totalCount: response.count,\n        });\n      },\n      (error) => {\n        console.log(error);\n        tableConfig.loading = false;\n        this.setState({ tableConfig });\n        this._manageLoading(\"data\", false);\n        // ToastsStore.error(error.reason, 3000);\n        showToast(\n          error.reason && error.reason.length\n            ? error.reason\n            : \"Server error. Try again after sometime.\",\n          \"error\"\n        );\n      }\n    );\n  };\n\n  _filterOnChange = ({ currentTarget }) => {\n    let { filters } = this.state;\n    filters[currentTarget.name] = currentTarget.value;\n    this.setState({ filters });\n    if (currentTarget.name !== \"search\") {\n      // this._filterCreatorList();\n      this._applyFilterChanges();\n    }\n  };\n\n  // old function for frontend filtering - not using now\n  _filterCreatorList = () => {\n    let filterConditions = [];\n    // console.log(this.state);\n    let { filters, creatorListBackup, creatorList } = this.state;\n    Object.keys(filters).forEach((key) => {\n      if (filters[key]) {\n        filterConditions.push(key);\n      }\n    });\n    console.log(filterConditions);\n    creatorList = creatorListBackup;\n    if (filterConditions.length) {\n      if (filters.subscribers) {\n        console.log(filters.subscribers);\n        let range = this.state.subscriberCounts[filters.subscribers].value;\n        console.log(range);\n        creatorList = creatorList.filter((each) => {\n          console.log(\n            each.subscribers,\n            each.subscribers >= range.min,\n            each.subscribers <= range.max\n          );\n          if (range.min && !range.max) {\n            return each.subscribers.length > range.min;\n          } else {\n            return (\n              each.subscribers.length >= range.min &&\n              each.subscribers.length <= range.max\n            );\n          }\n        });\n      }\n      if (filters.status) {\n        creatorList = creatorList.filter((each) => {\n          return each.status.toLowerCase() === filters.status.toLowerCase();\n        });\n      }\n      if (filters.search.trim().length) {\n        creatorList = creatorList.filter((each) => {\n          return (\n            each.name.toLowerCase().includes(filters.search.toLowerCase()) ||\n            each.email.toLowerCase().includes(filters.search.toLowerCase()) ||\n            each.phone.toLowerCase().includes(filters.search.toLowerCase())\n          );\n        });\n      }\n      this.setState({ creatorList });\n    } else {\n      this.setState({ creatorList: creatorListBackup });\n    }\n  };\n\n  _setSelectedRows = (data) => {\n    console.log(data);\n    let { selectedCreators } = this.state;\n    selectedCreators = data;\n    this.setState({ selectedCreators });\n  };\n\n  _contactOnChange = ({ currentTarget }) => {\n    let { contact } = this.state;\n    contact[currentTarget.name] = currentTarget.value;\n    this.setState({ contact });\n  };\n\n  _extractContent(s) {\n    var span = document.createElement(\"span\");\n    span.innerHTML = s;\n    return span.textContent || span.innerText;\n  }\n\n  _setMessageContent(value, key) {\n    let { contact } = this.state;\n    contact[key] = value;\n    this.setState({ contact });\n  }\n\n  _sendMessage = () => {\n    let { contact, selectedCreators } = this.state;\n    let data = {\n      idlist: selectedCreators,\n      text:\n        contact.via === \"email\"\n          ? contact.message\n          : this._extractContent(contact.message),\n    };\n    if (!data.idlist.length) {\n      ToastsStore.warning(\"Please select atleast one creator\", 3000);\n      return;\n    }\n    if (!data.text.trim().length) {\n      ToastsStore.warning(\"Please write some message\", 3000);\n      return;\n    }\n    console.log(data);\n    this._manageLoading(\"send-message\", true);\n    sendMessage(contact.via, data).then(\n      (response) => {\n        console.log(response);\n        this._setMessageContent(\"\", \"message\");\n        this._manageLoading(\"send-message\", false);\n        ToastsStore.success(\"Message sent Successfully!\", 3000);\n      },\n      (error) => {\n        console.log(error);\n        this._manageLoading(\"send-message\", false);\n        // ToastsStore.error(error.reason, 3000);\n        showToast(\n          error.reason && error.reason.length\n            ? error.reason\n            : \"Server error. Try again after sometime.\",\n          \"error\"\n        );\n      }\n    );\n  };\n\n  _paginate = (pageNumber, pageSize) => {\n    console.log(\"pageNumber, pageSize :\", pageNumber, pageSize);\n    const { tableConfig } = this.state;\n    tableConfig.pageNumber = pageNumber;\n    tableConfig.pageSize = pageSize;\n    tableConfig.loading = true;\n    setTimeout(() => {\n      this.setState({ tableConfig }, () => {\n        this._getAllCreators(this.state.tableConfig);\n      });\n    }, 100);\n  };\n\n  _onSortChange = (sortName, sortOrder) => {\n    const { tableConfig } = deepClone(this.state);\n    tableConfig.sort.sortBy = this.state.creatorFieldsKeyMap[sortName];\n    tableConfig.sort.sortOrder = sortOrder;\n    tableConfig.loading = true;\n    this.setState({ tableConfig }, () => {\n      this._getAllCreators(tableConfig);\n    });\n    console.log(\"sortName, sortOrder :\", sortName, sortOrder);\n  };\n\n  _applyFilterChanges = () => {\n    const { filters, tableConfig } = deepClone(this.state);\n\n    let data = {};\n    if (filters.subscribers.length) {\n      data._subscriptions = {\n        lowerLimit: this.state.subscriberCounts[filters.subscribers].value.min,\n        upperLimit: this.state.subscriberCounts[filters.subscribers].value.max,\n      };\n    }\n    if (filters.status.length) {\n      data.isActive = filters.status === \"Active\" ? true : false;\n    }\n\n    tableConfig.filters = data;\n    if (filters.search.length) {\n      tableConfig.search = filters.search;\n    } else {\n      tableConfig.search = \"\";\n    }\n    tableConfig.loading = true;\n    this.setState({ tableConfig }, () => {\n      this._getAllCreators(tableConfig);\n    });\n  };\n\n  componentDidMount() {\n    this._getAllCreators(this.state.tableConfig);\n  }\n\n  render() {\n    console.log(\"creatorList\", this.state.creatorList);\n    const { contact, loading, totalCount, tableConfig } = this.state;\n\n    return (\n      <div className='app TruFansPgBg animated fadeIn'>\n        <Container fluid>\n          <Row>\n            <Col xs='12'>\n              <div className='PgTitle'>\n                <div className=' justify-content-start align-items-center'>\n                  {/* on clicking the below btn, it should take back the user to the previous page in history */}\n                  {/* <Button color=\"ghost-dark\" className=\"customBackBtn\">\n                  <i className=\"fa fa-arrow-left\"></i>\n                </Button> */}\n\n                  <h2>Influencers</h2>\n                </div>\n                <button\n                  className='BtnPurple'\n                  onClick={() => this._onToggleInfluencerModal(\"add\", null)}>\n                  <i className='fa fa-plus mr-1'></i>New Influencer\n                </button>\n              </div>\n\n              {!this.state.loading.loadingData && (\n                <div>\n                  {/* filters */}\n                  <div className='filterWrap'>\n                    <div className='d-flex align-items-center'>\n                      <i className='fa fa-filter'></i>\n\n                      <Input\n                        type='select'\n                        name='sales'\n                        value={this.state.filters.subscribers}\n                        onChange={this._filterOnChange}>\n                        <option value=''>Sales</option>\n                        {/* <option value=''>0</option>\n                        <option value=''>&lt; $10,000</option>\n                        <option value=''>&lt; $25,000</option>\n                        <option value=''>$25,000+</option> */}\n                        {this.state.subscriberCounts.map((option, index) => (\n                          <option key={index} value={index}>\n                            {option.label}\n                          </option>\n                        ))}\n                      </Input>\n\n                      <Input\n                        type='select'\n                        name='products'\n                        value={this.state.filters.subscribers}\n                        onChange={this._filterOnChange}>\n                        <option value=''>Products</option>\n                        {this.state.subscriberCounts.map((option, index) => (\n                          <option key={index} value={index}>\n                            {option.label}\n                          </option>\n                        ))}\n                      </Input>\n                      <Input\n                        type='select'\n                        name='status'\n                        value={this.state.filters.status}\n                        onChange={this._filterOnChange}>\n                        <option value=''>Status</option>\n                        <option value='Active'>Active</option>\n                        <option value='Inactive'>Inactive</option>\n                      </Input>\n                    </div>\n\n                    <div className='d-flex align-items-center'>\n                      <Input\n                        type='text'\n                        name='search'\n                        placeholder='Search'\n                        autoComplete='off'\n                        className='ml-2'\n                        value={this.state.filters.search}\n                        onChange={this._filterOnChange}\n                      />\n\n                      <Button\n                        color='secondary'\n                        className='ml-2'\n                        onClick={() => this._applyFilterChanges()}>\n                        <i className='icon-magnifier'></i>\n                      </Button>\n                    </div>\n                  </div>\n\n                  {/* <CustomTable\n                    tableData={this.state.creatorList}\n                    headerKeys={this.state.headerKeys}\n                    dataFormat={this._dataFormat}\n                    rowSelection={true}\n                    setSelectedRows={data => this._setSelectedRows(data)}\n                  ></CustomTable> */}\n\n                  <CustomDataTable\n                    tableData={this.state.creatorList}\n                    headerKeys={this.state.headerKeys}\n                    dataFormat={this._dataFormat}\n                    totalCount={totalCount}\n                    rowSelection={true}\n                    onPaginate={(pageNumber, pageSize) =>\n                      this._paginate(pageNumber, pageSize)\n                    }\n                    onSortChange={(sortName, sortOrder) =>\n                      this._onSortChange(sortName, sortOrder)\n                    }\n                    setSelectedRows={(data) => this._setSelectedRows(data)}\n                    showTableLoading={tableConfig.loading}></CustomDataTable>\n                </div>\n              )}\n              {this.state.loading.loadingData && (\n                <div className='filterWrap'>\n                  <div className='loading-section list-loading'>\n                    <i className='fa fa-spinner fa-spin'></i> &nbsp; Loading\n                    Creators..\n                  </div>\n                </div>\n              )}\n\n              {/* The below div will appear after the user selects row(s) from the above table */}\n              {/* <div className=\"d-flex my-5 flex-column w-75 mx-auto\">\n                <h2 className=\"text-center mb-3\">Contact</h2>\n                <div className=\"d-flex justify-content-between\">\n                  <Input\n                    type=\"select\"\n                    style={{ width: \"175px\" }}\n                    className=\"mr-3\"\n                    name=\"via\"\n                    value={contact.via}\n                    onChange={this._contactOnChange}\n                  >\n                    <option value=\"email\" defaultValue>\n                      Email\n                    </option>\n                    <option value=\"sms\">SMS</option>\n                  </Input>\n\n                  <div style={{ flex: 1 }}>\n                     there will be a \"WYSIWYG\" editor below in place of a textarea  \n                    <Input\n                      type=\"textarea\"\n                      id=\"\"\n                      rows=\"6\"\n                      placeholder=\"Enter your message here..\"\n                      name=\"message\"\n                      value={contact.message}\n                      onChange={this._contactOnChange}\n                    />\n                    <TextEditor\n                      content={contact.message}\n                      onChange={(e) => this._setMessageContent(e, \"message\")}\n                    ></TextEditor>\n\n                    <Button\n                      className=\"BtnPurple mt-4 d-block mx-auto\"\n                      style={{ padding: \"8px 25px\" }}\n                      disabled={loading.sendingMessage}\n                      onClick={this._sendMessage}\n                    >\n                      {loading.sendingMessage ? (\n                        <>\n                          <i className=\"fa fa-spinner fa-spin mr5\" />\n                          &nbsp;\n                        </>\n                      ) : null}\n                      Send\n                    </Button>\n                  </div>\n                </div>\n              </div> */}\n\n              {/* Modal for \"Subscribers\" */}\n              <SubscriberListModal\n                isOpen={this.state.subscriberModal.isOpen}\n                creatorData={this.state.subscriberModal.data}\n                toggle={() =>\n                  this._onToggleSubscriberModal()\n                }></SubscriberListModal>\n\n              {/* Modal for \"Referrals\" */}\n              <ReferralsListModal\n                isOpen={this.state.referralsModal.isOpen}\n                creatorData={this.state.referralsModal.data}\n                toggle={() =>\n                  this._onToggleReferralsModal()\n                }></ReferralsListModal>\n              {/* Modal for adding Influencers */}\n              <AddInfluencerModal\n                type={this.state.addInfluencerModal.type}\n                data={this.state.addInfluencerModal.data}\n                isOpen={this.state.addInfluencerModal.isOpen}\n                toggle={() => this._onToggleInfluencerModal()}\n                reloadInfluencerList={\n                  this._getAllCreators\n                }></AddInfluencerModal>\n            </Col>\n          </Row>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default Creators;\n"]},"metadata":{},"sourceType":"module"}