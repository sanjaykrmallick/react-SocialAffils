{"ast":null,"code":"import _classCallCheck from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/src/pages/login.js\";\nimport React, { Component } from \"react\";\nimport { Button, Card, CardBody, CardGroup, Col, Container, Form, Input, InputGroup, InputGroupAddon, InputGroupText, Row } from \"reactstrap\";\nimport { ToastsStore } from \"react-toasts\";\nimport { login } from \"../http/http-calls\";\nimport { showToast } from \"../helper-methods\";\n\nvar Login = /*#__PURE__*/function (_Component) {\n  _inherits(Login, _Component);\n\n  var _super = _createSuper(Login);\n\n  function Login() {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      admin: {\n        handle: \"\",\n        password: \"\"\n      },\n      errors: {},\n      isDirty: {\n        handle: false,\n        password: false\n      },\n      loading: false\n    };\n\n    _this._handleOnChange = function (_ref) {\n      var currentTarget = _ref.currentTarget;\n      var _this$state = _this.state,\n          admin = _this$state.admin,\n          isDirty = _this$state.isDirty;\n      admin[currentTarget.name] = currentTarget.value;\n      isDirty[currentTarget.name] = true;\n\n      _this.setState({\n        admin: admin\n      });\n\n      _this._validateForm();\n    };\n\n    _this._handleOnSubmit = function (event) {\n      event.preventDefault();\n      var isDirty = _this.state.isDirty;\n      isDirty.handle = true;\n      isDirty.password = true;\n\n      _this.setState({\n        isDirty: isDirty\n      });\n\n      console.log(_this.state.isDirty);\n\n      var errors = _this._validateForm();\n\n      console.log(errors); // this.setState({errors});\n\n      if (!errors) {\n        console.log(\"Make API call\");\n\n        _this._login();\n      }\n    };\n\n    _this._login = function () {\n      var _this$state2 = _this.state,\n          admin = _this$state2.admin,\n          loading = _this$state2.loading;\n      loading = true;\n\n      _this.setState({\n        loading: loading\n      });\n\n      login(admin).then(function (response) {\n        console.log(response);\n        localStorage.socialAffilAdminToken = response.token;\n        loading = false;\n\n        _this.setState({\n          loading: loading\n        });\n\n        ToastsStore.success(\"Successfully logged in!\", 3000);\n\n        _this.props.history.push(\"/sellers\");\n      }, function (error) {\n        console.log(error);\n        loading = false;\n        showToast(error.reason && error.reason.length ? error.reason : \"Server error. Try again after sometime.\", \"error\");\n\n        _this.setState({\n          loading: loading\n        }); // ToastsStore.error(error.reason, 1500);\n\n      });\n    };\n\n    _this._goToForgotPassword = function () {\n      _this.props.history.push(\"forgot-password\");\n    };\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"_validateForm\",\n\n    /**\n     * To Validate the form and show the error messages\n     */\n    value: function _validateForm() {\n      var _this$state3 = this.state,\n          admin = _this$state3.admin,\n          errors = _this$state3.errors,\n          isDirty = _this$state3.isDirty; // console.log(admin, isDirty);\n\n      Object.keys(admin).forEach(function (each) {\n        if (each === \"handle\" && isDirty.handle) {\n          if (!admin.handle.trim().length) {\n            errors.handle = \"Email is Required\";\n          } else if (admin.handle.trim().length && !new RegExp(\"^[a-zA-Z0-9]{1}[a-zA-Z0-9._+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,3}$\").test(admin.handle)) {\n            errors.handle = \"Please enter valid Email\";\n          } else {\n            delete errors[each];\n            isDirty.handle = false;\n          }\n        } else if (each === \"password\" && isDirty.password) {\n          if (!admin.password.trim().length) {\n            // console.log(admin.password);\n            errors[each] = \"Password is Required\";\n          } else {\n            delete errors[each];\n            isDirty.password = false;\n          }\n        }\n      });\n      this.setState({\n        errors: errors\n      });\n      return Object.keys(errors).length ? errors : null;\n    }\n    /**\n     * Make login api call and navigate to dashboard after login\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"app loginPgBg animated fadeIn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Container, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        className: \"justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"loginPgContent\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(CardGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 23\n        }\n      }, \"Login\"), /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          color: \"#999\",\n          letterSpacing: \"0.5px\",\n          fontSize: \"15px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 23\n        }\n      }, \"Sign In to your account\"), /*#__PURE__*/React.createElement(Form, {\n        onSubmit: this._handleOnSubmit,\n        noValidate: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(InputGroup, {\n        className: this.state.errors && this.state.errors.handle ? \"mb-3 invalid-input\" : \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(InputGroupAddon, {\n        addonType: \"prepend\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(InputGroupText, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-envelope-o\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 31\n        }\n      }))), /*#__PURE__*/React.createElement(Input, {\n        type: \"email\",\n        placeholder: \"Email\",\n        autoComplete: \"off\",\n        name: \"handle\",\n        onChange: this._handleOnChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 27\n        }\n      }), this.state.errors && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"validation-error\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 29\n        }\n      }, this.state.errors.handle)), /*#__PURE__*/React.createElement(InputGroup, {\n        className: this.state.errors && this.state.errors.password ? \"mb-2 invalid-input\" : \"mb2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(InputGroupAddon, {\n        addonType: \"prepend\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(InputGroupText, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"icon-lock-open\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 31\n        }\n      }))), /*#__PURE__*/React.createElement(Input, {\n        type: \"password\",\n        placeholder: \"Password\",\n        autoComplete: \"off\",\n        name: \"password\",\n        onChange: this._handleOnChange,\n        className: this.state.errors && this.state.errors.handle ? \"invalid-input\" : \"valid-input\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 27\n        }\n      }), this.state.errors && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"validation-error\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 29\n        }\n      }, this.state.errors.password)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-end align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        type: \"button\",\n        color: \"link\",\n        className: \"px-0 text-dark\",\n        onClick: this._goToForgotPassword,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 27\n        }\n      }, \"Forgot Password?\")), /*#__PURE__*/React.createElement(Button, {\n        type: \"submit\",\n        className: !this.state.admin.handle.trim().length ? \"btnPurpleDisable\" : \"BtnPurple\" // className=\"BtnPurple\"\n        ,\n        disabled: !this.state.admin.handle.trim().length ? true : this.state.loading,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 25\n        }\n      }, this.state.loading ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-spinner fa-spin mr5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 31\n        }\n      }), \"\\xA0\") : null, \"Login\")))))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"login-footer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-start flex-column flex-sm-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 15\n        }\n      }, \"\\xA9 SocialAffil 2020\")), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"powered-by\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }\n      }, \"Powered by\", \" \", /*#__PURE__*/React.createElement(\"a\", {\n        href: \"https://www.logic-square.com/\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 15\n        }\n      }, \"Logic Square\")))));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default Login;","map":{"version":3,"sources":["/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/src/pages/login.js"],"names":["React","Component","Button","Card","CardBody","CardGroup","Col","Container","Form","Input","InputGroup","InputGroupAddon","InputGroupText","Row","ToastsStore","login","showToast","Login","state","admin","handle","password","errors","isDirty","loading","_handleOnChange","currentTarget","name","value","setState","_validateForm","_handleOnSubmit","event","preventDefault","console","log","_login","then","response","localStorage","socialAffilAdminToken","token","success","props","history","push","error","reason","length","_goToForgotPassword","Object","keys","forEach","each","trim","RegExp","test","color","letterSpacing","fontSize"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  Button,\n  Card,\n  CardBody,\n  CardGroup,\n  Col,\n  Container,\n  Form,\n  Input,\n  InputGroup,\n  InputGroupAddon,\n  InputGroupText,\n  Row,\n} from \"reactstrap\";\nimport { ToastsStore } from \"react-toasts\";\nimport { login } from \"../http/http-calls\";\nimport { showToast } from \"../helper-methods\";\nclass Login extends Component {\n  state = {\n    admin: {\n      handle: \"\",\n      password: \"\",\n    },\n    errors: {},\n    isDirty: {\n      handle: false,\n      password: false,\n    },\n    loading: false,\n  };\n  /**\n   * _handleOnChange\n   * To handle input on change and set the values to state\n   */\n  _handleOnChange = ({ currentTarget }) => {\n    const { admin, isDirty } = this.state;\n    admin[currentTarget.name] = currentTarget.value;\n    isDirty[currentTarget.name] = true;\n    this.setState({ admin });\n    this._validateForm();\n  };\n\n  /**\n   * To handle submit of the form and validate it\n   */\n  _handleOnSubmit = (event) => {\n    event.preventDefault();\n    const { isDirty } = this.state;\n    isDirty.handle = true;\n    isDirty.password = true;\n    this.setState({ isDirty });\n    console.log(this.state.isDirty);\n    let errors = this._validateForm();\n    console.log(errors);\n    // this.setState({errors});\n    if (!errors) {\n      console.log(\"Make API call\");\n      this._login();\n    }\n  };\n\n  /**\n   * To Validate the form and show the error messages\n   */\n  _validateForm() {\n    const { admin, errors, isDirty } = this.state;\n    // console.log(admin, isDirty);\n    Object.keys(admin).forEach((each) => {\n      if (each === \"handle\" && isDirty.handle) {\n        if (!admin.handle.trim().length) {\n          errors.handle = \"Email is Required\";\n        } else if (\n          admin.handle.trim().length &&\n          !new RegExp(\n            \"^[a-zA-Z0-9]{1}[a-zA-Z0-9._+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,3}$\"\n          ).test(admin.handle)\n        ) {\n          errors.handle = \"Please enter valid Email\";\n        } else {\n          delete errors[each];\n          isDirty.handle = false;\n        }\n      } else if (each === \"password\" && isDirty.password) {\n        if (!admin.password.trim().length) {\n          // console.log(admin.password);\n          errors[each] = \"Password is Required\";\n        } else {\n          delete errors[each];\n          isDirty.password = false;\n        }\n      }\n    });\n    this.setState({ errors });\n    return Object.keys(errors).length ? errors : null;\n  }\n\n  /**\n   * Make login api call and navigate to dashboard after login\n   */\n  _login = () => {\n    let { admin, loading } = this.state;\n    loading = true;\n    this.setState({ loading });\n    login(admin).then(\n      (response) => {\n        console.log(response);\n        localStorage.socialAffilAdminToken = response.token;\n        loading = false;\n        this.setState({ loading });\n        ToastsStore.success(\"Successfully logged in!\", 3000);\n        this.props.history.push(\"/sellers\");\n      },\n      (error) => {\n        console.log(error);\n        loading = false;\n        showToast(\n          error.reason && error.reason.length\n            ? error.reason\n            : \"Server error. Try again after sometime.\",\n          \"error\"\n        );\n        this.setState({ loading });\n        // ToastsStore.error(error.reason, 1500);\n      }\n    );\n  };\n\n  /**\n   * To navigate to Forgot password\n   */\n  _goToForgotPassword = () => {\n    this.props.history.push(\"forgot-password\");\n  };\n\n  render() {\n    return (\n      <div className=\"app loginPgBg animated fadeIn\">\n        <Container>\n          <Row className=\"justify-content-center\">\n            <Col md=\"12\">\n              <div className=\"loginPgContent\">\n                <CardGroup>\n                  <Card>\n                    <CardBody>\n                      {/* <img\n                        src={\"/assets/soomers-logo.png\"}\n                        alt=\"True Fanz Logo\"\n                        className=\"company-logo mb-4\"\n                      /> */}\n                      <h2>Login</h2>\n                      <p\n                        style={{\n                          color: \"#999\",\n                          letterSpacing: \"0.5px\",\n                          fontSize: \"15px\",\n                        }}\n                      >\n                        Sign In to your account\n                      </p>\n                      <Form onSubmit={this._handleOnSubmit} noValidate>\n                        <InputGroup\n                          className={\n                            this.state.errors && this.state.errors.handle\n                              ? \"mb-3 invalid-input\"\n                              : \"mb-3\"\n                          }\n                        >\n                          <InputGroupAddon addonType=\"prepend\">\n                            <InputGroupText>\n                              <i className=\"fa fa-envelope-o\"></i>\n                            </InputGroupText>\n                          </InputGroupAddon>\n                          <Input\n                            type=\"email\"\n                            placeholder=\"Email\"\n                            autoComplete=\"off\"\n                            name=\"handle\"\n                            onChange={this._handleOnChange}\n                          />\n                          {this.state.errors && (\n                            <div className=\"validation-error\">\n                              {this.state.errors.handle}\n                            </div>\n                          )}\n                        </InputGroup>\n                        <InputGroup\n                          className={\n                            this.state.errors && this.state.errors.password\n                              ? \"mb-2 invalid-input\"\n                              : \"mb2\"\n                          }\n                        >\n                          <InputGroupAddon addonType=\"prepend\">\n                            <InputGroupText>\n                              <i className=\"icon-lock-open\"></i>\n                            </InputGroupText>\n                          </InputGroupAddon>\n                          <Input\n                            type=\"password\"\n                            placeholder=\"Password\"\n                            autoComplete=\"off\"\n                            name=\"password\"\n                            onChange={this._handleOnChange}\n                            className={\n                              this.state.errors && this.state.errors.handle\n                                ? \"invalid-input\"\n                                : \"valid-input\"\n                            }\n                          />\n                          {this.state.errors && (\n                            <div className=\"validation-error\">\n                              {this.state.errors.password}\n                            </div>\n                          )}\n                        </InputGroup>\n                        <div className=\"d-flex justify-content-end align-items-center\">\n                          <Button\n                            type=\"button\"\n                            color=\"link\"\n                            className=\"px-0 text-dark\"\n                            onClick={this._goToForgotPassword}\n                          >\n                            Forgot Password?\n                          </Button>\n                        </div>\n                        {/* on clicking the login btn, it should take the user to Dashboard page */}\n                        <Button\n                          type=\"submit\"\n                          className={!this.state.admin.handle.trim().length?\"btnPurpleDisable\":\"BtnPurple\"}\n                          // className=\"BtnPurple\"\n                          disabled={!this.state.admin.handle.trim().length ? true : this.state.loading}\n                        >\n                          {this.state.loading ? (\n                            <>\n                              <i className=\"fa fa-spinner fa-spin mr5\" />\n                              &nbsp;\n                            </>\n                          ) : null}\n                          Login\n                        </Button>\n                      </Form>\n                    </CardBody>\n                  </Card>\n                </CardGroup>\n              </div>\n            </Col>\n          </Row>\n\n          <div className=\"login-footer\">\n            <div className=\"d-flex justify-content-start flex-column flex-sm-row\">\n              <span>&copy; SocialAffil 2020</span>\n            </div>\n\n            <span className=\"powered-by\">\n              Powered by{\" \"}\n              <a\n                href=\"https://www.logic-square.com/\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                Logic Square\n              </a>\n            </span>\n          </div>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}