{"ast":null,"code":"import _regeneratorRuntime from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/src/pages/creator-requests.js\";\nimport moment from \"moment\";\nimport React, { Component } from \"react\";\nimport { ToastsStore } from \"react-toasts\";\nimport { Button, Col, Container, Input, Row } from \"reactstrap\";\nimport CustomPrompt from \"../components/custom-prompt\";\nimport CustomTable from \"../components/custom-table\";\nimport CustomDateRangePicker from \"../components/date-range-picker\";\nimport SendInviteModal from \"../components/send-invite-modal\";\nimport CopyclipBoard from \"../components/copy-clipboard\";\nimport config from \"../config\";\nimport { getInvitationRequests, sendMessage, acceptOrRejectInvitationRequest } from \"../http/http-calls\";\nimport { deepClone, sleepTime, showToast } from \"../helper-methods\";\nimport { parsePhoneNumberFromString } from \"libphonenumber-js\";\n\nvar CreatorRequests = /*#__PURE__*/function (_Component) {\n  _inherits(CreatorRequests, _Component);\n\n  var _super = _createSuper(CreatorRequests);\n\n  function CreatorRequests() {\n    var _this;\n\n    _classCallCheck(this, CreatorRequests);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      isPrompt: false,\n      promptMessage: \"\",\n      promptType: \"\",\n      selectedCreator: null,\n      sendInvitationModal: {\n        isOpen: false\n      },\n      invitationList: [],\n      invitationListBackup: [],\n      headerKeys: [{\n        id: \"id\",\n        label: \"id\"\n      }, {\n        id: \"name\",\n        label: \"Name\"\n      }, {\n        id: \"email\",\n        label: \"Email\"\n      }, {\n        id: \"phone\",\n        label: \"Phone\"\n      }, {\n        id: \"description\",\n        label: \"Why\"\n      }, {\n        id: \"social\",\n        label: \"Social\"\n      }, {\n        id: \"status\",\n        label: \"Status\"\n      }, {\n        id: \"actions\",\n        label: \"Actions\",\n        noSort: true\n      }],\n      invitationsStatusColor: config.invitationsStatusColor,\n      filters: {\n        dateRange: {\n          startDate: null,\n          endDate: null,\n          focusedInput: null,\n          startDateId: \"startDate\",\n          endDateId: \"endDate\"\n        },\n        sentBy: \"\",\n        status: \"\",\n        search: \"\"\n      },\n      loading: {\n        loadingData: false,\n        sendingMessage: false\n      },\n      sentByList: [],\n      contact: {\n        via: \"email\",\n        message: \"\"\n      },\n      selectedInvitations: []\n    };\n\n    _this._onDatesChange = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(startDate, endDate) {\n        var filters;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                filters = _this.state.filters; // await sleepTime(200);\n\n                filters.dateRange.startDate = startDate;\n                filters.dateRange.endDate = endDate;\n\n                _this.setState({\n                  filters: filters\n                }, function () {\n                  if (filters.dateRange.startDate && filters.dateRange.endDate) {\n                    _this._filterInvitationList();\n                  }\n                });\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this._onFocusChange = function (input) {\n      var _deepClone = deepClone(_this.state),\n          filters = _deepClone.filters;\n\n      filters.dateRange.focusedInput = input;\n\n      _this.setState({\n        filters: filters\n      });\n    };\n\n    _this._toggleSendInviteModal = function () {\n      var _JSON$parse = JSON.parse(JSON.stringify(_this.state)),\n          sendInvitationModal = _JSON$parse.sendInvitationModal;\n\n      sendInvitationModal.isOpen = !sendInvitationModal.isOpen;\n\n      _this.setState({\n        sendInvitationModal: sendInvitationModal\n      });\n    };\n\n    _this._manageLoading = function (key, value) {\n      var _this$state$loading = _this.state.loading,\n          loadingData = _this$state$loading.loadingData,\n          sendingMessage = _this$state$loading.sendingMessage;\n\n      if (key === \"data\") {\n        loadingData = value;\n      } else if (key === \"send-message\") {\n        sendingMessage = value;\n      }\n\n      _this.setState({\n        loading: {\n          loadingData: loadingData,\n          sendingMessage: sendingMessage\n        }\n      });\n    };\n\n    _this._acceptRequest = function (creator) {\n      _this.setState({\n        promptMessage: \"Do you want to accept the request of \" + creator.name + \" ?\",\n        isPrompt: true,\n        promptType: \"accepted\",\n        selectedCreator: creator\n      });\n    };\n\n    _this._rejectRequest = function (creator) {\n      _this.setState({\n        promptMessage: \"Do you want to reject the request of \" + creator.name + \" ?\",\n        isPrompt: true,\n        promptType: \"rejected\",\n        selectedCreator: creator\n      });\n    };\n\n    _this._openSocialLink = function () {\n      var link = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var socialName = arguments.length > 1 ? arguments[1] : undefined;\n\n      if (link && link.length) {\n        if (socialName === 'tiktok') {\n          var splittedLinks = link.split('/');\n\n          if (splittedLinks[splittedLinks.length - 1].charAt(0) !== '@') {\n            splittedLinks[splittedLinks.length - 1] = '@' + splittedLinks[splittedLinks.length - 1];\n            link = splittedLinks.join('/');\n          }\n\n          console.log(\"_openSocialLink -> splittedLinks\", splittedLinks);\n        }\n\n        if (link.indexOf(\"http\") > -1 || link.indexOf(\"https\") > -1) {\n          window.open(link, \"_blank\");\n        } else {\n          link = \"https://\" + link;\n          window.open(link, \"_blank\");\n        }\n      } else {\n        showToast(\"No valid link present\", \"error\");\n      }\n    };\n\n    _this._dataFormat = function (cell, row, header) {\n      if (header === \"social\") {\n        return /*#__PURE__*/React.createElement(\"span\", {\n          style: {\n            display: \"flex\",\n            flexWrap: \"wrap\"\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 9\n          }\n        }, cell.map(function (each, index) {\n          return /*#__PURE__*/React.createElement(\"button\", {\n            key: index,\n            className: \"btn btn-link\",\n            title: each.accountUrl,\n            onClick: function onClick() {\n              return _this._openSocialLink(each.accountUrl, each.name);\n            },\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 13\n            }\n          }, each.hasOwnProperty(\"name\") ? each.name !== \"tiktok\" ? /*#__PURE__*/React.createElement(\"i\", {\n            className: \"fa fa-\" + each.name,\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 19\n            }\n          }) : each.name === \"tiktok\" ? /*#__PURE__*/React.createElement(\"img\", {\n            style: {\n              height: \"20px\"\n            },\n            src: \"/assets/img/tiktok-icon.png\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 19\n            }\n          }) : null : null);\n        }));\n      } else if (header === \"email\") {\n        return /*#__PURE__*/React.createElement(CopyclipBoard, {\n          copiedValue: row.email,\n          border: \"none\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 9\n          }\n        });\n      } else if (header === \"phone\") {\n        return row.phone !== '-' ? /*#__PURE__*/React.createElement(CopyclipBoard, {\n          copiedValue: parsePhoneNumberFromString(row.phone).formatInternational(),\n          border: \"none\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 9\n          }\n        }) : '-';\n      } else if (header === \"actions\") {\n        return row.status === \"pending\" ? /*#__PURE__*/React.createElement(\"div\", {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this._acceptRequest(row);\n          },\n          className: \"btn btn-success py-1 mr-2\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 11\n          }\n        }, \"Accept\"), /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this._rejectRequest(row);\n          },\n          className: \"btn btn-danger py-1\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 11\n          }\n        }, \"Reject\")) : /*#__PURE__*/React.createElement(\"span\", {\n          style: {\n            textDecoration: \"none\"\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 11\n          }\n        }, \"N/A\");\n      } else if (header === \"description\") {\n        return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n          className: \"btn btn-light py-1\",\n          title: cell,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 11\n          }\n        }, \"Details\"));\n      } else if (header === \"status\") {\n        return /*#__PURE__*/React.createElement(\"span\", {\n          style: {\n            textTransform: \"capitalize\",\n            textDecoration: \"none\"\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 9\n          }\n        }, row.status);\n      } else {\n        return cell;\n      }\n    };\n\n    _this._getAllInvitations = function () {\n      _this._manageLoading(\"data\", true);\n\n      getInvitationRequests().then(function (response) {\n        _this._manageLoading(\"data\", false);\n\n        var invitationList = response.invitationRequests.map(function (each) {\n          return {\n            name: each.name && each.name.full && each.name.full.length ? each.name.full : \"N/A\",\n            id: each._id,\n            email: each.email,\n            phone: each.phone || \"-\",\n            description: each.description && each.description.length ? each.description : \"\",\n            date: each.time,\n            status: each.status,\n            social: each.social\n          };\n        });\n        invitationList = invitationList.sort(function (item1, item2) {\n          return new Date(item2.date) - new Date(item1.date);\n        }); // let sentByList = invitationList\n        //   .map(item => item.invitedBy)\n        //   .filter((value, index, self) => self.indexOf(value) === index);\n\n        _this.setState({\n          invitationList: invitationList,\n          invitationListBackup: invitationList\n        });\n      }, function (error) {\n        _this._manageLoading(\"data\", false); // ToastsStore.error(error.reason, 3000);\n\n\n        showToast(error.reason && error.reason.length ? error.reason : \"Server error. Try again after sometime.\", \"error\");\n      });\n    };\n\n    _this._filterOnChange = function (_ref2) {\n      var currentTarget = _ref2.currentTarget;\n      var filters = _this.state.filters;\n      filters[currentTarget.name] = currentTarget.value;\n\n      _this.setState({\n        filters: filters\n      }, function () {\n        if (currentTarget.name !== \"search\") {\n          _this._filterInvitationList();\n        }\n      });\n    };\n\n    _this._filterInvitationList = function () {\n      var filterConditions = [];\n\n      var _deepClone2 = deepClone(_this.state),\n          filters = _deepClone2.filters,\n          invitationListBackup = _deepClone2.invitationListBackup,\n          invitationList = _deepClone2.invitationList;\n\n      Object.keys(filters).forEach(function (key) {\n        if (filters[key]) {\n          filterConditions.push(key);\n        }\n      });\n      invitationList = invitationListBackup;\n\n      if (filterConditions.length) {\n        if (filters.status && filters.status.length) {\n          invitationList = invitationList.filter(function (each) {\n            return each.status.toLowerCase() === filters.status.toLowerCase();\n          });\n        }\n\n        if (filters && filters.search && filters.search.trim().length) {\n          invitationList = invitationList.filter(function (each) {\n            return each.name.toLowerCase().includes(filters.search.toLowerCase()) || each.email.toLowerCase().includes(filters.search.toLowerCase()) || each.phone.toLowerCase().includes(filters.search.toLowerCase()) || each.description.toLowerCase().includes(filters.search.toLowerCase());\n          });\n        }\n\n        if (filters.dateRange.startDate && filters.dateRange.endDate) {\n          invitationList = invitationList.filter(function (each) {\n            return each.hasOwnProperty(\"date\") && moment(each.date).isBetween(moment(filters.dateRange.startDate).format(\"YYYY-MM-DD\"), moment(filters.dateRange.endDate).format(\"YYYY-MM-DD\"), null, \"[]\");\n          });\n        }\n\n        _this.setState({\n          invitationList: invitationList\n        });\n      } else {\n        _this.setState({\n          invitationList: invitationListBackup\n        });\n      }\n    };\n\n    _this._setSelectedRows = function (data) {\n      var selectedInvitations = _this.state.selectedInvitations;\n      selectedInvitations = data;\n\n      _this.setState({\n        selectedInvitations: selectedInvitations\n      });\n    };\n\n    _this._contactOnChange = function (_ref3) {\n      var currentTarget = _ref3.currentTarget;\n      var contact = _this.state.contact;\n      contact[currentTarget.name] = currentTarget.value;\n\n      _this.setState({\n        contact: contact\n      });\n    };\n\n    _this._sendMessage = function () {\n      var _this$state = _this.state,\n          contact = _this$state.contact,\n          selectedInvitations = _this$state.selectedInvitations;\n      var data = {\n        idlist: selectedInvitations,\n        text: contact.via === \"email\" ? contact.message : _this._extractContent(contact.message)\n      };\n\n      if (!data.idlist.length) {\n        ToastsStore.warning(\"Please select atleast one creator\", 3000);\n        return;\n      }\n\n      if (!data.text.trim().length) {\n        ToastsStore.warning(\"Please write some message\", 3000);\n        return;\n      }\n\n      _this._manageLoading(\"send-message\", true);\n\n      sendMessage(contact.via, data).then(function (response) {\n        _this._setMessageContent(\"\", \"message\");\n\n        _this._manageLoading(\"send-message\", false);\n\n        ToastsStore.success(\"Message sent Successfully!\", 3000);\n      }, function (error) {\n        _this._manageLoading(\"send-message\", false); // ToastsStore.error(error.reason, 3000);\n\n\n        showToast(error.reason && error.reason.length ? error.reason : \"Server error. Try again after sometime.\", \"error\");\n      });\n    };\n\n    _this._onPromptSuccess = function (type) {\n      var selectedCreator = _this.state.selectedCreator;\n\n      _this.setState({\n        isPrompt: false\n      }, function () {\n        _this._manageLoading(\"Loading\", true);\n\n        _this._actionTakenForInvitationRequest(selectedCreator.id, type);\n      });\n    };\n\n    _this._onPromptDismiss = function () {\n      _this.setState({\n        isPrompt: false\n      });\n    };\n\n    _this._actionTakenForInvitationRequest = function (id, status) {\n      acceptOrRejectInvitationRequest(id, {\n        status: status\n      }).then(function (res) {\n        ToastsStore.success(\"Updated successfully!\", 3000);\n\n        _this._getAllInvitations();\n      }).catch(function (error) {\n        _this._manageLoading(\"send-message\", false); // ToastsStore.error(error.reason, 3000);\n\n\n        showToast(error.reason && error.reason.length ? error.reason : \"Server error. Try again after sometime.\", \"error\");\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(CreatorRequests, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._getAllInvitations();\n    }\n  }, {\n    key: \"_extractContent\",\n    value: function _extractContent(s) {\n      var span = document.createElement(\"span\");\n      span.innerHTML = s;\n      return span.textContent || span.innerText;\n    }\n  }, {\n    key: \"_setMessageContent\",\n    value: function _setMessageContent(value, key) {\n      var contact = this.state.contact;\n      contact[key] = value;\n      this.setState({\n        contact: contact\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          filters = _this$state2.filters,\n          loading = _this$state2.loading,\n          sentByList = _this$state2.sentByList,\n          contact = _this$state2.contact,\n          invitationRequests = _this$state2.invitationRequests,\n          isPrompt = _this$state2.isPrompt,\n          promptMessage = _this$state2.promptMessage,\n          promptType = _this$state2.promptType;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"app TruFansPgBg animated fadeIn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(CustomPrompt, {\n        isVisible: isPrompt,\n        message: promptMessage,\n        successButtonText: \"Yes\",\n        closeButtonText: \"No\",\n        onSuccess: function onSuccess() {\n          return _this2._onPromptSuccess(promptType);\n        },\n        onDismiss: function onDismiss() {\n          return _this2._onPromptDismiss();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(Container, {\n        fluid: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        xs: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"PgTitle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-start align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 19\n        }\n      }, \"Creator Requests\"))), !loading.loadingData && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"filterWrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-filter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(Input, {\n        type: \"select\",\n        name: \"status\",\n        value: filters.status,\n        onChange: this._filterOnChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 514,\n          columnNumber: 25\n        }\n      }, \"Status\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"accepted\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 25\n        }\n      }, \"Accepted\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"expired\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 25\n        }\n      }, \"Expired\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"pending\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 25\n        }\n      }, \"Pending\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        type: \"text\",\n        id: \"search\",\n        name: \"search\",\n        placeholder: \"Search\",\n        className: \"ml-2\",\n        value: filters.search,\n        onChange: this._filterOnChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        color: \"secondary\",\n        className: \"ml-2\",\n        onClick: this._filterInvitationList,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"icon-magnifier\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 25\n        }\n      })))), /*#__PURE__*/React.createElement(CustomTable, {\n        tableData: this.state.invitationList,\n        headerKeys: this.state.headerKeys,\n        dataFormat: this._dataFormat,\n        rowSelection: false,\n        setSelectedRows: function setSelectedRows(data) {\n          return _this2._setSelectedRows(data);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 19\n        }\n      })), loading.loadingData && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"filterWrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"loading-section list-loading\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-spinner fa-spin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 21\n        }\n      }), \" \\xA0 Loading Invitations..\")), /*#__PURE__*/React.createElement(SendInviteModal, {\n        isOpen: this.state.sendInvitationModal.isOpen,\n        toggle: function toggle() {\n          return _this2._toggleSendInviteModal();\n        },\n        reloadInvitationList: this._getAllInvitations,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 15\n        }\n      })))));\n    }\n  }]);\n\n  return CreatorRequests;\n}(Component);\n\nexport default CreatorRequests;","map":{"version":3,"sources":["/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/src/pages/creator-requests.js"],"names":["moment","React","Component","ToastsStore","Button","Col","Container","Input","Row","CustomPrompt","CustomTable","CustomDateRangePicker","SendInviteModal","CopyclipBoard","config","getInvitationRequests","sendMessage","acceptOrRejectInvitationRequest","deepClone","sleepTime","showToast","parsePhoneNumberFromString","CreatorRequests","state","isPrompt","promptMessage","promptType","selectedCreator","sendInvitationModal","isOpen","invitationList","invitationListBackup","headerKeys","id","label","noSort","invitationsStatusColor","filters","dateRange","startDate","endDate","focusedInput","startDateId","endDateId","sentBy","status","search","loading","loadingData","sendingMessage","sentByList","contact","via","message","selectedInvitations","_onDatesChange","setState","_filterInvitationList","_onFocusChange","input","_toggleSendInviteModal","JSON","parse","stringify","_manageLoading","key","value","_acceptRequest","creator","name","_rejectRequest","_openSocialLink","link","socialName","length","splittedLinks","split","charAt","join","console","log","indexOf","window","open","_dataFormat","cell","row","header","display","flexWrap","map","each","index","accountUrl","hasOwnProperty","height","email","phone","formatInternational","textDecoration","textTransform","_getAllInvitations","then","response","invitationRequests","full","_id","description","date","time","social","sort","item1","item2","Date","error","reason","_filterOnChange","currentTarget","filterConditions","Object","keys","forEach","push","filter","toLowerCase","trim","includes","isBetween","format","_setSelectedRows","data","_contactOnChange","_sendMessage","idlist","text","_extractContent","warning","_setMessageContent","success","_onPromptSuccess","type","_actionTakenForInvitationRequest","_onPromptDismiss","res","catch","s","span","document","createElement","innerHTML","textContent","innerText"],"mappings":"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","sourcesContent":["import moment from \"moment\";\nimport React, { Component } from \"react\";\nimport { ToastsStore } from \"react-toasts\";\nimport { Button, Col, Container, Input, Row } from \"reactstrap\";\nimport CustomPrompt from \"../components/custom-prompt\";\nimport CustomTable from \"../components/custom-table\";\nimport CustomDateRangePicker from \"../components/date-range-picker\";\nimport SendInviteModal from \"../components/send-invite-modal\";\nimport CopyclipBoard from \"../components/copy-clipboard\";\nimport config from \"../config\";\nimport {\n  getInvitationRequests,\n  sendMessage,\n  acceptOrRejectInvitationRequest\n} from \"../http/http-calls\";\nimport { deepClone, sleepTime, showToast } from \"../helper-methods\";\nimport { parsePhoneNumberFromString } from \"libphonenumber-js\";\n\n\nclass CreatorRequests extends Component {\n  state = {\n    isPrompt: false,\n    promptMessage: \"\",\n    promptType: \"\",\n    selectedCreator: null,\n    sendInvitationModal: {\n      isOpen: false\n    },\n    invitationList: [],\n    invitationListBackup: [],\n    headerKeys: [\n      { id: \"id\", label: \"id\" },\n      { id: \"name\", label: \"Name\" },\n      { id: \"email\", label: \"Email\" },\n      { id: \"phone\", label: \"Phone\" },\n      { id: \"description\", label: \"Why\" },\n      { id: \"social\", label: \"Social\" },\n      { id: \"status\", label: \"Status\" },\n      { id: \"actions\", label: \"Actions\", noSort: true }\n    ],\n    invitationsStatusColor: config.invitationsStatusColor,\n    filters: {\n      dateRange: {\n        startDate: null,\n        endDate: null,\n        focusedInput: null,\n        startDateId: \"startDate\",\n        endDateId: \"endDate\"\n      },\n      sentBy: \"\",\n      status: \"\",\n      search: \"\"\n    },\n    loading: {\n      loadingData: false,\n      sendingMessage: false\n    },\n    sentByList: [],\n    contact: {\n      via: \"email\",\n      message: \"\"\n    },\n    selectedInvitations: []\n  };\n\n  componentDidMount() {\n    this._getAllInvitations();\n  }\n\n  _onDatesChange = async (startDate, endDate) => {\n    let { filters } = this.state;\n    // await sleepTime(200);\n    filters.dateRange.startDate = startDate;\n    filters.dateRange.endDate = endDate;\n\n    this.setState({ filters }, () => {\n      if (filters.dateRange.startDate && filters.dateRange.endDate) {\n        this._filterInvitationList();\n      }\n    });\n  };\n\n  _onFocusChange = input => {\n    let { filters } = deepClone(this.state);\n    filters.dateRange.focusedInput = input;\n    this.setState({ filters });\n  };\n\n  _toggleSendInviteModal = () => {\n    let { sendInvitationModal } = JSON.parse(JSON.stringify(this.state));\n    sendInvitationModal.isOpen = !sendInvitationModal.isOpen;\n    this.setState({\n      sendInvitationModal\n    });\n  };\n\n  _manageLoading = (key, value) => {\n    let { loadingData, sendingMessage } = this.state.loading;\n    if (key === \"data\") {\n      loadingData = value;\n    } else if (key === \"send-message\") {\n      sendingMessage = value;\n    }\n    this.setState({ loading: { loadingData, sendingMessage } });\n  };\n\n  _acceptRequest = creator => {\n    this.setState({\n      promptMessage:\n        \"Do you want to accept the request of \" + creator.name + \" ?\",\n      isPrompt: true,\n      promptType: \"accepted\",\n      selectedCreator: creator\n    });\n  };\n\n  _rejectRequest = creator => {\n    this.setState({\n      promptMessage:\n        \"Do you want to reject the request of \" + creator.name + \" ?\",\n      isPrompt: true,\n      promptType: \"rejected\",\n      selectedCreator: creator\n    });\n  };\n\n  _openSocialLink = (link = null, socialName) => {\n    if (link && link.length) {\n      if (socialName === 'tiktok') {\n        let splittedLinks = link.split('/');\n        if (splittedLinks[splittedLinks.length - 1].charAt(0) !== '@') {\n          splittedLinks[splittedLinks.length - 1] = '@' + splittedLinks[splittedLinks.length - 1];\n          link = splittedLinks.join('/');\n        }\n        console.log(\"_openSocialLink -> splittedLinks\", splittedLinks)\n      }\n      if (link.indexOf(\"http\") > -1 || link.indexOf(\"https\") > -1) {\n        window.open(link, \"_blank\");\n      } else {\n        link = \"https://\" + link;\n        window.open(link, \"_blank\");\n      }\n    } else {\n      showToast(\"No valid link present\", \"error\");\n    }\n  };\n\n  _dataFormat = (cell, row, header) => {\n    if (header === \"social\") {\n      return (\n        <span style={{ display: \"flex\", flexWrap: \"wrap\" }}>\n          {cell.map((each, index) => (\n            <button\n              key={index}\n              className=\"btn btn-link\"\n              title={each.accountUrl}\n              onClick={() => this._openSocialLink(each.accountUrl, each.name)}\n            >\n              {each.hasOwnProperty(\"name\") ? (\n                each.name !== \"tiktok\" ? (\n                  <i className={\"fa fa-\" + each.name}></i>\n                ) : each.name === \"tiktok\" ? (\n                  <img\n                    style={{ height: \"20px\" }}\n                    src=\"/assets/img/tiktok-icon.png\"\n                  />\n                ) : null\n              ) : null}\n            </button>\n          ))}\n        </span>\n      );\n    } else if (header === \"email\") {\n      return (\n        <CopyclipBoard\n          copiedValue={row.email}\n          border=\"none\">\n        </CopyclipBoard>\n      )\n    } else if (header === \"phone\") {\n      return row.phone !== '-' ? (\n        <CopyclipBoard\n          copiedValue={parsePhoneNumberFromString(\n            row.phone\n          ).formatInternational()}\n          border=\"none\">\n        </CopyclipBoard>\n      ) : '-'\n    } else if (header === \"actions\") {\n      return row.status === \"pending\" ? (\n        <div>\n          <button\n            onClick={() => this._acceptRequest(row)}\n            className=\"btn btn-success py-1 mr-2\"\n          >\n            Accept\n          </button>\n          <button\n            onClick={() => this._rejectRequest(row)}\n            className=\"btn btn-danger py-1\"\n          >\n            Reject\n          </button>\n        </div>\n      ) : (\n          <span style={{ textDecoration: \"none\" }}>N/A</span>\n        );\n    } else if (header === \"description\") {\n      return (\n        <>\n          <button className=\"btn btn-light py-1\" title={cell}>\n            Details\n          </button>\n        </>\n      );\n    } else if (header === \"status\") {\n      return (\n        <span style={{ textTransform: \"capitalize\", textDecoration: \"none\" }}>\n          {row.status}\n        </span>\n      );\n    } else {\n      return cell;\n    }\n  };\n\n  _getAllInvitations = () => {\n    this._manageLoading(\"data\", true);\n    getInvitationRequests().then(\n      response => {\n        this._manageLoading(\"data\", false);\n\n        let invitationList = response.invitationRequests.map(each => {\n          return {\n            name:\n              each.name && each.name.full && each.name.full.length\n                ? each.name.full\n                : \"N/A\",\n\n            id: each._id,\n            email: each.email,\n            phone: each.phone || \"-\",\n            description:\n              each.description && each.description.length\n                ? each.description\n                : \"\",\n            date: each.time,\n            status: each.status,\n            social: each.social\n          };\n        });\n        invitationList = invitationList.sort((item1, item2) => {\n          return new Date(item2.date) - new Date(item1.date);\n        })\n        // let sentByList = invitationList\n        //   .map(item => item.invitedBy)\n        //   .filter((value, index, self) => self.indexOf(value) === index);\n        this.setState({\n          invitationList: invitationList,\n          invitationListBackup: invitationList\n        });\n      },\n      error => {\n        this._manageLoading(\"data\", false);\n        // ToastsStore.error(error.reason, 3000);\n        showToast(\n          error.reason && error.reason.length\n            ? error.reason\n            : \"Server error. Try again after sometime.\",\n          \"error\"\n        );\n      }\n    );\n  };\n\n  _filterOnChange = ({ currentTarget }) => {\n    let { filters } = this.state;\n    filters[currentTarget.name] = currentTarget.value;\n    this.setState({ filters }, () => {\n      if (currentTarget.name !== \"search\") {\n        this._filterInvitationList();\n      }\n    });\n  };\n\n  _filterInvitationList = () => {\n    let filterConditions = [];\n    let { filters, invitationListBackup, invitationList } = deepClone(\n      this.state\n    );\n    Object.keys(filters).forEach(key => {\n      if (filters[key]) {\n        filterConditions.push(key);\n      }\n    });\n    invitationList = invitationListBackup;\n    if (filterConditions.length) {\n      if (filters.status && filters.status.length) {\n        invitationList = invitationList.filter(each => {\n          return each.status.toLowerCase() === filters.status.toLowerCase();\n        });\n      }\n      if (filters && filters.search && filters.search.trim().length) {\n        invitationList = invitationList.filter(each => {\n          return (\n            each.name.toLowerCase().includes(filters.search.toLowerCase()) ||\n            each.email.toLowerCase().includes(filters.search.toLowerCase()) ||\n            each.phone.toLowerCase().includes(filters.search.toLowerCase()) ||\n            each.description\n              .toLowerCase()\n              .includes(filters.search.toLowerCase())\n          );\n        });\n      }\n\n      if (filters.dateRange.startDate && filters.dateRange.endDate) {\n        invitationList = invitationList.filter(each => {\n          return (\n            each.hasOwnProperty(\"date\") &&\n            moment(each.date).isBetween(\n              moment(filters.dateRange.startDate).format(\"YYYY-MM-DD\"),\n              moment(filters.dateRange.endDate).format(\"YYYY-MM-DD\"),\n              null,\n              \"[]\"\n            )\n          );\n        });\n      }\n      this.setState({ invitationList });\n    } else {\n      this.setState({ invitationList: invitationListBackup });\n    }\n  };\n\n  _setSelectedRows = data => {\n    let { selectedInvitations } = this.state;\n    selectedInvitations = data;\n    this.setState({ selectedInvitations });\n  };\n\n  _contactOnChange = ({ currentTarget }) => {\n    let { contact } = this.state;\n    contact[currentTarget.name] = currentTarget.value;\n    this.setState({ contact });\n  };\n\n  _extractContent(s) {\n    var span = document.createElement(\"span\");\n    span.innerHTML = s;\n    return span.textContent || span.innerText;\n  }\n\n  _setMessageContent(value, key) {\n    let { contact } = this.state;\n    contact[key] = value;\n    this.setState({ contact });\n  }\n\n  _sendMessage = () => {\n    let { contact, selectedInvitations } = this.state;\n    let data = {\n      idlist: selectedInvitations,\n      text:\n        contact.via === \"email\"\n          ? contact.message\n          : this._extractContent(contact.message)\n    };\n    if (!data.idlist.length) {\n      ToastsStore.warning(\"Please select atleast one creator\", 3000);\n      return;\n    }\n    if (!data.text.trim().length) {\n      ToastsStore.warning(\"Please write some message\", 3000);\n      return;\n    }\n    this._manageLoading(\"send-message\", true);\n    sendMessage(contact.via, data).then(\n      response => {\n        this._setMessageContent(\"\", \"message\");\n        this._manageLoading(\"send-message\", false);\n        ToastsStore.success(\"Message sent Successfully!\", 3000);\n      },\n      error => {\n        this._manageLoading(\"send-message\", false);\n        // ToastsStore.error(error.reason, 3000);\n        showToast(\n          error.reason && error.reason.length\n            ? error.reason\n            : \"Server error. Try again after sometime.\",\n          \"error\"\n        );\n      }\n    );\n  };\n\n  _onPromptSuccess = type => {\n    const { selectedCreator } = this.state;\n    this.setState(\n      {\n        isPrompt: false\n      },\n      () => {\n        this._manageLoading(\"Loading\", true);\n        this._actionTakenForInvitationRequest(selectedCreator.id, type);\n      }\n    );\n  };\n\n  _onPromptDismiss = () => {\n    this.setState({\n      isPrompt: false\n    });\n  };\n\n  _actionTakenForInvitationRequest = (id, status) => {\n    acceptOrRejectInvitationRequest(id, { status: status })\n      .then(res => {\n        ToastsStore.success(\"Updated successfully!\", 3000);\n        this._getAllInvitations();\n      })\n      .catch(error => {\n        this._manageLoading(\"send-message\", false);\n        // ToastsStore.error(error.reason, 3000);\n        showToast(\n          error.reason && error.reason.length\n            ? error.reason\n            : \"Server error. Try again after sometime.\",\n          \"error\"\n        );\n      });\n  };\n\n  render() {\n    const {\n      filters,\n      loading,\n      sentByList,\n      contact,\n      invitationRequests,\n      isPrompt,\n      promptMessage,\n      promptType\n    } = this.state;\n    return (\n      <div className=\"app TruFansPgBg animated fadeIn\">\n        <CustomPrompt\n          isVisible={isPrompt}\n          message={promptMessage}\n          successButtonText={\"Yes\"}\n          closeButtonText={\"No\"}\n          onSuccess={() => this._onPromptSuccess(promptType)}\n          onDismiss={() => this._onPromptDismiss()}\n        />\n        <Container fluid>\n          <Row>\n            <Col xs=\"12\">\n              <div className=\"PgTitle\">\n                <div className=\"d-flex justify-content-start align-items-center\">\n                  {/* on clicking the below btn, it should take back the user to the previous page in history */}\n                  {/* <Button color=\"ghost-dark\" className=\"customBackBtn\">\n                    <i className=\"fa fa-arrow-left\"></i>\n                  </Button> */}\n                  <h2>Creator Requests</h2>\n                </div>\n\n                {/* a modal open on clicking the below btn */}\n                {/* <Button\n                  className=\"BtnPurple\"\n                  onClick={() => this._toggleSendInviteModal()}\n                >\n                  <i className=\"fa fa-plus\"></i> Invite\n                </Button> */}\n              </div>\n              {/* filters */}\n              {!loading.loadingData && (\n                <>\n                  <div className=\"filterWrap\">\n                    <div className=\"d-flex align-items-center\">\n                      <i className=\"fa fa-filter\"></i>\n                      {/* there will be a \"Date Range\" below in place of an input field */}\n                      {/* <Input\n                        type=\"text\"\n                        id=\"\"\n                        placeholder=\"Date Range\"\n                        className=\"ml-2\"\n                      /> */}\n                      {/* <div className=\"ml-2\">\n                        <CustomDateRangePicker\n                          dateRange={filters.dateRange}\n                          onDatesChange={this._onDatesChange}\n                          onFocusChange={this._onFocusChange}\n                        ></CustomDateRangePicker>\n                      </div> */}\n\n                      {/* <Input\n                        type=\"select\"\n                        name=\"sentBy\"\n                        value={filters.sentBy}\n                        onChange={this._filterOnChange}\n                      >\n                        <option value=\"\">Sent By</option>\n                        {sentByList.map(option => (\n                          <option key={option} value={option}>\n                            {option}\n                          </option>\n                        ))}\n                      </Input> */}\n                      <Input\n                        type=\"select\"\n                        name=\"status\"\n                        value={filters.status}\n                        onChange={this._filterOnChange}\n                      >\n                        <option value=\"\">Status</option>\n                        <option value=\"accepted\">Accepted</option>\n                        <option value=\"expired\">Expired</option>\n                        <option value=\"pending\">Pending</option>\n                      </Input>\n                    </div>\n\n                    <div className=\"d-flex align-items-center\">\n                      <Input\n                        type=\"text\"\n                        id=\"search\"\n                        name=\"search\"\n                        placeholder=\"Search\"\n                        className=\"ml-2\"\n                        value={filters.search}\n                        onChange={this._filterOnChange}\n                      />\n\n                      <Button\n                        color=\"secondary\"\n                        className=\"ml-2\"\n                        onClick={this._filterInvitationList}\n                      >\n                        <i className=\"icon-magnifier\"></i>\n                      </Button>\n                    </div>\n                  </div>\n                  <CustomTable\n                    tableData={this.state.invitationList}\n                    headerKeys={this.state.headerKeys}\n                    dataFormat={this._dataFormat}\n                    rowSelection={false}\n                    setSelectedRows={data => this._setSelectedRows(data)}\n                  ></CustomTable>\n                </>\n              )}\n              {loading.loadingData && (\n                <div className=\"filterWrap\">\n                  <div className=\"loading-section list-loading\">\n                    <i className=\"fa fa-spinner fa-spin\"></i> &nbsp; Loading\n                    Invitations..\n                  </div>\n                </div>\n              )}\n              {/* Modal for \"Invite Creator\" */}\n              <SendInviteModal\n                isOpen={this.state.sendInvitationModal.isOpen}\n                toggle={() => this._toggleSendInviteModal()}\n                reloadInvitationList={this._getAllInvitations}\n              ></SendInviteModal>\n            </Col>\n          </Row>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default CreatorRequests;\n"]},"metadata":{},"sourceType":"module"}