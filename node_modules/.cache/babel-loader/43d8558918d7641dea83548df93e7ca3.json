{"ast":null,"code":"import _classCallCheck from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/src/pages/Subscribers/subscriber-view.js\";\nimport React, { Component } from \"react\";\nimport { ToastsStore } from \"react-toasts\";\nimport { Button, Card, CardBody, CardHeader, Col, Container, Input, Label, ListGroup, ListGroupItem, Nav, NavItem, NavLink, Row, TabContent, TabPane } from \"reactstrap\";\nimport SubscriptionListModal from \"../../components/subscription-list-modal\";\nimport config from \"../../config/index\";\nimport { changeUserStatus, getSubscriberDetails, getSubscriberActivity } from \"../../http/http-calls\";\nimport SubscriberActivityList from \"../../components/subscriber-activity-list\";\nimport CopyclipBoard from \"../../components/copy-clipboard\";\nimport { capitalize, showToast } from \"../../helper-methods\";\nimport moment from \"moment\";\nimport { format } from \"date-fns\";\nimport CustomTable from \"../../components/custom-table\";\nimport { Link } from \"react-router-dom\";\nimport { parsePhoneNumberFromString } from \"libphonenumber-js\";\n\nvar SubscriberView = /*#__PURE__*/function (_Component) {\n  _inherits(SubscriberView, _Component);\n\n  var _super = _createSuper(SubscriberView);\n\n  function SubscriberView(props) {\n    var _this;\n\n    _classCallCheck(this, SubscriberView);\n\n    _this = _super.call(this, props);\n\n    _this.toggle = function (tabPane, tab) {\n      var newArray = _this.state.activeTab.slice();\n\n      newArray[tabPane] = tab;\n\n      _this.setState({\n        activeTab: newArray,\n        popoverOpen: !_this.state.popoverOpen\n      }, function () {\n        if (Number(tab) === 2) {\n          _this._updateChildActivites();\n        }\n      });\n    };\n\n    _this._onToggleSubscriptionModal = function (data) {\n      var _JSON$parse = JSON.parse(JSON.stringify(_this.state)),\n          subscriptionModal = _JSON$parse.subscriptionModal;\n\n      subscriptionModal.isOpen = !subscriptionModal.isOpen;\n\n      if (subscriptionModal.isOpen) {\n        data.subscriptions = data._subscriptions;\n      }\n\n      subscriptionModal.data = data;\n\n      _this.setState({\n        subscriptionModal: subscriptionModal\n      });\n    };\n\n    _this._goBack = function () {\n      // this.props.history.push(\"/subscribers\");\n      _this.props.history.goBack();\n    };\n\n    _this._manageLoading = function (key, value) {\n      var _this$state$loading = _this.state.loading,\n          loadingData = _this$state$loading.loadingData,\n          changeStatusLoading = _this$state$loading.changeStatusLoading;\n\n      if (key === \"data\") {\n        loadingData = value;\n      } else if (key === \"change-status\") {\n        changeStatusLoading = value;\n      }\n\n      _this.setState({\n        loading: {\n          loadingData: loadingData,\n          changeStatusLoading: changeStatusLoading\n        }\n      });\n    };\n\n    _this._getSubscriberDetails = function (id) {\n      _this._manageLoading(\"data\", true);\n\n      getSubscriberDetails(id).then(function (response) {\n        console.log(\"SubscriberView -> response\", response);\n\n        var filteredOngoingSubscriptions = response.fan._subscriptions.filter(function (item) {\n          return !item.isExpired;\n        });\n\n        var filteredExpiredSubscriptions = response.fan._subscriptions.filter(function (item) {\n          return item.isExpired;\n        });\n\n        var subscriptions = filteredOngoingSubscriptions.map(function (each) {\n          return {\n            id: each._id,\n            amount: each.amount ? each.amount : \"-\",\n            date: each.start,\n            creator: each._influencer && each._influencer.name ? each._influencer.name.full : \"NA\",\n            creatorId: each._influencer && each._influencer.id,\n            tierAndCycle: each.tier && each.billingCycle ? \"\".concat(capitalize(each.tier), \" | \").concat(each.billingCycle / 30, \" Month\") : \"NA\"\n          };\n        });\n        var expiredSubscriptions = filteredExpiredSubscriptions.map(function (each) {\n          return {\n            id: each._id,\n            amount: each.amount ? each.amount : \"-\",\n            date: each.start,\n            creator: each._influencer && each._influencer.name ? each._influencer.name.full : \"NA\",\n            creatorId: each._influencer && each._influencer.id,\n            tierAndCycle: each.tier && each.billingCycle ? \"\".concat(capitalize(each.tier), \" | \").concat(each.billingCycle / 30, \" Month\") : \"NA\"\n          };\n        });\n\n        _this._manageLoading(\"data\", false);\n\n        var subscriberDetails = _this.state.subscriberDetails;\n        response.fan.profilePicture = response.fan.profilePicture || config.defaultUserPicture;\n        response.fan.status = response.fan.isActive ? \"Active\" : \"Inactive\";\n        response.fan.amountSpent = response.fan._debit.reduce(function (acc, item) {\n          return acc = acc + item.amount;\n        }, 0).toFixed(2);\n        subscriberDetails = response.fan;\n\n        _this.setState({\n          subscriberDetails: subscriberDetails,\n          subscriptions: subscriptions,\n          expiredSubscriptions: expiredSubscriptions\n        });\n      }, function (error) {\n        console.log(error);\n\n        _this._manageLoading(\"data\", false);\n      });\n    };\n\n    _this._onStatusUpdate = function () {\n      var subscriberDetails = _this.state.subscriberDetails;\n      subscriberDetails.status = subscriberDetails.status === \"Active\" ? \"Inactive\" : \"Active\";\n\n      _this.setState({\n        subscriberDetails: subscriberDetails\n      });\n\n      _this._manageLoading(\"change-status\", true);\n\n      changeUserStatus(subscriberDetails.id).then(function (response) {\n        console.log(response);\n\n        _this._manageLoading(\"change-status\", false);\n\n        ToastsStore.success(\"Status changed Successfully!\", 3000);\n      }, function (error) {\n        console.log(error);\n\n        _this._manageLoading(\"change-status\", false); // ToastsStore.error(error.reason, 3000);\n\n\n        showToast(error.reason && error.reason.length ? error.reason : \"Server error. Try again after sometime.\", \"error\");\n      });\n    };\n\n    _this._dataFormat = function (cell, row, header) {\n      console.log(cell, row, header);\n\n      if (header === \"amount\") {\n        return typeof cell === \"number\" ? \"$\" + cell.toFixed(2) : \"-\";\n      } else if (header === \"date\") {\n        return /*#__PURE__*/React.createElement(React.Fragment, null, _this._formatDate(cell, \"MMM d, yyyy\"), /*#__PURE__*/React.createElement(\"br\", {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 11\n          }\n        }), _this._formatDate(cell, \"HH:mm\"));\n      } else if (header === \"creator\") {\n        return cell ? /*#__PURE__*/React.createElement(Link, {\n          to: \"/creator-view/\".concat(row.creatorId),\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 11\n          }\n        }, cell)) : \"-\";\n      } else {\n        return cell;\n      }\n    };\n\n    _this._gotoViewCreator = function (id) {\n      _this.props.history.push(\"/creator-view/\" + id);\n    };\n\n    _this.state = {\n      activeTab: new Array(2).fill(\"1\"),\n      subscriberDetails: null,\n      loading: {\n        loadingData: false,\n        changeStatusLoading: false\n      },\n      subscriptionModal: {\n        isOpen: false,\n        data: null\n      },\n      activities: [],\n      subscriptionsHeaderKeys: [{\n        id: \"id\",\n        label: \"id\"\n      }, {\n        id: \"amount\",\n        label: \"Amount\"\n      }, {\n        id: \"date\",\n        label: \"Date\"\n      }, {\n        id: \"creator\",\n        label: \"Creator\"\n      }, {\n        id: \"tierAndCycle\",\n        label: \"Tier & Cycle\"\n      }],\n      subscriptions: [],\n      expiredSubscriptions: []\n    };\n    return _this;\n  }\n\n  _createClass(SubscriberView, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._getSubscriberDetails(this.props.match.params.id);\n    }\n  }, {\n    key: \"_formatDate\",\n    value: function _formatDate(date, dateFormat) {\n      return format(new Date(date), dateFormat);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          subscriberDetails = _this$state.subscriberDetails,\n          loading = _this$state.loading,\n          subscriptions = _this$state.subscriptions,\n          expiredSubscriptions = _this$state.expiredSubscriptions;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"app TruFansPgBg animated fadeIn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Container, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 9\n        }\n      }, !loading.loadingData && /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }\n      }, subscriberDetails && /*#__PURE__*/React.createElement(Col, {\n        xs: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"PgTitle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-start align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"ghost-dark\",\n        className: \"customBackBtn\",\n        onClick: this._goBack,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-arrow-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 23\n        }\n      }, subscriberDetails.name.full)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mr-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        type: \"select\",\n        name: \"status\",\n        id: \"\",\n        style: {\n          minWidth: \"150px\"\n        },\n        value: subscriberDetails.status,\n        onChange: this._onStatusUpdate,\n        disabled: this.state.loading.changeStatusLoading,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Active\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 25\n        }\n      }, \"Active\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Inactive\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 25\n        }\n      }, \"Inactive\"))))), subscriberDetails && /*#__PURE__*/React.createElement(Col, {\n        sm: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Nav, {\n        tabs: true,\n        className: \"customTabs--Truefanz\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(NavItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        active: this.state.activeTab[0] === \"1\",\n        onClick: function onClick() {\n          _this2.toggle(0, \"1\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 23\n        }\n      }, \"Profile\")), /*#__PURE__*/React.createElement(NavItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        active: this.state.activeTab[0] === \"2\",\n        onClick: function onClick() {\n          _this2.toggle(0, \"2\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 23\n        }\n      }, \"Activity\"))), /*#__PURE__*/React.createElement(TabContent, {\n        activeTab: this.state.activeTab[0],\n        className: \"customTabContent--Truefanz\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(TabPane, {\n        tabId: \"1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        sm: \"7\",\n        md: \"5\",\n        lg: \"4\",\n        xl: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        className: \"ProfileCard\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(CardBody, {\n        className: \"align-items-center d-flex flex-column\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"profileImgWrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"profileImg\",\n        src: subscriberDetails.profilePicture,\n        alt: \"Profile Img\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 33\n        }\n      })), /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"mt-2 mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 31\n        }\n      }, subscriberDetails.name.full, \"\\xA0\", subscriberDetails.address && subscriberDetails.address.country ? /*#__PURE__*/React.createElement(\"img\", {\n        src: \"https://www.countryflags.io/\".concat(subscriberDetails.address.country, \"/flat/24.png\"),\n        alt: \"flag\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 35\n        }\n      }) : \"\"), /*#__PURE__*/React.createElement(ListGroup, {\n        className: \"profileInfo mt-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(ListGroupItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 35\n        }\n      }, \"Member Since:\", /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 37\n        }\n      }, subscriberDetails.createdAt && moment(subscriberDetails.createdAt).format(\"YYYY-MM-DD\") || \"N/A\"))), /*#__PURE__*/React.createElement(ListGroupItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 35\n        }\n      }, \"Active Subscriptions:\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 37\n        }\n      }, subscriptions && subscriptions.length ? subscriptions.length : 0))), /*#__PURE__*/React.createElement(ListGroupItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 35\n        }\n      }, \"Expired Subscriptions:\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 37\n        }\n      }, expiredSubscriptions && expiredSubscriptions.length ? expiredSubscriptions.length : 0))), /*#__PURE__*/React.createElement(ListGroupItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 35\n        }\n      }, \"Amount Spent:\", /*#__PURE__*/React.createElement(Link, {\n        to: {\n          pathname: \"/transactions\",\n          subscriberId: subscriberDetails._id\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 39\n        }\n      }, \"$\", subscriberDetails.amountSpent)))))))), /*#__PURE__*/React.createElement(Col, {\n        sm: \"11\",\n        md: \"7\",\n        lg: \"6\",\n        xl: \"5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        className: \"ProfileCard\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(ListGroup, {\n        className: \"profileInfo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(ListGroupItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-envelope\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 37\n        }\n      }), \"Email:\", /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(CopyclipBoard, {\n        copiedValue: subscriberDetails.email,\n        fontWeight: 600,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 39\n        }\n      })))), /*#__PURE__*/React.createElement(ListGroupItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-phone\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 37\n        }\n      }), \"Phone:\", /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 37\n        }\n      }, subscriberDetails.phone ? /*#__PURE__*/React.createElement(CopyclipBoard, {\n        copiedValue: parsePhoneNumberFromString(subscriberDetails.phone).formatInternational(),\n        fontWeight: 600,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 41\n        }\n      }) : \"N/A\"))), /*#__PURE__*/React.createElement(ListGroupItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-user-circle-o\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 37\n        }\n      }), \"Username:\", /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 37\n        }\n      }, subscriberDetails.username ? /*#__PURE__*/React.createElement(CopyclipBoard, {\n        copiedValue: subscriberDetails.username,\n        fontWeight: 600,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 41\n        }\n      }) : \"N/A\"))), /*#__PURE__*/React.createElement(ListGroupItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-user\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 37\n        }\n      }), \"Gender:\", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"capitalize\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 37\n        }\n      }, subscriberDetails.gender || \"N/A\"))))))), /*#__PURE__*/React.createElement(Col, {\n        sm: \"11\",\n        md: \"5\",\n        lg: \"4\",\n        xl: \"4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        className: \"ProfileCard\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"text-center mt-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 31\n        }\n      }, \"Address\"), subscriberDetails.address && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"addressWrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 35\n        }\n      }, subscriberDetails.address.street || \"N/A\"), /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 35\n        }\n      }, \"City:\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 35\n        }\n      }, subscriberDetails.address.city || \"N/A\"), /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 35\n        }\n      }, \"State:\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 35\n        }\n      }, subscriberDetails.address.state || \"N/A\"), /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 35\n        }\n      }, \"Zip:\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 35\n        }\n      }, subscriberDetails.address.zip || \"N/A\"), /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 35\n        }\n      }, \"Country:\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 35\n        }\n      }, subscriberDetails.address.country || \"N/A\")), !subscriberDetails.address && /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 33\n        }\n      }, \"Address Not Provided\"))))), /*#__PURE__*/React.createElement(Row, {\n        className: \"mt-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        sm: \"12\",\n        xl: \"6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        className: \"ProfileCard\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \" mt-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 31\n        }\n      }, \"Date Started\"), /*#__PURE__*/React.createElement(CustomTable, {\n        tableData: subscriptions,\n        headerKeys: this.state.subscriptionsHeaderKeys,\n        dataFormat: this._dataFormat,\n        rowSelection: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 31\n        }\n      })))), /*#__PURE__*/React.createElement(Col, {\n        sm: \"12\",\n        xl: \"6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        className: \"ProfileCard\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"mt-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 31\n        }\n      }, \"Date Ended\"), /*#__PURE__*/React.createElement(CustomTable, {\n        tableData: expiredSubscriptions,\n        headerKeys: this.state.subscriptionsHeaderKeys,\n        dataFormat: this._dataFormat,\n        rowSelection: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 31\n        }\n      })))))), /*#__PURE__*/React.createElement(TabPane, {\n        tabId: \"2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        className: \"mb-4 justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        sm: 12,\n        md: 10,\n        lg: 8,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(SubscriberActivityList, Object.assign({\n        user: subscriberDetails,\n        updateRef: function updateRef(ref) {\n          return _this2._updateChildActivites = ref;\n        }\n      }, this.props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 555,\n          columnNumber: 27\n        }\n      })))))))), loading.loadingData && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"filterWrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"loading-section list-loading\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-spinner fa-spin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 17\n        }\n      }), \" \\xA0 Loading Subscriber Details..\")), /*#__PURE__*/React.createElement(SubscriptionListModal, {\n        isOpen: this.state.subscriptionModal.isOpen,\n        data: this.state.subscriptionModal.data,\n        toggle: function toggle() {\n          return _this2._onToggleSubscriptionModal();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return SubscriberView;\n}(Component);\n\nexport default SubscriberView;","map":{"version":3,"sources":["/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/src/pages/Subscribers/subscriber-view.js"],"names":["React","Component","ToastsStore","Button","Card","CardBody","CardHeader","Col","Container","Input","Label","ListGroup","ListGroupItem","Nav","NavItem","NavLink","Row","TabContent","TabPane","SubscriptionListModal","config","changeUserStatus","getSubscriberDetails","getSubscriberActivity","SubscriberActivityList","CopyclipBoard","capitalize","showToast","moment","format","CustomTable","Link","parsePhoneNumberFromString","SubscriberView","props","toggle","tabPane","tab","newArray","state","activeTab","slice","setState","popoverOpen","Number","_updateChildActivites","_onToggleSubscriptionModal","data","JSON","parse","stringify","subscriptionModal","isOpen","subscriptions","_subscriptions","_goBack","history","goBack","_manageLoading","key","value","loading","loadingData","changeStatusLoading","_getSubscriberDetails","id","then","response","console","log","filteredOngoingSubscriptions","fan","filter","item","isExpired","filteredExpiredSubscriptions","map","each","_id","amount","date","start","creator","_influencer","name","full","creatorId","tierAndCycle","tier","billingCycle","expiredSubscriptions","subscriberDetails","profilePicture","defaultUserPicture","status","isActive","amountSpent","_debit","reduce","acc","toFixed","error","_onStatusUpdate","success","reason","length","_dataFormat","cell","row","header","_formatDate","_gotoViewCreator","push","Array","fill","activities","subscriptionsHeaderKeys","label","match","params","dateFormat","Date","minWidth","address","country","createdAt","pathname","subscriberId","email","phone","formatInternational","username","gender","street","city","zip","ref"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { ToastsStore } from \"react-toasts\";\nimport {\n  Button,\n  Card,\n  CardBody,\n  CardHeader,\n  Col,\n  Container,\n  Input,\n  Label,\n  ListGroup,\n  ListGroupItem,\n  Nav,\n  NavItem,\n  NavLink,\n  Row,\n  TabContent,\n  TabPane,\n} from \"reactstrap\";\nimport SubscriptionListModal from \"../../components/subscription-list-modal\";\nimport config from \"../../config/index\";\nimport {\n  changeUserStatus,\n  getSubscriberDetails,\n  getSubscriberActivity,\n} from \"../../http/http-calls\";\nimport SubscriberActivityList from \"../../components/subscriber-activity-list\";\nimport CopyclipBoard from \"../../components/copy-clipboard\";\nimport { capitalize, showToast } from \"../../helper-methods\";\nimport moment from \"moment\";\nimport { format } from \"date-fns\";\nimport CustomTable from \"../../components/custom-table\";\nimport { Link } from \"react-router-dom\";\n\nimport { parsePhoneNumberFromString } from \"libphonenumber-js\";\n\nclass SubscriberView extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      activeTab: new Array(2).fill(\"1\"),\n      subscriberDetails: null,\n      loading: {\n        loadingData: false,\n        changeStatusLoading: false,\n      },\n      subscriptionModal: {\n        isOpen: false,\n        data: null,\n      },\n      activities: [],\n      subscriptionsHeaderKeys: [\n        { id: \"id\", label: \"id\" },\n        { id: \"amount\", label: \"Amount\" },\n        { id: \"date\", label: \"Date\" },\n        { id: \"creator\", label: \"Creator\" },\n        { id: \"tierAndCycle\", label: \"Tier & Cycle\" },\n      ],\n      subscriptions: [],\n      expiredSubscriptions: [],\n    };\n  }\n\n  componentDidMount() {\n    this._getSubscriberDetails(this.props.match.params.id);\n  }\n\n  toggle = (tabPane, tab) => {\n    const newArray = this.state.activeTab.slice();\n    newArray[tabPane] = tab;\n    this.setState(\n      {\n        activeTab: newArray,\n        popoverOpen: !this.state.popoverOpen,\n      },\n      () => {\n        if (Number(tab) === 2) {\n          this._updateChildActivites();\n        }\n      }\n    );\n  };\n\n  _onToggleSubscriptionModal = (data) => {\n    let { subscriptionModal } = JSON.parse(JSON.stringify(this.state));\n    subscriptionModal.isOpen = !subscriptionModal.isOpen;\n    if (subscriptionModal.isOpen) {\n      data.subscriptions = data._subscriptions;\n    }\n    subscriptionModal.data = data;\n    this.setState({\n      subscriptionModal,\n    });\n  };\n\n  _goBack = () => {\n    // this.props.history.push(\"/subscribers\");\n    this.props.history.goBack();\n  };\n\n  _manageLoading = (key, value) => {\n    let { loadingData, changeStatusLoading } = this.state.loading;\n    if (key === \"data\") {\n      loadingData = value;\n    } else if (key === \"change-status\") {\n      changeStatusLoading = value;\n    }\n    this.setState({ loading: { loadingData, changeStatusLoading } });\n  };\n\n  _getSubscriberDetails = (id) => {\n    this._manageLoading(\"data\", true);\n    getSubscriberDetails(id).then(\n      (response) => {\n        console.log(\"SubscriberView -> response\", response);\n        let filteredOngoingSubscriptions = response.fan._subscriptions.filter(\n          (item) => {\n            return !item.isExpired;\n          }\n        );\n        let filteredExpiredSubscriptions = response.fan._subscriptions.filter(\n          (item) => {\n            return item.isExpired;\n          }\n        );\n        let subscriptions = filteredOngoingSubscriptions.map((each) => {\n          return {\n            id: each._id,\n            amount: each.amount ? each.amount : \"-\",\n            date: each.start,\n            creator:\n              each._influencer && each._influencer.name\n                ? each._influencer.name.full\n                : \"NA\",\n            creatorId: each._influencer && each._influencer.id,\n            tierAndCycle:\n              each.tier && each.billingCycle\n                ? `${capitalize(each.tier)} | ${each.billingCycle / 30} Month`\n                : \"NA\",\n          };\n        });\n\n        let expiredSubscriptions = filteredExpiredSubscriptions.map((each) => {\n          return {\n            id: each._id,\n            amount: each.amount ? each.amount : \"-\",\n            date: each.start,\n            creator:\n              each._influencer && each._influencer.name\n                ? each._influencer.name.full\n                : \"NA\",\n            creatorId: each._influencer && each._influencer.id,\n            tierAndCycle:\n              each.tier && each.billingCycle\n                ? `${capitalize(each.tier)} | ${each.billingCycle / 30} Month`\n                : \"NA\",\n          };\n        });\n        this._manageLoading(\"data\", false);\n        let { subscriberDetails } = this.state;\n        response.fan.profilePicture =\n          response.fan.profilePicture || config.defaultUserPicture;\n        response.fan.status = response.fan.isActive ? \"Active\" : \"Inactive\";\n        response.fan.amountSpent = response.fan._debit\n          .reduce((acc, item) => {\n            return (acc = acc + item.amount);\n          }, 0)\n          .toFixed(2);\n        subscriberDetails = response.fan;\n        this.setState({\n          subscriberDetails,\n          subscriptions,\n          expiredSubscriptions,\n        });\n      },\n      (error) => {\n        console.log(error);\n        this._manageLoading(\"data\", false);\n      }\n    );\n  };\n\n  _onStatusUpdate = () => {\n    let { subscriberDetails } = this.state;\n    subscriberDetails.status =\n      subscriberDetails.status === \"Active\" ? \"Inactive\" : \"Active\";\n    this.setState({\n      subscriberDetails,\n    });\n    this._manageLoading(\"change-status\", true);\n    changeUserStatus(subscriberDetails.id).then(\n      (response) => {\n        console.log(response);\n        this._manageLoading(\"change-status\", false);\n        ToastsStore.success(\"Status changed Successfully!\", 3000);\n      },\n      (error) => {\n        console.log(error);\n        this._manageLoading(\"change-status\", false);\n        // ToastsStore.error(error.reason, 3000);\n        showToast(\n          error.reason && error.reason.length\n            ? error.reason\n            : \"Server error. Try again after sometime.\",\n          \"error\"\n        );\n      }\n    );\n  };\n\n  _formatDate(date, dateFormat) {\n    return format(new Date(date), dateFormat);\n  }\n\n  _dataFormat = (cell, row, header) => {\n    console.log(cell, row, header);\n    if (header === \"amount\") {\n      return typeof cell === \"number\" ? \"$\" + cell.toFixed(2) : \"-\";\n    } else if (header === \"date\") {\n      return (\n        <>\n          {this._formatDate(cell, \"MMM d, yyyy\")}\n          <br />\n          {this._formatDate(cell, \"HH:mm\")}\n        </>\n      );\n    } else if (header === \"creator\") {\n      return cell ? (\n        <Link to={`/creator-view/${row.creatorId}`}>\n          <span>{cell}</span>\n        </Link>\n      ) : (\n        \"-\"\n      );\n    } else {\n      return cell;\n    }\n  };\n\n  _gotoViewCreator = (id) => {\n    this.props.history.push(\"/creator-view/\" + id);\n  };\n\n  render() {\n    let {\n      subscriberDetails,\n      loading,\n      subscriptions,\n      expiredSubscriptions,\n    } = this.state;\n    return (\n      <div className=\"app TruFansPgBg animated fadeIn\">\n        <Container>\n          {!loading.loadingData && (\n            <Row>\n              {subscriberDetails && (\n                <Col xs=\"12\">\n                  <div className=\"PgTitle\">\n                    <div className=\"d-flex justify-content-start align-items-center\">\n                      {/* on clicking the below btn, it should take back user to subscriber page */}\n                      <Button\n                        color=\"ghost-dark\"\n                        className=\"customBackBtn\"\n                        onClick={this._goBack}\n                      >\n                        <i className=\"fa fa-arrow-left\"></i>\n                      </Button>\n                      <h2>{subscriberDetails.name.full}</h2>\n                    </div>\n\n                    <div className=\"mr-2\">\n                      <Input\n                        type=\"select\"\n                        name=\"status\"\n                        id=\"\"\n                        style={{ minWidth: \"150px\" }}\n                        value={subscriberDetails.status}\n                        onChange={this._onStatusUpdate}\n                        disabled={this.state.loading.changeStatusLoading}\n                      >\n                        <option value=\"Active\">Active</option>\n                        <option value=\"Inactive\">Inactive</option>\n                      </Input>\n                    </div>\n                  </div>\n                </Col>\n              )}\n\n              {subscriberDetails && (\n                <Col sm=\"12\">\n                  <Nav tabs className=\"customTabs--Truefanz\">\n                    <NavItem>\n                      <NavLink\n                        active={this.state.activeTab[0] === \"1\"}\n                        onClick={() => {\n                          this.toggle(0, \"1\");\n                        }}\n                      >\n                        Profile\n                      </NavLink>\n                    </NavItem>\n                    <NavItem>\n                      <NavLink\n                        active={this.state.activeTab[0] === \"2\"}\n                        onClick={() => {\n                          this.toggle(0, \"2\");\n                        }}\n                      >\n                        Activity\n                      </NavLink>\n                    </NavItem>\n                  </Nav>\n\n                  <TabContent\n                    activeTab={this.state.activeTab[0]}\n                    className=\"customTabContent--Truefanz\"\n                  >\n                    <TabPane tabId=\"1\">\n                      <Row>\n                        <Col sm=\"7\" md=\"5\" lg=\"4\" xl=\"3\">\n                          <Card className=\"ProfileCard\">\n                            <CardHeader></CardHeader>\n                            <CardBody className=\"align-items-center d-flex flex-column\">\n                              <div className=\"profileImgWrap\">\n                                <img\n                                  className=\"profileImg\"\n                                  src={subscriberDetails.profilePicture}\n                                  alt=\"Profile Img\"\n                                />\n                              </div>\n\n                              <h4 className=\"mt-2 mb-2\">\n                                {subscriberDetails.name.full}\n                                &nbsp;\n                                {subscriberDetails.address &&\n                                subscriberDetails.address.country ? (\n                                  <img\n                                    src={`https://www.countryflags.io/${subscriberDetails.address.country}/flat/24.png`}\n                                    alt=\"flag\"\n                                  />\n                                ) : (\n                                  \"\"\n                                )}\n                              </h4>\n\n                              <ListGroup className=\"profileInfo mt-2\">\n                                <ListGroupItem>\n                                  <p>\n                                    Member Since:\n                                    <span>\n                                      {(subscriberDetails.createdAt &&\n                                        moment(\n                                          subscriberDetails.createdAt\n                                        ).format(\"YYYY-MM-DD\")) ||\n                                        \"N/A\"}\n                                    </span>\n                                  </p>\n                                </ListGroupItem>\n                                <ListGroupItem>\n                                  <p>\n                                    Active Subscriptions:{\" \"}\n                                    <span>\n                                      {subscriptions && subscriptions.length\n                                        ? subscriptions.length\n                                        : 0}\n                                    </span>\n                                  </p>\n                                </ListGroupItem>\n                                <ListGroupItem>\n                                  <p>\n                                    Expired Subscriptions:{\" \"}\n                                    <span>\n                                      {expiredSubscriptions &&\n                                      expiredSubscriptions.length\n                                        ? expiredSubscriptions.length\n                                        : 0}\n                                    </span>\n                                  </p>\n                                </ListGroupItem>\n                                <ListGroupItem>\n                                  <p>\n                                    Amount Spent:\n                                    <Link\n                                      to={{\n                                        pathname: \"/transactions\",\n                                        subscriberId: subscriberDetails._id,\n                                      }}\n                                    >\n                                      <span>\n                                        ${subscriberDetails.amountSpent}\n                                      </span>\n                                    </Link>\n                                  </p>\n                                </ListGroupItem>\n                              </ListGroup>\n                            </CardBody>\n                          </Card>\n                        </Col>\n                        <Col sm=\"11\" md=\"7\" lg=\"6\" xl=\"5\">\n                          <Card className=\"ProfileCard\">\n                            <CardBody>\n                              <ListGroup className=\"profileInfo\">\n                                <ListGroupItem>\n                                  <p>\n                                    <i className=\"fa fa-envelope\"></i>\n                                    Email:\n                                    <span>\n                                      <CopyclipBoard\n                                        copiedValue={subscriberDetails.email}\n                                        fontWeight={600}\n                                      ></CopyclipBoard>\n                                    </span>\n                                  </p>\n                                </ListGroupItem>\n                                <ListGroupItem>\n                                  <p>\n                                    <i className=\"fa fa-phone\"></i>\n                                    Phone:\n                                    <span>\n                                      {subscriberDetails.phone ? (\n                                        <CopyclipBoard\n                                          copiedValue={parsePhoneNumberFromString(\n                                            subscriberDetails.phone\n                                          ).formatInternational()}\n                                          fontWeight={600}\n                                        ></CopyclipBoard>\n                                      ) : (\n                                        \"N/A\"\n                                      )}\n                                    </span>\n                                  </p>\n                                </ListGroupItem>\n                                <ListGroupItem>\n                                  <p>\n                                    <i className=\"fa fa-user-circle-o\"></i>\n                                    Username:\n                                    <span>\n                                      {subscriberDetails.username ? (\n                                        <CopyclipBoard\n                                          copiedValue={\n                                            subscriberDetails.username\n                                          }\n                                          fontWeight={600}\n                                        ></CopyclipBoard>\n                                      ) : (\n                                        \"N/A\"\n                                      )}\n                                    </span>\n                                  </p>\n                                </ListGroupItem>\n                                {/* <ListGroupItem>\n                                  <p>\n                                    <i className=\"fa fa-birthday-cake\"></i>\n                                    Birthday:\n                                    <span>\n                                      {subscriberDetails.hasOwnProperty(\"dob\")\n                                        ? subscriberDetails.dob.year +\n                                          \"-\" +\n                                          subscriberDetails.dob.month +\n                                          \"-\" +\n                                          subscriberDetails.dob.day\n                                        : \"N/A\"}\n                                    </span>\n                                  </p>\n                                </ListGroupItem> */}\n                                <ListGroupItem>\n                                  <p>\n                                    <i className=\"fa fa-user\"></i>\n                                    Gender:\n                                    <span className=\"capitalize\">\n                                      {subscriberDetails.gender || \"N/A\"}\n                                    </span>\n                                  </p>\n                                </ListGroupItem>\n                              </ListGroup>\n                            </CardBody>\n                          </Card>\n                        </Col>\n\n                        <Col sm=\"11\" md=\"5\" lg=\"4\" xl=\"4\">\n                          <Card className=\"ProfileCard\">\n                            <CardBody>\n                              <h4 className=\"text-center mt-2\">Address</h4>\n\n                              {subscriberDetails.address && (\n                                <div className=\"addressWrap\">\n                                  <p>\n                                    {subscriberDetails.address.street || \"N/A\"}\n                                  </p>\n\n                                  <Label>City:</Label>\n                                  <p>\n                                    {subscriberDetails.address.city || \"N/A\"}\n                                  </p>\n\n                                  <Label>State:</Label>\n                                  <p>\n                                    {subscriberDetails.address.state || \"N/A\"}\n                                  </p>\n\n                                  <Label>Zip:</Label>\n                                  <p>\n                                    {subscriberDetails.address.zip || \"N/A\"}\n                                  </p>\n\n                                  <Label>Country:</Label>\n                                  <p>\n                                    {subscriberDetails.address.country || \"N/A\"}\n                                  </p>\n                                </div>\n                              )}\n                              {!subscriberDetails.address && (\n                                <div>Address Not Provided</div>\n                              )}\n                            </CardBody>\n                          </Card>\n                        </Col>\n                      </Row>\n\n                      <Row className=\"mt-2\">\n                        <Col sm=\"12\" xl=\"6\">\n                          <Card className=\"ProfileCard\">\n                            <CardBody>\n                              <h4 className=\" mt-2\">Date Started</h4>\n\n                              <CustomTable\n                                tableData={subscriptions}\n                                headerKeys={this.state.subscriptionsHeaderKeys}\n                                dataFormat={this._dataFormat}\n                                rowSelection={false}\n                              />\n                            </CardBody>\n                          </Card>\n                        </Col>\n                        <Col sm=\"12\" xl=\"6\">\n                          <Card className=\"ProfileCard\">\n                            <CardBody>\n                              <h4 className=\"mt-2\">Date Ended</h4>\n                              <CustomTable\n                                tableData={expiredSubscriptions}\n                                headerKeys={this.state.subscriptionsHeaderKeys}\n                                dataFormat={this._dataFormat}\n                                rowSelection={false}\n                              ></CustomTable>\n                            </CardBody>\n                          </Card>\n                        </Col>\n                      </Row>\n                    </TabPane>\n                    <TabPane tabId=\"2\">\n                      <Row className=\"mb-4 justify-content-center\">\n                        <Col sm={12} md={10} lg={8}>\n                          <SubscriberActivityList\n                            user={subscriberDetails}\n                            updateRef={(ref) =>\n                              (this._updateChildActivites = ref)\n                            }\n                            {...this.props}\n                          />\n                        </Col>\n                      </Row>\n                    </TabPane>\n                  </TabContent>\n                </Col>\n              )}\n            </Row>\n          )}\n          {loading.loadingData && (\n            <div className=\"filterWrap\">\n              <div className=\"loading-section list-loading\">\n                <i className=\"fa fa-spinner fa-spin\"></i> &nbsp; Loading\n                Subscriber Details..\n              </div>\n            </div>\n          )}\n          {/* Modal for \"Subscriptions\" */}\n          <SubscriptionListModal\n            isOpen={this.state.subscriptionModal.isOpen}\n            data={this.state.subscriptionModal.data}\n            toggle={() => this._onToggleSubscriptionModal()}\n          ></SubscriptionListModal>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default SubscriberView;\n"]},"metadata":{},"sourceType":"module"}