{"ast":null,"code":"import _regeneratorRuntime from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/src/pages/PayPerViewDetails.js\";\nimport React, { Component } from \"react\";\nimport { ToastsStore } from \"react-toasts\";\nimport { Button, Card, CardBody, CardHeader, Col, Container, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText, Label, ListGroup, ListGroupItem, Nav, NavItem, NavLink, Row, TabContent, TabPane } from \"reactstrap\";\nimport CreatorFeedList from \"../components/creator-feed-list\";\nimport ReferralsListModal from \"../components/referrals-list-modal\";\nimport SubscriberListModal from \"../components/subscriber-list-modal\";\nimport CopyclipBoard from \"../components/copy-clipboard\";\nimport config from \"../config/index\";\nimport { changeUserStatus, getCreatorDetails, updateInfluencerDetails, getPPVDetails } from \"../http/http-calls\";\nimport { deepClone, showToast } from \"../helper-methods\";\nimport { Link } from \"react-router-dom\";\nimport moment from \"moment\";\nimport ReadMoreAndLess from \"react-read-more-less\";\n\nvar PayPerViewDetails = /*#__PURE__*/function (_Component) {\n  _inherits(PayPerViewDetails, _Component);\n\n  var _super = _createSuper(PayPerViewDetails);\n\n  function PayPerViewDetails(props) {\n    var _this;\n\n    _classCallCheck(this, PayPerViewDetails);\n\n    _this = _super.call(this, props);\n\n    _this._getPPVDetails = function (id) {\n      _this._manageLoading(\"data\", true);\n\n      getPPVDetails(id).then(function (response) {\n        var payperview = response.payperview,\n            transactions = response.transactions;\n        console.log(\"response\", response);\n\n        _this.setState({\n          payperview: payperview,\n          transactions: transactions\n        }, function () {\n          _this._manageLoading(\"data\", false);\n        });\n      }, function (error) {\n        console.log(error);\n\n        _this._manageLoading(\"data\", false);\n      });\n    };\n\n    _this._onToggleReferralsModal = function (creator) {\n      var _JSON$parse = JSON.parse(JSON.stringify(_this.state)),\n          referralsModal = _JSON$parse.referralsModal;\n\n      referralsModal.isOpen = !referralsModal.isOpen;\n\n      if (referralsModal.isOpen) {\n        creator.referrals = creator._invitations;\n      }\n\n      referralsModal.data = creator;\n\n      _this.setState({\n        referralsModal: referralsModal\n      }, function () {\n        console.log(_this.state);\n      });\n    };\n\n    _this._onToggleSubscriberModal = function (creator) {\n      var _JSON$parse2 = JSON.parse(JSON.stringify(_this.state)),\n          subscriberModal = _JSON$parse2.subscriberModal;\n\n      subscriberModal.isOpen = !subscriberModal.isOpen;\n\n      if (subscriberModal.isOpen) {\n        creator.subscribers = creator._subscriptions;\n      }\n\n      subscriberModal.data = creator;\n\n      _this.setState({\n        subscriberModal: subscriberModal\n      }, function () {\n        console.log(_this.state);\n      });\n    };\n\n    _this._goBack = function () {\n      // this.props.history.push(\"/creators\");\n      _this.props.history.goBack();\n    };\n\n    _this._manageLoading = function (key, value) {\n      var _this$state$loading = _this.state.loading,\n          loadingData = _this$state$loading.loadingData,\n          changeStatusLoading = _this$state$loading.changeStatusLoading;\n\n      if (key === \"data\") {\n        loadingData = value;\n      } else if (key === \"change-status\") {\n        changeStatusLoading = value;\n      }\n\n      _this.setState({\n        loading: {\n          loadingData: loadingData,\n          changeStatusLoading: changeStatusLoading\n        }\n      });\n    };\n\n    _this._onStatusUpdate = function () {\n      var creatorDetails = _this.state.creatorDetails;\n      creatorDetails.status = creatorDetails.status === \"Active\" ? \"Inactive\" : \"Active\";\n\n      _this.setState({\n        creatorDetails: creatorDetails\n      });\n\n      _this._manageLoading(\"change-status\", true);\n\n      changeUserStatus(creatorDetails.id).then(function (response) {\n        console.log(response);\n\n        _this._manageLoading(\"change-status\", false);\n\n        ToastsStore.success(\"Status changed Successfully!\", 3000);\n      }, function (error) {\n        console.log(error);\n\n        _this._manageLoading(\"change-status\", false); // ToastsStore.error(error.reason, 3000);\n\n\n        showToast(error.reason && error.reason.length ? error.reason : \"Server error. Try again after sometime.\", \"error\");\n      });\n    };\n\n    _this._markAsDirty = function (fieldName) {\n      var _deepClone = deepClone(_this.state),\n          formFields = _deepClone.formFields;\n\n      formFields[fieldName].isDirty = true;\n      formFields[fieldName].isTyped = true;\n\n      _this.setState({\n        formFields: formFields\n      }, function () {\n        _this._validateForm();\n      });\n    };\n\n    _this._updateFieldValue = function (fieldName, value) {\n      var _deepClone2 = deepClone(_this.state),\n          formFields = _deepClone2.formFields;\n\n      if (fieldName === \"referPercentage\" || fieldName === \"earningPercentage\") {\n        // Check if contains valid number\n        if (!isNaN(Number(value))) {\n          var inputParts = value.split(\".\");\n\n          if (inputParts.length === 2) {\n            // Has decimals\n            if (inputParts[1].length > 2) {\n              return;\n            }\n          }\n        }\n      }\n\n      formFields[fieldName].value = value;\n\n      _this.setState({\n        formFields: formFields\n      }, function () {\n        if (formFields[fieldName].isDirty) {\n          // Validate\n          _this._validateForm();\n        }\n      });\n    };\n\n    _this._validateForm = function () {\n      return new Promise(function (resolve) {\n        var _deepClone3 = deepClone(_this.state),\n            formFields = _deepClone3.formFields,\n            platformShare = _deepClone3.platformShare;\n\n        var isFormValid = true;\n        Object.keys(formFields).forEach(function (fieldName, index) {\n          if (formFields[fieldName][\"isTyped\"]) {\n            switch (fieldName) {\n              case \"referPercentage\":\n              case \"earningPercentage\":\n                {\n                  if (String(formFields[fieldName].value).length && !isNaN(Number(formFields[fieldName].value)) && Number(formFields[fieldName].value) >= 0 && Math.ceil(formFields[fieldName].value) <= 100) {\n                    formFields[fieldName].isValid = true;\n                  } else {\n                    formFields[fieldName].isValid = false;\n                    isFormValid = false;\n                  }\n\n                  break; // if (\n                  //   formFields[fieldName][\"isRequired\"] &&\n                  //   formFields[fieldName].value.length\n                  // ) {\n                  //   if (\n                  //     config.regexConfig.digitOnly.test(\n                  //       String(formFields[fieldName].value).toLowerCase()\n                  //     )\n                  //   ) {\n                  //     if (\n                  //       Number(formFields[fieldName].value) >= 0 &&\n                  //       Number(formFields[fieldName].value) < 100\n                  //     ) {\n                  //       formFields[fieldName].isValid = true;\n                  //     } else {\n                  //       formFields[fieldName].isValid = false;\n                  //       isFormValid = false;\n                  //     }\n                  //   } else {\n                  //     formFields[fieldName].isValid = false;\n                  //     isFormValid = false;\n                  //   }\n                  // } else {\n                  //   formFields[fieldName].isValid = false;\n                  //   isFormValid = false;\n                  // }\n                  // break;\n                }\n\n              default:\n                {\n                  break;\n                }\n            }\n          }\n        });\n\n        _this.setState({\n          formFields: formFields,\n          isFormValid: isFormValid\n        }, function () {\n          resolve();\n        }); // this.setState(\n        //   {\n        //     formFields\n        //   },\n        //   async () => {\n        //     await this._calculatePlatformShare();\n        //     this.setState(\n        //       {\n        //         isFormValid: !isFormValid\n        //           ? isFormValid\n        //           : platformShare < 0\n        //           ? false\n        //           : true\n        //       },\n        //       () => {\n        //         resolve();\n        //       }\n        //     );\n        //   }\n        // );\n\n      });\n    };\n\n    _this._makeAllFieldDirty = function () {\n      return new Promise(function (resolve) {\n        var _deepClone4 = deepClone(_this.state),\n            formFields = _deepClone4.formFields;\n\n        Object.keys(formFields).forEach(function (fieldName, index) {\n          formFields[fieldName].isDirty = true;\n        });\n\n        _this.setState({\n          formFields: formFields\n        }, function () {\n          resolve();\n        });\n      });\n    };\n\n    _this._validateAndSubmit = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n        var _this$state, formFields, isFormValid;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                _context.next = 3;\n                return _this._makeAllFieldDirty();\n\n              case 3:\n                _context.next = 5;\n                return _this._validateForm();\n\n              case 5:\n                _this$state = _this.state, formFields = _this$state.formFields, isFormValid = _this$state.isFormValid;\n\n                if (isFormValid) {\n                  // form is valid\n                  console.log(\"valid\");\n\n                  _this._updateShareSettings();\n                } else {\n                  // form is not valid\n                  console.log(\"not valid\");\n                }\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this._updateShareSettings = function () {\n      var _deepClone5 = deepClone(_this.state),\n          formFields = _deepClone5.formFields,\n          creatorDetails = _deepClone5.creatorDetails;\n\n      updateInfluencerDetails(creatorDetails.id, {\n        earningPercentage: Number(formFields.earningPercentage.value),\n        referPercentage: Number(formFields.referPercentage.value)\n      }).then(function (response) {\n        _this._manageLoading(\"change-status\", false);\n\n        ToastsStore.success(\"Updated Successfully!\", 3000);\n      }).catch(function (error) {\n        _this._manageLoading(\"change-status\", false); // ToastsStore.error(error.reason, 3000);\n\n\n        showToast(error.reason && error.reason.length ? error.reason : \"Server error. Try again after sometime.\", \"error\");\n      });\n    };\n\n    _this._calculatePlatformShare = function () {\n      return new Promise(function (resolve) {\n        var _deepClone6 = deepClone(_this.state),\n            formFields = _deepClone6.formFields,\n            isInitial = _deepClone6.isInitial;\n\n        _this.setState({\n          platformShare: 100 - (Number(formFields.referPercentage.value || 0) + Number(formFields.earningPercentage.value || 0)),\n          isInitial: false\n        }, function () {\n          resolve();\n        });\n      }); // if (\n      //   isInitial ||\n      //   (formFields.referPercentage.value.length &&\n      //     formFields.earningPercentage.value.length)\n      // ) {\n      //   this.setState({\n      //     platformShare:\n      //       100 -\n      //       (Number(formFields.referPercentage.value || 0) +\n      //         Number(formFields.earningPercentage.value || 0)),\n      //     isInitial: false\n      //   });\n      // }\n    };\n\n    _this._getFilteredData = function (arr, requiredAttr, searchingAttr, searchingValue) {\n      var defaultReturnValue = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n      var filteredArr = arr.filter(function (item) {\n        return item.hasOwnProperty(searchingAttr) && item[searchingAttr] === searchingValue;\n      });\n\n      if (filteredArr.length && filteredArr[0].hasOwnProperty(requiredAttr)) {\n        return filteredArr[0][requiredAttr];\n      } else {\n        return defaultReturnValue;\n      }\n    };\n\n    _this._formatSocialUrl = function (url) {\n      if (url && url.length) {\n        if (url.indexOf(\"http\") > -1 || url.indexOf(\"https\") > -1) {\n          return url;\n        } else {\n          url = \"https://\" + url;\n          return url;\n        }\n      }\n    };\n\n    _this._changeReferralCount = function () {\n      var isIncrease = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      console.log(\"_changeReferralCount -> isIncrease\", isIncrease);\n\n      var _deepClone7 = deepClone(_this.state),\n          additionalReferralCount = _deepClone7.additionalReferralCount;\n\n      if (isIncrease && additionalReferralCount >= 0) {\n        additionalReferralCount++;\n      } else if (!isIncrease && additionalReferralCount > 0) {\n        additionalReferralCount--;\n      }\n\n      _this.setState({\n        additionalReferralCount: additionalReferralCount\n      });\n    };\n\n    _this._addReferralCount = function () {\n      var _deepClone8 = deepClone(_this.state),\n          creatorDetails = _deepClone8.creatorDetails,\n          availableReferrralCount = _deepClone8.availableReferrralCount,\n          additionalReferralCount = _deepClone8.additionalReferralCount;\n\n      if (additionalReferralCount <= 0) {\n        return;\n      }\n\n      _this._manageLoading(\"change-status\", true);\n\n      availableReferrralCount = Number(availableReferrralCount) + Number(additionalReferralCount);\n      updateInfluencerDetails(creatorDetails.id, {\n        referralCount: availableReferrralCount\n      }).then(function (response) {\n        _this.setState({\n          availableReferrralCount: availableReferrralCount,\n          additionalReferralCount: 0\n        });\n\n        _this._manageLoading(\"change-status\", false);\n\n        ToastsStore.success(\"Updated Successfully!\", 3000);\n      }).catch(function (error) {\n        _this._manageLoading(\"change-status\", false); // ToastsStore.error(error.reason, 3000);\n\n\n        showToast(error.reason && error.reason.length ? error.reason : \"Server error. Try again after sometime.\", \"error\");\n      });\n    };\n\n    _this._redirectToSubscriberView = function (subscriber) {\n      _this.props.history.push(\"/subscriber-view/\" + subscriber._id);\n    };\n\n    _this.state = {\n      platformShare: 0,\n      isAdditionError: false,\n      isInitial: true,\n      isFormValid: false,\n      idCardUrl: null,\n      holdingIDCardUrl: null,\n      formFields: {\n        referPercentage: {\n          value: \"\",\n          isValid: false,\n          isDirty: false,\n          isRequired: true,\n          isTyped: false\n        },\n        earningPercentage: {\n          value: \"\",\n          isValid: false,\n          isDirty: false,\n          isRequired: true,\n          isTyped: false\n        }\n      },\n      subscriberModal: {\n        isOpen: false,\n        data: null\n      },\n      referralsModal: {\n        isOpen: false,\n        data: null\n      },\n      activeTab: new Array(2).fill(\"1\"),\n      creatorDetails: null,\n      loading: {\n        loadingData: false,\n        changeStatusLoading: false\n      },\n      payperview: {\n        _influencer: {}\n      },\n      transactions: [],\n      availableReferrralCount: 0,\n      additionalReferralCount: 0\n    };\n    return _this;\n  }\n\n  _createClass(PayPerViewDetails, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._manageLoading(\"data\", true);\n\n      this._getPPVDetails(this.props.match.params.id);\n    }\n  }, {\n    key: \"toggle\",\n    value: function toggle(tabPane, tab) {\n      var _this2 = this;\n\n      var newArray = this.state.activeTab.slice();\n      newArray[tabPane] = tab;\n      this.setState({\n        activeTab: newArray\n      }, function () {\n        if (Number(tab) === 2) {\n          _this2._updateChildActivites();\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state2 = this.state,\n          payperview = _this$state2.payperview,\n          influencer = _this$state2.payperview._influencer,\n          transactions = _this$state2.transactions,\n          loading = _this$state2.loading;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"app TruFansPgBg animated fadeIn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Container, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"events-view\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"PgTitle mb-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 506,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-start align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"ghost-dark\",\n        className: \"customBackBtn\",\n        onClick: function onClick() {\n          return _this3.props.history.push(\"/pay-per-view\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-arrow-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 514,\n          columnNumber: 19\n        }\n      })), /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 17\n        }\n      }, \"Back to PPVs\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-4 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ProfileCard card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"align-items-center d-flex flex-column card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"profileImgWrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"profileImg\",\n        src: influencer && influencer.profilePicture && influencer.profilePicture.length ? influencer.profilePicture : config.defaultUserPicture,\n        alt: \"Profile Img\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"mt-2 mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 21\n        }\n      }, influencer && influencer.name && influencer.name.full, \"\\xA0\", /*#__PURE__*/React.createElement(\"img\", {\n        src: \"https://www.countryflags.io/\".concat(influencer && influencer.address && influencer.address.country, \"/flat/24.png\"),\n        alt: \"flag\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 21\n        }\n      }, \"Published :\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 23\n        }\n      }, moment(payperview.scheduledAt).format(\"LLL\")))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-footer new-card-footer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 21\n        }\n      }, \"Price\"), /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table new-table\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: \"../assets/img/price-icon1.png\",\n        className: \"price-icon\",\n        alt: \"Basic Price\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 27\n        }\n      })), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: \"../assets/img/price-icon2.png\",\n        className: \"price-icon\",\n        alt: \"Plus Price\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 27\n        }\n      })), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: \"../assets/img/price-icon3.png\",\n        className: \"price-icon\",\n        alt: \"Premium Price\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 27\n        }\n      }))), /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 582,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 583,\n          columnNumber: 25\n        }\n      }, \"$\", payperview.price || 0), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 25\n        }\n      }, \"$\", payperview.plusPrice || 0), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 585,\n          columnNumber: 25\n        }\n      }, \"$\", payperview.premiumPrice || 0)))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-8\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 591,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ProfileCard card event-details-card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 592,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 593,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"video\", {\n        width: \"100%\",\n        src: payperview.videoUrl,\n        controls: true,\n        controlsList: \"nodownload\",\n        disablePictureInPicture: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 594,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 606,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"mt-2 mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 607,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 23\n        }\n      }, \"Pay per view Name : \"), payperview.title), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 611,\n          columnNumber: 21\n        }\n      }, payperview.description && payperview.description.length ? /*#__PURE__*/React.createElement(ReadMoreAndLess, {\n        className: \"read-more-content\",\n        charLimit: 80,\n        readMoreText: \"Read more\",\n        readLessText: \"Read less\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 25\n        }\n      }, payperview.description) : null))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 628,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-12 mt-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 629,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        className: \"mb-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 17\n        }\n      }, \"Viewers\"), /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table new-table\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 631,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 632,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 633,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 634,\n          columnNumber: 23\n        }\n      }, \"Subscriber\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 23\n        }\n      }, \"Amount Paid\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 636,\n          columnNumber: 23\n        }\n      }, \"Transaction ID\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 637,\n          columnNumber: 23\n        }\n      }, \"Status\"))), transactions.length ? /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 641,\n          columnNumber: 21\n        }\n      }, transactions.map(function (item, index) {\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: item.id,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 643,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 644,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          href: \"#\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 645,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"d-flex justify-content-start align-items-center\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 646,\n            columnNumber: 31\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"personImgWrap\",\n          onClick: function onClick() {\n            return _this3._redirectToSubscriberView(item._from);\n          },\n          style: {\n            cursor: \"pointer\"\n          },\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 647,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          className: \"personImg\",\n          src: item._from && item._from.profilePicture && item._from.profilePicture.length ? item._from.profilePicture : config.defaultUserPicture,\n          alt: \"Profile Thumbnail\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 654,\n            columnNumber: 35\n          }\n        })), /*#__PURE__*/React.createElement(\"p\", {\n          onClick: function onClick() {\n            return _this3._redirectToSubscriberView(item._from);\n          },\n          style: {\n            cursor: \"pointer\"\n          },\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 666,\n            columnNumber: 33\n          }\n        }, item._from.name.full)))), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 677,\n            columnNumber: 27\n          }\n        }, \"$\", item.amount || 0), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 678,\n            columnNumber: 27\n          }\n        }, item.transactionId), /*#__PURE__*/React.createElement(\"td\", {\n          className: \"capitalize\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 679,\n            columnNumber: 27\n          }\n        }, item.status));\n      })) : /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 684,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 685,\n          columnNumber: 23\n        }\n      }, \"No viewers yet\"))))))));\n    }\n  }]);\n\n  return PayPerViewDetails;\n}(Component);\n\nexport default PayPerViewDetails;","map":{"version":3,"sources":["/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/src/pages/PayPerViewDetails.js"],"names":["React","Component","ToastsStore","Button","Card","CardBody","CardHeader","Col","Container","Form","FormGroup","Input","InputGroup","InputGroupAddon","InputGroupText","Label","ListGroup","ListGroupItem","Nav","NavItem","NavLink","Row","TabContent","TabPane","CreatorFeedList","ReferralsListModal","SubscriberListModal","CopyclipBoard","config","changeUserStatus","getCreatorDetails","updateInfluencerDetails","getPPVDetails","deepClone","showToast","Link","moment","ReadMoreAndLess","PayPerViewDetails","props","_getPPVDetails","id","_manageLoading","then","response","payperview","transactions","console","log","setState","error","_onToggleReferralsModal","creator","JSON","parse","stringify","state","referralsModal","isOpen","referrals","_invitations","data","_onToggleSubscriberModal","subscriberModal","subscribers","_subscriptions","_goBack","history","goBack","key","value","loading","loadingData","changeStatusLoading","_onStatusUpdate","creatorDetails","status","success","reason","length","_markAsDirty","fieldName","formFields","isDirty","isTyped","_validateForm","_updateFieldValue","isNaN","Number","inputParts","split","Promise","resolve","platformShare","isFormValid","Object","keys","forEach","index","String","Math","ceil","isValid","_makeAllFieldDirty","_validateAndSubmit","e","preventDefault","_updateShareSettings","earningPercentage","referPercentage","catch","_calculatePlatformShare","isInitial","_getFilteredData","arr","requiredAttr","searchingAttr","searchingValue","defaultReturnValue","filteredArr","filter","item","hasOwnProperty","_formatSocialUrl","url","indexOf","_changeReferralCount","isIncrease","additionalReferralCount","_addReferralCount","availableReferrralCount","referralCount","_redirectToSubscriberView","subscriber","push","_id","isAdditionError","idCardUrl","holdingIDCardUrl","isRequired","activeTab","Array","fill","_influencer","match","params","tabPane","tab","newArray","slice","_updateChildActivites","influencer","profilePicture","defaultUserPicture","name","full","address","country","scheduledAt","format","price","plusPrice","premiumPrice","videoUrl","title","description","map","_from","cursor","amount","transactionId"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { ToastsStore } from \"react-toasts\";\nimport {\n  Button,\n  Card,\n  CardBody,\n  CardHeader,\n  Col,\n  Container,\n  Form,\n  FormGroup,\n  Input,\n  InputGroup,\n  InputGroupAddon,\n  InputGroupText,\n  Label,\n  ListGroup,\n  ListGroupItem,\n  Nav,\n  NavItem,\n  NavLink,\n  Row,\n  TabContent,\n  TabPane,\n} from \"reactstrap\";\nimport CreatorFeedList from \"../components/creator-feed-list\";\nimport ReferralsListModal from \"../components/referrals-list-modal\";\nimport SubscriberListModal from \"../components/subscriber-list-modal\";\nimport CopyclipBoard from \"../components/copy-clipboard\";\nimport config from \"../config/index\";\nimport {\n  changeUserStatus,\n  getCreatorDetails,\n  updateInfluencerDetails,\n  getPPVDetails,\n} from \"../http/http-calls\";\nimport { deepClone, showToast } from \"../helper-methods\";\nimport { Link } from \"react-router-dom\";\nimport moment from \"moment\";\nimport ReadMoreAndLess from \"react-read-more-less\";\n\nclass PayPerViewDetails extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      platformShare: 0,\n      isAdditionError: false,\n      isInitial: true,\n      isFormValid: false,\n      idCardUrl: null,\n      holdingIDCardUrl: null,\n      formFields: {\n        referPercentage: {\n          value: \"\",\n          isValid: false,\n          isDirty: false,\n          isRequired: true,\n          isTyped: false,\n        },\n        earningPercentage: {\n          value: \"\",\n          isValid: false,\n          isDirty: false,\n          isRequired: true,\n          isTyped: false,\n        },\n      },\n      subscriberModal: {\n        isOpen: false,\n        data: null,\n      },\n      referralsModal: {\n        isOpen: false,\n        data: null,\n      },\n      activeTab: new Array(2).fill(\"1\"),\n      creatorDetails: null,\n      loading: {\n        loadingData: false,\n        changeStatusLoading: false,\n      },\n      payperview: {\n        _influencer: {},\n      },\n      transactions: [],\n      availableReferrralCount: 0,\n      additionalReferralCount: 0,\n    };\n  }\n\n  componentDidMount() {\n    this._manageLoading(\"data\", true);\n    this._getPPVDetails(this.props.match.params.id);\n  }\n\n  _getPPVDetails = (id) => {\n    this._manageLoading(\"data\", true);\n    getPPVDetails(id).then(\n      (response) => {\n        const { payperview, transactions } = response;\n        console.log(\"response\", response);\n        this.setState(\n          {\n            payperview,\n            transactions,\n          },\n          () => {\n            this._manageLoading(\"data\", false);\n          }\n        );\n      },\n      (error) => {\n        console.log(error);\n        this._manageLoading(\"data\", false);\n      }\n    );\n  };\n\n  toggle(tabPane, tab) {\n    const newArray = this.state.activeTab.slice();\n    newArray[tabPane] = tab;\n    this.setState(\n      {\n        activeTab: newArray,\n      },\n      () => {\n        if (Number(tab) === 2) {\n          this._updateChildActivites();\n        }\n      }\n    );\n  }\n\n  _onToggleReferralsModal = (creator) => {\n    let { referralsModal } = JSON.parse(JSON.stringify(this.state));\n    referralsModal.isOpen = !referralsModal.isOpen;\n    if (referralsModal.isOpen) {\n      creator.referrals = creator._invitations;\n    }\n    referralsModal.data = creator;\n    this.setState(\n      {\n        referralsModal,\n      },\n      () => {\n        console.log(this.state);\n      }\n    );\n  };\n\n  _onToggleSubscriberModal = (creator) => {\n    let { subscriberModal } = JSON.parse(JSON.stringify(this.state));\n    subscriberModal.isOpen = !subscriberModal.isOpen;\n    if (subscriberModal.isOpen) {\n      creator.subscribers = creator._subscriptions;\n    }\n    subscriberModal.data = creator;\n    this.setState(\n      {\n        subscriberModal,\n      },\n      () => {\n        console.log(this.state);\n      }\n    );\n  };\n\n  _goBack = () => {\n    // this.props.history.push(\"/creators\");\n    this.props.history.goBack();\n  };\n\n  _manageLoading = (key, value) => {\n    let { loadingData, changeStatusLoading } = this.state.loading;\n    if (key === \"data\") {\n      loadingData = value;\n    } else if (key === \"change-status\") {\n      changeStatusLoading = value;\n    }\n    this.setState({ loading: { loadingData, changeStatusLoading } });\n  };\n\n  _onStatusUpdate = () => {\n    let { creatorDetails } = this.state;\n    creatorDetails.status =\n      creatorDetails.status === \"Active\" ? \"Inactive\" : \"Active\";\n    this.setState({\n      creatorDetails,\n    });\n    this._manageLoading(\"change-status\", true);\n    changeUserStatus(creatorDetails.id).then(\n      (response) => {\n        console.log(response);\n        this._manageLoading(\"change-status\", false);\n        ToastsStore.success(\"Status changed Successfully!\", 3000);\n      },\n      (error) => {\n        console.log(error);\n        this._manageLoading(\"change-status\", false);\n        // ToastsStore.error(error.reason, 3000);\n        showToast(\n          error.reason && error.reason.length\n            ? error.reason\n            : \"Server error. Try again after sometime.\",\n          \"error\"\n        );\n      }\n    );\n  };\n\n  _markAsDirty = (fieldName) => {\n    const { formFields } = deepClone(this.state);\n    formFields[fieldName].isDirty = true;\n    formFields[fieldName].isTyped = true;\n\n    this.setState({ formFields }, () => {\n      this._validateForm();\n    });\n  };\n\n  _updateFieldValue = (fieldName, value) => {\n    const { formFields } = deepClone(this.state);\n    if (fieldName === \"referPercentage\" || fieldName === \"earningPercentage\") {\n      // Check if contains valid number\n      if (!isNaN(Number(value))) {\n        const inputParts = value.split(\".\");\n        if (inputParts.length === 2) {\n          // Has decimals\n          if (inputParts[1].length > 2) {\n            return;\n          }\n        }\n      }\n    }\n\n    formFields[fieldName].value = value;\n    this.setState({ formFields }, () => {\n      if (formFields[fieldName].isDirty) {\n        // Validate\n        this._validateForm();\n      }\n    });\n  };\n\n  _validateForm = () => {\n    return new Promise((resolve) => {\n      const { formFields, platformShare } = deepClone(this.state);\n      let isFormValid = true;\n      Object.keys(formFields).forEach((fieldName, index) => {\n        if (formFields[fieldName][\"isTyped\"]) {\n          switch (fieldName) {\n            case \"referPercentage\":\n            case \"earningPercentage\": {\n              if (\n                String(formFields[fieldName].value).length &&\n                !isNaN(Number(formFields[fieldName].value)) &&\n                Number(formFields[fieldName].value) >= 0 &&\n                Math.ceil(formFields[fieldName].value) <= 100\n              ) {\n                formFields[fieldName].isValid = true;\n              } else {\n                formFields[fieldName].isValid = false;\n                isFormValid = false;\n              }\n              break;\n              // if (\n              //   formFields[fieldName][\"isRequired\"] &&\n              //   formFields[fieldName].value.length\n              // ) {\n              //   if (\n              //     config.regexConfig.digitOnly.test(\n              //       String(formFields[fieldName].value).toLowerCase()\n              //     )\n              //   ) {\n              //     if (\n              //       Number(formFields[fieldName].value) >= 0 &&\n              //       Number(formFields[fieldName].value) < 100\n              //     ) {\n              //       formFields[fieldName].isValid = true;\n              //     } else {\n              //       formFields[fieldName].isValid = false;\n              //       isFormValid = false;\n              //     }\n              //   } else {\n              //     formFields[fieldName].isValid = false;\n              //     isFormValid = false;\n              //   }\n              // } else {\n              //   formFields[fieldName].isValid = false;\n              //   isFormValid = false;\n              // }\n              // break;\n            }\n\n            default: {\n              break;\n            }\n          }\n        }\n      });\n      this.setState(\n        {\n          formFields,\n          isFormValid,\n        },\n        () => {\n          resolve();\n        }\n      );\n      // this.setState(\n      //   {\n      //     formFields\n      //   },\n      //   async () => {\n      //     await this._calculatePlatformShare();\n      //     this.setState(\n      //       {\n      //         isFormValid: !isFormValid\n      //           ? isFormValid\n      //           : platformShare < 0\n      //           ? false\n      //           : true\n      //       },\n      //       () => {\n      //         resolve();\n      //       }\n      //     );\n      //   }\n      // );\n    });\n  };\n\n  _makeAllFieldDirty = () => {\n    return new Promise((resolve) => {\n      const { formFields } = deepClone(this.state);\n      Object.keys(formFields).forEach((fieldName, index) => {\n        formFields[fieldName].isDirty = true;\n      });\n      this.setState({ formFields }, () => {\n        resolve();\n      });\n    });\n  };\n\n  _validateAndSubmit = async (e) => {\n    e.preventDefault();\n    await this._makeAllFieldDirty();\n    await this._validateForm();\n    const { formFields, isFormValid } = this.state;\n    if (isFormValid) {\n      // form is valid\n      console.log(\"valid\");\n      this._updateShareSettings();\n    } else {\n      // form is not valid\n      console.log(\"not valid\");\n    }\n  };\n\n  _updateShareSettings = () => {\n    const { formFields, creatorDetails } = deepClone(this.state);\n    updateInfluencerDetails(creatorDetails.id, {\n      earningPercentage: Number(formFields.earningPercentage.value),\n      referPercentage: Number(formFields.referPercentage.value),\n    })\n      .then((response) => {\n        this._manageLoading(\"change-status\", false);\n        ToastsStore.success(\"Updated Successfully!\", 3000);\n      })\n      .catch((error) => {\n        this._manageLoading(\"change-status\", false);\n        // ToastsStore.error(error.reason, 3000);\n        showToast(\n          error.reason && error.reason.length\n            ? error.reason\n            : \"Server error. Try again after sometime.\",\n          \"error\"\n        );\n      });\n  };\n\n  _calculatePlatformShare = () => {\n    return new Promise((resolve) => {\n      const { formFields, isInitial } = deepClone(this.state);\n      this.setState(\n        {\n          platformShare:\n            100 -\n            (Number(formFields.referPercentage.value || 0) +\n              Number(formFields.earningPercentage.value || 0)),\n          isInitial: false,\n        },\n        () => {\n          resolve();\n        }\n      );\n    });\n\n    // if (\n    //   isInitial ||\n    //   (formFields.referPercentage.value.length &&\n    //     formFields.earningPercentage.value.length)\n    // ) {\n    //   this.setState({\n    //     platformShare:\n    //       100 -\n    //       (Number(formFields.referPercentage.value || 0) +\n    //         Number(formFields.earningPercentage.value || 0)),\n    //     isInitial: false\n    //   });\n    // }\n  };\n\n  _getFilteredData = (\n    arr,\n    requiredAttr,\n    searchingAttr,\n    searchingValue,\n    defaultReturnValue = null\n  ) => {\n    const filteredArr = arr.filter((item) => {\n      return (\n        item.hasOwnProperty(searchingAttr) &&\n        item[searchingAttr] === searchingValue\n      );\n    });\n    if (filteredArr.length && filteredArr[0].hasOwnProperty(requiredAttr)) {\n      return filteredArr[0][requiredAttr];\n    } else {\n      return defaultReturnValue;\n    }\n  };\n\n  _formatSocialUrl = (url) => {\n    if (url && url.length) {\n      if (url.indexOf(\"http\") > -1 || url.indexOf(\"https\") > -1) {\n        return url;\n      } else {\n        url = \"https://\" + url;\n        return url;\n      }\n    }\n  };\n\n  _changeReferralCount = (isIncrease = true) => {\n    console.log(\"_changeReferralCount -> isIncrease\", isIncrease);\n    let { additionalReferralCount } = deepClone(this.state);\n\n    if (isIncrease && additionalReferralCount >= 0) {\n      additionalReferralCount++;\n    } else if (!isIncrease && additionalReferralCount > 0) {\n      additionalReferralCount--;\n    }\n    this.setState({\n      additionalReferralCount,\n    });\n  };\n\n  _addReferralCount = () => {\n    let {\n      creatorDetails,\n      availableReferrralCount,\n      additionalReferralCount,\n    } = deepClone(this.state);\n    if (additionalReferralCount <= 0) {\n      return;\n    }\n    this._manageLoading(\"change-status\", true);\n    availableReferrralCount =\n      Number(availableReferrralCount) + Number(additionalReferralCount);\n    updateInfluencerDetails(creatorDetails.id, {\n      referralCount: availableReferrralCount,\n    })\n      .then((response) => {\n        this.setState({ availableReferrralCount, additionalReferralCount: 0 });\n        this._manageLoading(\"change-status\", false);\n        ToastsStore.success(\"Updated Successfully!\", 3000);\n      })\n      .catch((error) => {\n        this._manageLoading(\"change-status\", false);\n        // ToastsStore.error(error.reason, 3000);\n        showToast(\n          error.reason && error.reason.length\n            ? error.reason\n            : \"Server error. Try again after sometime.\",\n          \"error\"\n        );\n      });\n  };\n\n  _redirectToSubscriberView = (subscriber) => {\n    this.props.history.push(\"/subscriber-view/\" + subscriber._id);\n  };\n\n  render() {\n    let {\n      payperview,\n      payperview: { _influencer: influencer },\n      transactions,\n      loading,\n    } = this.state;\n    return (\n      <div className=\"app TruFansPgBg animated fadeIn\">\n        <Container>\n          <div className=\"events-view\">\n            <div className=\"PgTitle mb-5\">\n              <div className=\"d-flex justify-content-start align-items-center\">\n                {/* on clicking the below btn, it should take back user to creators page */}\n                <Button\n                  color=\"ghost-dark\"\n                  className=\"customBackBtn\"\n                  onClick={() => this.props.history.push(\"/pay-per-view\")}\n                >\n                  <i className=\"fa fa-arrow-left\"></i>\n                </Button>\n                <h2>Back to PPVs</h2>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"col-sm-4 \">\n                <div className=\"ProfileCard card\">\n                  <div className=\"card-header\"></div>\n                  <div className=\"align-items-center d-flex flex-column card-body\">\n                    <div className=\"profileImgWrap\">\n                      <img\n                        className=\"profileImg\"\n                        src={\n                          influencer &&\n                          influencer.profilePicture &&\n                          influencer.profilePicture.length\n                            ? influencer.profilePicture\n                            : config.defaultUserPicture\n                        }\n                        alt=\"Profile Img\"\n                      />\n                    </div>\n                    <h4 className=\"mt-2 mb-2\">\n                      {influencer && influencer.name && influencer.name.full}\n                      &nbsp;\n                      <img\n                        src={`https://www.countryflags.io/${\n                          influencer &&\n                          influencer.address &&\n                          influencer.address.country\n                        }/flat/24.png`}\n                        alt=\"flag\"\n                      />\n                    </h4>\n                    <p>\n                      Published :{\" \"}\n                      <span>\n                        {moment(payperview.scheduledAt).format(\"LLL\")}\n                      </span>\n                    </p>\n                  </div>\n                  <div className=\"card-footer new-card-footer\">\n                    <p>Price</p>\n                    <table className=\"table new-table\">\n                      <tr>\n                        <th>\n                          <img\n                            src=\"../assets/img/price-icon1.png\"\n                            className=\"price-icon\"\n                            alt=\"Basic Price\"\n                          />\n                        </th>\n                        <th>\n                          <img\n                            src=\"../assets/img/price-icon2.png\"\n                            className=\"price-icon\"\n                            alt=\"Plus Price\"\n                          />\n                        </th>\n                        <th>\n                          <img\n                            src=\"../assets/img/price-icon3.png\"\n                            className=\"price-icon\"\n                            alt=\"Premium Price\"\n                          />\n                        </th>\n                      </tr>\n                      <tr>\n                        <td>${payperview.price || 0}</td>\n                        <td>${payperview.plusPrice || 0}</td>\n                        <td>${payperview.premiumPrice || 0}</td>\n                      </tr>\n                    </table>\n                  </div>\n                </div>\n              </div>\n              <div className=\"col-sm-8\">\n                <div className=\"ProfileCard card event-details-card\">\n                  <div className=\"card-header\">\n                    <video\n                      width=\"100%\"\n                      src={payperview.videoUrl}\n                      controls\n                      controlsList=\"nodownload\"\n                      disablePictureInPicture\n                    >\n                      {/* <source src={ppv.videoUrl} type=\"video/mp4\" />\n                      <source src=\"movie.ogg\" type=\"video/ogg\" />\n                      Your browser does not support the video tag. */}\n                    </video>\n                  </div>\n                  <div className=\"card-body\">\n                    <h4 className=\"mt-2 mb-3\">\n                      <span>Pay per view Name : </span>\n                      {payperview.title}\n                    </h4>\n                    <p>\n                      {payperview.description &&\n                      payperview.description.length ? (\n                        <ReadMoreAndLess\n                          className=\"read-more-content\"\n                          charLimit={80}\n                          readMoreText=\"Read more\"\n                          readLessText=\"Read less\"\n                        >\n                          {payperview.description}\n                        </ReadMoreAndLess>\n                      ) : null}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"col-sm-12 mt-4\">\n                <h3 className=\"mb-4\">Viewers</h3>\n                <table className=\"table new-table\">\n                  <thead>\n                    <tr>\n                      <th>Subscriber</th>\n                      <th>Amount Paid</th>\n                      <th>Transaction ID</th>\n                      <th>Status</th>\n                    </tr>\n                  </thead>\n                  {transactions.length ? (\n                    <tbody>\n                      {transactions.map((item, index) => (\n                        <tr key={item.id}>\n                          <td>\n                            <a href=\"#\">\n                              <div className=\"d-flex justify-content-start align-items-center\">\n                                <div\n                                  className=\"personImgWrap\"\n                                  onClick={() =>\n                                    this._redirectToSubscriberView(item._from)\n                                  }\n                                  style={{ cursor: \"pointer\" }}\n                                >\n                                  <img\n                                    className=\"personImg\"\n                                    src={\n                                      item._from &&\n                                      item._from.profilePicture &&\n                                      item._from.profilePicture.length\n                                        ? item._from.profilePicture\n                                        : config.defaultUserPicture\n                                    }\n                                    alt=\"Profile Thumbnail\"\n                                  />\n                                </div>\n                                <p\n                                  onClick={() =>\n                                    this._redirectToSubscriberView(item._from)\n                                  }\n                                  style={{ cursor: \"pointer\" }}\n                                >\n                                  {item._from.name.full}\n                                </p>\n                              </div>\n                            </a>\n                          </td>\n                          <td>${item.amount || 0}</td>\n                          <td>{item.transactionId}</td>\n                          <td className=\"capitalize\">{item.status}</td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  ) : (\n                    <tbody>\n                      <tr>No viewers yet</tr>\n                    </tbody>\n                  )}\n                </table>\n              </div>\n            </div>\n          </div>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default PayPerViewDetails;\n"]},"metadata":{},"sourceType":"module"}