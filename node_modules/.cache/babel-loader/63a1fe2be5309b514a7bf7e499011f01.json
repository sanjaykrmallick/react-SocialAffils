{"ast":null,"code":"import _classCallCheck from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/src/pages/transactions.js\";\nimport React, { Component } from \"react\";\nimport { Container, Row, Col // Table,\n, Button, Input // FormGroup,\n// Label\n} from \"reactstrap\";\nimport { Link } from \"react-router-dom\";\nimport CustomTable from \"../components/custom-table\";\nimport CustomDateRangePicker from \"../components/date-range-picker\";\nimport { getAllCreators, getAllSubscribers, getAllTransactions, updateTransactions, getAllUsers } from \"../http/http-calls\";\nimport { ToastsStore } from \"react-toasts\";\nimport config from \"../config\";\nimport { format } from \"date-fns\";\nimport moment from \"moment\";\nimport { showToast, deepClone } from \"../helper-methods\";\nimport CustomDataTable from \"../components/custom-data-table\";\n\nvar Transactions = /*#__PURE__*/function (_Component) {\n  _inherits(Transactions, _Component);\n\n  var _super = _createSuper(Transactions);\n\n  function Transactions() {\n    var _this;\n\n    _classCallCheck(this, Transactions);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      creatorList: [],\n      subscriberList: [],\n      transactionList: [],\n      transactionListBackup: [],\n      paymentTypes: config.paymentTypes,\n      paymentStatusList: config.paymentStatusList,\n      headerKeys: [{\n        id: \"id\",\n        label: \"id\"\n      }, {\n        id: \"name\",\n        label: \"Transaction\"\n      }, {\n        id: \"amount\",\n        label: \"Amount\"\n      }, {\n        id: \"date\",\n        label: \"Date\"\n      }, {\n        id: \"subscriberName\",\n        label: \"Subscriber\"\n      }, {\n        id: \"creatorName\",\n        label: \"Creator\"\n      }, {\n        id: \"relatedContent\",\n        label: \"Related Content\",\n        noSort: true\n      }, {\n        id: \"status\",\n        label: \"Status\"\n      }],\n      filters: {\n        dateRange: {\n          startDate: null,\n          endDate: null,\n          focusedInput: null,\n          startDateId: \"startDate\",\n          endDateId: \"endDate\"\n        },\n        type: \"\",\n        subscriber: \"\",\n        creator: \"\",\n        status: \"\",\n        search: \"\"\n      },\n      loading: {\n        loadingData: false,\n        changeStatusLoading: false,\n        tableLoading: false\n      },\n      bulkStatus: \"\",\n      selectedTransactions: [],\n      totalCount: 0,\n      transactionFieldsKeyMap: {\n        name: \"paymentType\",\n        amount: \"amount\",\n        date: \"time\",\n        subscriberName: \"_from\",\n        creatorName: \"_to\",\n        status: \"status\"\n      },\n      tableConfig: {\n        pageNumber: 1,\n        pageSize: 10,\n        sort: {\n          sortBy: \"time\",\n          sortOrder: \"desc\"\n        },\n        filters: {}\n      }\n    };\n\n    _this._onDatesChange = function (startDate, endDate) {\n      // console.log(\"on date change\", startDate, endDate);\n      var filters = _this.state.filters;\n      filters.dateRange.startDate = startDate;\n      filters.dateRange.endDate = endDate;\n\n      _this.setState({\n        filters: filters\n      });\n\n      if (filters.dateRange.startDate && filters.dateRange.endDate) {\n        // console.log(\"range selction complete\");\n        // this._filterTransactionList();\n        _this._applyFilterChanges();\n      }\n    };\n\n    _this._onFocusChange = function (input) {\n      // console.log(input);\n      var filters = _this.state.filters;\n      filters.dateRange.focusedInput = input;\n\n      _this.setState({\n        filters: filters\n      });\n    };\n\n    _this._manageLoading = function (key, value) {\n      var _this$state$loading = _this.state.loading,\n          loadingData = _this$state$loading.loadingData,\n          changeStatusLoading = _this$state$loading.changeStatusLoading,\n          tableLoading = _this$state$loading.tableLoading;\n\n      if (key === \"data\") {\n        loadingData = value;\n      } else if (key === \"change-status\") {\n        changeStatusLoading = value;\n      } else if (key === \"table\") {\n        tableLoading = value;\n      }\n\n      _this.setState({\n        loading: {\n          loadingData: loadingData,\n          changeStatusLoading: changeStatusLoading,\n          tableLoading: tableLoading\n        }\n      });\n    };\n\n    _this._getAllCreators = function () {\n      // this._manageLoading('data', true);\n      getAllCreators().then(function (response) {\n        console.log(response); // this._manageLoading('data', false);\n      }, function (error) {\n        console.log(error); // this._manageLoading('data', false);\n        // ToastsStore.error(error.reason, 3000);\n\n        showToast(error.reason && error.reason.length ? error.reason : \"Server error. Try again after sometime.\", \"error\");\n      });\n    };\n\n    _this._getAllSubscribers = function () {\n      // this._manageLoading(\"data\", true);\n      getAllSubscribers().then(function (response) {\n        console.log(response); // this._manageLoading(\"data\", false);\n\n        var subscriberList = response.fans.map(function (each) {\n          return {\n            name: each.name.full,\n            id: each.id\n          };\n        });\n        subscriberList = subscriberList.sort(function (a, b) {\n          var textA = a.name.toLowerCase();\n          var textB = b.name.toLowerCase();\n          return textA < textB ? -1 : textA > textB ? 1 : 0;\n        });\n\n        _this.setState({\n          subscriberList: subscriberList\n        });\n      }, function (error) {\n        console.log(error); // this._manageLoading(\"data\", false);\n        // ToastsStore.error(error.reason, 3000);\n\n        showToast(error.reason && error.reason.length ? error.reason : \"Server error. Try again after sometime.\", \"error\");\n      });\n    };\n\n    _this._getAllUsers = function () {\n      getAllUsers().then(function (response) {\n        console.log(\"response :\", response);\n        var creatorList = response.influencers.map(function (each) {\n          return {\n            name: each.name.full.trim(),\n            id: each.id\n          };\n        });\n        creatorList = creatorList.sort(function (a, b) {\n          var textA = a.name.toLowerCase();\n          var textB = b.name.toLowerCase();\n          return textA < textB ? -1 : textA > textB ? 1 : 0;\n        });\n        var subscriberList = response.fans.map(function (each) {\n          return {\n            name: each.name.full.trim(),\n            id: each.id\n          };\n        });\n        subscriberList = subscriberList.sort(function (a, b) {\n          var textA = a.name.toLowerCase();\n          var textB = b.name.toLowerCase();\n          return textA < textB ? -1 : textA > textB ? 1 : 0;\n        });\n\n        _this.setState({\n          creatorList: creatorList,\n          subscriberList: subscriberList\n        });\n      }, function (error) {\n        console.log(\"error :\", error);\n        showToast(error.reason && error.reason.length ? error.reason : \"Server error. Try again after sometime.\", \"error\");\n      });\n    };\n\n    _this._getAllTransactions = function (data) {\n      var _deepClone = deepClone(_this.state),\n          transactionList = _deepClone.transactionList,\n          tableConfig = _deepClone.tableConfig;\n\n      if (!transactionList.length) {\n        _this._manageLoading(\"data\", true);\n      }\n\n      getAllTransactions(data).then(function (response) {\n        console.log(response);\n\n        _this._manageLoading(\"data\", false);\n\n        tableConfig.loading = false;\n\n        _this.setState({\n          tableConfig: tableConfig\n        });\n\n        var transactionListResp = response.transactions.map(function (each) {\n          return {\n            name: each.paymentType,\n            id: each._id,\n            amount: each.amount ? Number(each.amount) : \"-\",\n            date: each.time,\n            subscriber: each._from,\n            subscriberName: each._from && each._from.name ? each._from.name.full : \"NA\",\n            creator: each._to,\n            creatorName: each._to && each._to.name ? each._to.name.full : \"NA\",\n            relatedContent: each._message || each._post,\n            status: each.status\n          };\n        }); // transactionListResp = transactionListResp.sort((item1,item2)=>{\n        //   return new Date(item2.date) - new Date(item1.date);\n        // });\n\n        transactionList = transactionListResp;\n\n        _this.setState({\n          transactionList: transactionList,\n          transactionListBackup: transactionList,\n          totalCount: response.count\n        });\n      }, function (error) {\n        console.log(error);\n        tableConfig.loading = false;\n\n        _this.setState({\n          tableConfig: tableConfig\n        });\n\n        _this._manageLoading(\"data\", false); // ToastsStore.error(error.reason);\n\n\n        showToast(error.reason && error.reason.length ? error.reason : \"Server error. Try again after sometime.\", \"error\");\n      });\n    };\n\n    _this._dataFormat = function (cell, row, header) {\n      // console.log(cell, row, header);_formatDate\n      if (header === \"name\") {\n        console.log(row.name);\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"capitalize\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 9\n          }\n        }, row.name === \"payperview\" ? \"Pay Per View\" : row.name === \"liveEvent\" ? \"Live Event\" : row.name);\n      } else if (header === \"amount\") {\n        return typeof cell === \"number\" ? \"$\" + cell.toFixed(2) : \"-\";\n      } else if (header === \"date\") {\n        return /*#__PURE__*/React.createElement(React.Fragment, null, _this._formatDate(cell, \"MMM d, yyyy\"), /*#__PURE__*/React.createElement(\"br\", {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 11\n          }\n        }), _this._formatDate(cell, \"HH:mm\"));\n      } else if (header === \"subscriberName\") {\n        return cell ? /*#__PURE__*/React.createElement(Link, {\n          to: \"/subscriber-view/\".concat(row.subscriber._id),\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 11\n          }\n        }, cell)) : \"-\";\n      } else if (header === \"creatorName\") {\n        return cell ? /*#__PURE__*/React.createElement(Link, {\n          to: \"/creator-view/\".concat(row.creator._id),\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 11\n          }\n        }, cell)) : \"-\";\n      } else if (header === \"status\") {\n        return /*#__PURE__*/React.createElement(Input, {\n          type: \"select\",\n          value: cell,\n          className: \"capitalize\",\n          onChange: function onChange(e) {\n            return _this._onUpdateTransactions(e, row);\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 9\n          }\n        }, _this.state.paymentStatusList.map(function (option, index) {\n          return /*#__PURE__*/React.createElement(\"option\", {\n            key: index,\n            value: option,\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 13\n            }\n          }, option);\n        }));\n      } else if (header === \"relatedContent\") {\n        var content = \"\";\n\n        if (row.name === \"message\" && cell.content && cell.content[0].thumbnail) {\n          content = /*#__PURE__*/React.createElement(\"a\", {\n            href: cell.content && cell.content[0].thumbnail,\n            rel: \"noopener noreferrer\",\n            target: \"_blank\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 11\n            }\n          }, \"Link\");\n        } else if (row.name === \"post\" && cell._contents.length && cell._contents[0].thumbnail) {\n          content = /*#__PURE__*/React.createElement(\"a\", {\n            href: cell._contents[0].thumbnail,\n            rel: \"noopener noreferrer\",\n            target: \"_blank\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 11\n            }\n          }, \"Link\");\n        } else {\n          content = \"-\";\n        }\n\n        return content;\n      } else {\n        return cell;\n      }\n    };\n\n    _this._filterOnChange = function (_ref) {\n      var currentTarget = _ref.currentTarget;\n      var filters = _this.state.filters;\n      filters[currentTarget.name] = currentTarget.value;\n\n      _this.setState({\n        filters: filters\n      });\n\n      if (currentTarget.name !== \"search\") {\n        // this._filterTransactionList();\n        _this._applyFilterChanges();\n      }\n    };\n\n    _this._filterTransactionList = function () {\n      var filterConditions = []; // console.log(this.state);\n\n      var _this$state = _this.state,\n          filters = _this$state.filters,\n          transactionListBackup = _this$state.transactionListBackup,\n          transactionList = _this$state.transactionList;\n      Object.keys(filters).forEach(function (key) {\n        if (filters[key]) {\n          filterConditions.push(key);\n        }\n      }); // console.log(filterConditions);\n\n      transactionList = transactionListBackup;\n\n      if (filterConditions.length) {\n        if (filters.dateRange.startDate && filters.dateRange.endDate) {\n          transactionList = transactionList.filter(function (each) {\n            // console.log('====>>',filters.dateRange.startDate.toDate(), each.date, isAfter((filters.dateRange.startDate.toDate()), each.date))\n            // return (filters.dateRange.startDate.toDate()) >= new Date(each.date);\n            return moment(moment(each.date).format(\"YYYY-MM-DD\")).isBetween(filters.dateRange.startDate.format(\"YYYY-MM-DD\"), filters.dateRange.endDate.format(\"YYYY-MM-DD\"), null, \"[]\");\n          });\n        }\n\n        if (filters.type) {\n          transactionList = transactionList.filter(function (each) {\n            return each.name.toLowerCase() === filters.type.toLowerCase();\n          });\n        }\n\n        if (filters.subscriber) {\n          transactionList = transactionList.filter(function (each) {\n            return each.subscriber.id === filters.subscriber;\n          });\n        }\n\n        if (filters.creator) {\n          transactionList = transactionList.filter(function (each) {\n            return each.creator.id === filters.creator;\n          });\n        }\n\n        if (filters.status) {\n          transactionList = transactionList.filter(function (each) {\n            return each.status.toLowerCase() === filters.status.toLowerCase();\n          });\n        }\n\n        if (filters.search.trim().length) {\n          transactionList = transactionList.filter(function (each) {\n            return each.name.toLowerCase().includes(filters.search.toLowerCase()) || each.subscriberName.toLowerCase().includes(filters.search.toLowerCase()) || each.creatorName.toLowerCase().includes(filters.search.toLowerCase()) || each.status.toLowerCase().includes(filters.search.toLowerCase());\n          });\n        }\n\n        _this.setState({\n          transactionList: transactionList\n        });\n      } else {\n        _this.setState({\n          transactionList: transactionListBackup\n        });\n      }\n    };\n\n    _this._setSelectedRows = function (data) {\n      console.log(data);\n      var selectedTransactions = _this.state.selectedTransactions;\n      selectedTransactions = data;\n\n      _this.setState({\n        selectedTransactions: selectedTransactions\n      });\n    };\n\n    _this._onBulkStatusChange = function (_ref2) {\n      var currentTarget = _ref2.currentTarget;\n      var bulkStatus = _this.state.bulkStatus;\n      bulkStatus = currentTarget.value;\n\n      _this.setState({\n        bulkStatus: bulkStatus\n      });\n    };\n\n    _this._applyBulkStatusUpdate = function () {\n      var _this$state2 = _this.state,\n          bulkStatus = _this$state2.bulkStatus,\n          selectedTransactions = _this$state2.selectedTransactions;\n      var dataToUpdate = {\n        status: bulkStatus,\n        ids: selectedTransactions\n      };\n\n      if (!dataToUpdate.ids.length || !bulkStatus) {\n        ToastsStore.warning(\"Please select atleast one transaction and a status.\", 3000);\n        return;\n      } else {\n        console.log(dataToUpdate);\n\n        _this._manageLoading(\"change-status\", true);\n\n        updateTransactions(dataToUpdate).then(function (response) {\n          console.log(response);\n\n          _this._manageLoading(\"change-status\", false);\n\n          ToastsStore.success(\"Status changed Successfully!\", 3000);\n          selectedTransactions = [];\n\n          _this.setState({\n            selectedTransactions: selectedTransactions\n          });\n\n          _this._getAllTransactions(_this.state.tableConfig);\n        }, function (error) {\n          console.log(error);\n\n          _this._manageLoading(\"change-status\", false); // ToastsStore.error(error.reason, 3000);\n\n\n          showToast(error.reason && error.reason.length ? error.reason : \"Server error. Try again after sometime.\", \"error\");\n        });\n      }\n    };\n\n    _this._paginate = function (pageNumber, pageSize) {\n      console.log(\"pageNumber, pageSize :\", pageNumber, pageSize);\n      var tableConfig = _this.state.tableConfig;\n      tableConfig.pageNumber = pageNumber;\n      tableConfig.pageSize = pageSize;\n      tableConfig.loading = true;\n      setTimeout(function () {\n        _this.setState({\n          tableConfig: tableConfig\n        }, function () {\n          _this._getAllTransactions(_this.state.tableConfig);\n        });\n      }, 100);\n    };\n\n    _this._onSortChange = function (sortName, sortOrder) {\n      var _deepClone2 = deepClone(_this.state),\n          tableConfig = _deepClone2.tableConfig;\n\n      tableConfig.sort.sortBy = _this.state.transactionFieldsKeyMap[sortName];\n      tableConfig.sort.sortOrder = sortOrder;\n      tableConfig.loading = true;\n\n      _this.setState({\n        tableConfig: tableConfig\n      }, function () {\n        _this._getAllTransactions(tableConfig);\n      });\n\n      console.log(\"sortName, sortOrder :\", sortName, sortOrder);\n    };\n\n    _this._applyFilterChanges = function () {\n      var _deepClone3 = deepClone(_this.state),\n          filters = _deepClone3.filters,\n          tableConfig = _deepClone3.tableConfig;\n\n      console.log(\"filters :\", filters);\n      var data = {};\n\n      if (filters.type.length) {\n        data.paymentType = filters.type;\n      }\n\n      if (filters.subscriber.length) {\n        data._from = filters.subscriber;\n      }\n\n      if (filters.creator.length) {\n        data._to = filters.creator;\n      }\n\n      if (filters.status.length) {\n        data.status = filters.status;\n      }\n\n      if (filters.dateRange.startDate && filters.dateRange.endDate) {\n        data.start = filters.dateRange.startDate.toISOString();\n        data.end = filters.dateRange.endDate.toISOString();\n      }\n\n      console.log(\"data :\", data);\n      tableConfig.filters = data;\n\n      if (filters.search.length) {\n        tableConfig.search = filters.search;\n      } else {\n        tableConfig.search = \"\";\n      }\n\n      tableConfig.loading = true;\n\n      _this.setState({\n        tableConfig: tableConfig\n      }, function () {\n        _this._getAllTransactions(tableConfig);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Transactions, [{\n    key: \"_formatDate\",\n    value: function _formatDate(date, dateFormat) {\n      return format(new Date(date), dateFormat);\n    }\n  }, {\n    key: \"_onUpdateTransactions\",\n    value: function _onUpdateTransactions(_ref3, data) {\n      var currentTarget = _ref3.currentTarget;\n      console.log(currentTarget.value);\n      var transactionList = this.state.transactionList;\n      var transaction = transactionList.find(function (each) {\n        return each.id === data.id;\n      });\n      transaction.status = currentTarget.value;\n      var dataToUpdate = {\n        ids: [transaction.id],\n        status: transaction.status\n      };\n      console.log(dataToUpdate);\n      this.setState({\n        transactionList: transactionList,\n        transactionListBackup: transactionList\n      });\n      updateTransactions(dataToUpdate).then(function (response) {\n        console.log(response);\n        ToastsStore.success(\"Status changed Successfully!\", 3000);\n      }, function (error) {\n        console.log(error); // ToastsStore.error(error.reason, 3000);\n\n        showToast(error.reason && error.reason.length ? error.reason : \"Server error. Try again after sometime.\", \"error\");\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var _deepClone4 = deepClone(this.state),\n          tableConfig = _deepClone4.tableConfig;\n\n      if (this.props.location.hasOwnProperty(\"creatorId\")) {\n        tableConfig.filters._to = this.props.location.creatorId;\n        this.setState({\n          tableConfig: tableConfig\n        }, function () {\n          _this2._getAllTransactions(tableConfig);\n\n          _this2._getAllUsers();\n        });\n      } else if (this.props.location.hasOwnProperty(\"subscriberId\")) {\n        tableConfig.filters._from = this.props.location.subscriberId;\n        this.setState({\n          tableConfig: tableConfig\n        }, function () {\n          _this2._getAllTransactions(tableConfig);\n\n          _this2._getAllUsers();\n        });\n      } else {\n        this._getAllTransactions(tableConfig);\n\n        this._getAllUsers();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state3 = this.state,\n          filters = _this$state3.filters,\n          loading = _this$state3.loading,\n          subscriberList = _this$state3.subscriberList,\n          creatorList = _this$state3.creatorList,\n          paymentTypes = _this$state3.paymentTypes,\n          paymentStatusList = _this$state3.paymentStatusList,\n          bulkStatus = _this$state3.bulkStatus,\n          totalCount = _this$state3.totalCount,\n          tableConfig = _this$state3.tableConfig;\n      console.log(\"subscriberList\", subscriberList);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"app TruFansPgBg animated fadeIn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 616,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Container, {\n        fluid: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        xs: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 619,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"PgTitle justify-content-start align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 620,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 626,\n          columnNumber: 17\n        }\n      }, \"Transactions\")), !loading.loadingData && /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"filterWrap filterWrap-TransactionsPg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 631,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 632,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-filter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 633,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ml-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 642,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(CustomDateRangePicker, {\n        dateRange: filters.dateRange,\n        onDatesChange: this._onDatesChange,\n        onFocusChange: this._onFocusChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 643,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(Input, {\n        type: \"select\",\n        name: \"type\",\n        value: filters.type,\n        onChange: this._filterOnChange,\n        className: \"capitalize\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 650,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 657,\n          columnNumber: 25\n        }\n      }, \"Type\"), paymentTypes.map(function (option) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          key: option,\n          value: option,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 659,\n            columnNumber: 27\n          }\n        }, option === \"payperview\" ? \"Pay Per View\" : option === \"liveEvent\" ? \"Live Event\" : option);\n      })), /*#__PURE__*/React.createElement(Input, {\n        type: \"select\",\n        name: \"subscriber\",\n        value: filters.subscriber,\n        onChange: this._filterOnChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 668,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 674,\n          columnNumber: 25\n        }\n      }, \"Subscriber\"), subscriberList.map(function (option) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          key: option.id,\n          value: option.id,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 676,\n            columnNumber: 27\n          }\n        }, option.name);\n      })), /*#__PURE__*/React.createElement(Input, {\n        type: \"select\",\n        name: \"creator\",\n        value: filters.creator,\n        onChange: this._filterOnChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 681,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 687,\n          columnNumber: 25\n        }\n      }, \"Creator\"), creatorList.map(function (option) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          key: option.id,\n          value: option.id,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 689,\n            columnNumber: 27\n          }\n        }, option.name);\n      })), /*#__PURE__*/React.createElement(Input, {\n        type: \"select\",\n        name: \"status\",\n        value: filters.status,\n        onChange: this._filterOnChange,\n        className: \"capitalize\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 694,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 701,\n          columnNumber: 25\n        }\n      }, \"Status\"), paymentStatusList.map(function (option) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          key: option,\n          value: option,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 703,\n            columnNumber: 27\n          }\n        }, option);\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center mt-md-3 mt-xl-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 710,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        type: \"text\",\n        id: \"search\",\n        placeholder: \"Search\",\n        className: \"ml-2\",\n        name: \"search\",\n        autoComplete: \"off\",\n        value: filters.search,\n        onChange: this._filterOnChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 711,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        color: \"secondary\",\n        className: \"ml-2\",\n        onClick: function onClick() {\n          return _this3._applyFilterChanges();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 722,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"icon-magnifier\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 727,\n          columnNumber: 25\n        }\n      })))), \" \", /*#__PURE__*/React.createElement(CustomDataTable, {\n        tableData: this.state.transactionList,\n        headerKeys: this.state.headerKeys,\n        dataFormat: this._dataFormat,\n        totalCount: totalCount,\n        rowSelection: true,\n        onPaginate: function onPaginate(pageNumber, pageSize) {\n          return _this3._paginate(pageNumber, pageSize);\n        },\n        onSortChange: function onSortChange(sortName, sortOrder) {\n          return _this3._onSortChange(sortName, sortOrder);\n        },\n        setSelectedRows: function setSelectedRows(data) {\n          return _this3._setSelectedRows(data);\n        },\n        showTableLoading: tableConfig.loading,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 739,\n          columnNumber: 19\n        }\n      })), loading.loadingData && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"filterWrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 757,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"loading-section list-loading\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 758,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-spinner fa-spin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 759,\n          columnNumber: 21\n        }\n      }), \" \\xA0 Loading Transactions..\")))), /*#__PURE__*/React.createElement(Row, {\n        className: \"justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 768,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"4\",\n        lg: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 769,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex my-5 flex-column\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 770,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        className: \"text-center mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 771,\n          columnNumber: 17\n        }\n      }, \"Change Status\"), /*#__PURE__*/React.createElement(Input, {\n        type: \"select\",\n        name: \"bulkStatus\",\n        value: bulkStatus,\n        onChange: this._onBulkStatusChange,\n        className: \"capitalize\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 772,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 779,\n          columnNumber: 19\n        }\n      }, \"Select\"), paymentStatusList.map(function (option) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          key: option,\n          value: option,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 781,\n            columnNumber: 21\n          }\n        }, option);\n      })), /*#__PURE__*/React.createElement(Button, {\n        className: \"BtnPurple mt-4 d-block mx-auto\",\n        style: {\n          padding: \"8px 25px\"\n        },\n        onClick: this._applyBulkStatusUpdate,\n        disabled: loading.changeStatusLoading,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 786,\n          columnNumber: 17\n        }\n      }, loading.changeStatusLoading ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-spinner fa-spin mr5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 794,\n          columnNumber: 23\n        }\n      }), \"\\xA0\") : null, \"Submit\"))))));\n    }\n  }]);\n\n  return Transactions;\n}(Component);\n\nexport default Transactions;","map":{"version":3,"sources":["/home/sanjay/Desktop/LS/React/Socialaffil-admin-UI/src/pages/transactions.js"],"names":["React","Component","Container","Row","Col","Button","Input","Link","CustomTable","CustomDateRangePicker","getAllCreators","getAllSubscribers","getAllTransactions","updateTransactions","getAllUsers","ToastsStore","config","format","moment","showToast","deepClone","CustomDataTable","Transactions","state","creatorList","subscriberList","transactionList","transactionListBackup","paymentTypes","paymentStatusList","headerKeys","id","label","noSort","filters","dateRange","startDate","endDate","focusedInput","startDateId","endDateId","type","subscriber","creator","status","search","loading","loadingData","changeStatusLoading","tableLoading","bulkStatus","selectedTransactions","totalCount","transactionFieldsKeyMap","name","amount","date","subscriberName","creatorName","tableConfig","pageNumber","pageSize","sort","sortBy","sortOrder","_onDatesChange","setState","_applyFilterChanges","_onFocusChange","input","_manageLoading","key","value","_getAllCreators","then","response","console","log","error","reason","length","_getAllSubscribers","fans","map","each","full","a","b","textA","toLowerCase","textB","_getAllUsers","influencers","trim","_getAllTransactions","data","transactionListResp","transactions","paymentType","_id","Number","time","_from","_to","relatedContent","_message","_post","count","_dataFormat","cell","row","header","toFixed","_formatDate","e","_onUpdateTransactions","option","index","content","thumbnail","_contents","_filterOnChange","currentTarget","_filterTransactionList","filterConditions","Object","keys","forEach","push","filter","isBetween","includes","_setSelectedRows","_onBulkStatusChange","_applyBulkStatusUpdate","dataToUpdate","ids","warning","success","_paginate","setTimeout","_onSortChange","sortName","start","toISOString","end","dateFormat","Date","transaction","find","props","location","hasOwnProperty","creatorId","subscriberId","padding"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  Container,\n  Row,\n  Col,\n  // Table,\n  Button,\n  Input,\n  // FormGroup,\n  // Label\n} from \"reactstrap\";\nimport { Link } from \"react-router-dom\";\nimport CustomTable from \"../components/custom-table\";\nimport CustomDateRangePicker from \"../components/date-range-picker\";\nimport {\n  getAllCreators,\n  getAllSubscribers,\n  getAllTransactions,\n  updateTransactions,\n  getAllUsers,\n} from \"../http/http-calls\";\nimport { ToastsStore } from \"react-toasts\";\nimport config from \"../config\";\nimport { format } from \"date-fns\";\nimport moment from \"moment\";\nimport { showToast, deepClone } from \"../helper-methods\";\nimport CustomDataTable from \"../components/custom-data-table\";\n\nclass Transactions extends Component {\n  state = {\n    creatorList: [],\n    subscriberList: [],\n    transactionList: [],\n    transactionListBackup: [],\n    paymentTypes: config.paymentTypes,\n    paymentStatusList: config.paymentStatusList,\n    headerKeys: [\n      { id: \"id\", label: \"id\" },\n      { id: \"name\", label: \"Transaction\" },\n      { id: \"amount\", label: \"Amount\" },\n      { id: \"date\", label: \"Date\" },\n      { id: \"subscriberName\", label: \"Subscriber\" },\n      { id: \"creatorName\", label: \"Creator\" },\n      { id: \"relatedContent\", label: \"Related Content\", noSort: true },\n      { id: \"status\", label: \"Status\" },\n    ],\n    filters: {\n      dateRange: {\n        startDate: null,\n        endDate: null,\n        focusedInput: null,\n        startDateId: \"startDate\",\n        endDateId: \"endDate\",\n      },\n      type: \"\",\n      subscriber: \"\",\n      creator: \"\",\n      status: \"\",\n      search: \"\",\n    },\n    loading: {\n      loadingData: false,\n      changeStatusLoading: false,\n      tableLoading: false,\n    },\n    bulkStatus: \"\",\n    selectedTransactions: [],\n    totalCount: 0,\n    transactionFieldsKeyMap: {\n      name: \"paymentType\",\n      amount: \"amount\",\n      date: \"time\",\n      subscriberName: \"_from\",\n      creatorName: \"_to\",\n      status: \"status\",\n    },\n    tableConfig: {\n      pageNumber: 1,\n      pageSize: 10,\n      sort: {\n        sortBy: \"time\",\n        sortOrder: \"desc\",\n      },\n      filters: {},\n    },\n  };\n\n  _formatDate(date, dateFormat) {\n    return format(new Date(date), dateFormat);\n  }\n\n  _onDatesChange = (startDate, endDate) => {\n    // console.log(\"on date change\", startDate, endDate);\n    let { filters } = this.state;\n    filters.dateRange.startDate = startDate;\n    filters.dateRange.endDate = endDate;\n    this.setState({ filters });\n    if (filters.dateRange.startDate && filters.dateRange.endDate) {\n      // console.log(\"range selction complete\");\n      // this._filterTransactionList();\n      this._applyFilterChanges();\n    }\n  };\n\n  _onFocusChange = (input) => {\n    // console.log(input);\n    let { filters } = this.state;\n    filters.dateRange.focusedInput = input;\n    this.setState({ filters });\n  };\n\n  _manageLoading = (key, value) => {\n    let { loadingData, changeStatusLoading, tableLoading } = this.state.loading;\n    if (key === \"data\") {\n      loadingData = value;\n    } else if (key === \"change-status\") {\n      changeStatusLoading = value;\n    } else if (key === \"table\") {\n      tableLoading = value;\n    }\n    this.setState({\n      loading: { loadingData, changeStatusLoading, tableLoading },\n    });\n  };\n\n  // not using now\n  _getAllCreators = () => {\n    // this._manageLoading('data', true);\n    getAllCreators().then(\n      (response) => {\n        console.log(response);\n        // this._manageLoading('data', false);\n      },\n      (error) => {\n        console.log(error);\n        // this._manageLoading('data', false);\n        // ToastsStore.error(error.reason, 3000);\n        showToast(\n          error.reason && error.reason.length\n            ? error.reason\n            : \"Server error. Try again after sometime.\",\n          \"error\"\n        );\n      }\n    );\n  };\n\n  // not using now\n  _getAllSubscribers = () => {\n    // this._manageLoading(\"data\", true);\n    getAllSubscribers().then(\n      (response) => {\n        console.log(response);\n        // this._manageLoading(\"data\", false);\n        let subscriberList = response.fans.map((each) => {\n          return {\n            name: each.name.full,\n            id: each.id,\n          };\n        });\n        subscriberList = subscriberList.sort(function (a, b) {\n          let textA = a.name.toLowerCase();\n          let textB = b.name.toLowerCase();\n          return textA < textB ? -1 : textA > textB ? 1 : 0;\n        });\n        this.setState({ subscriberList });\n      },\n      (error) => {\n        console.log(error);\n        // this._manageLoading(\"data\", false);\n        // ToastsStore.error(error.reason, 3000);\n        showToast(\n          error.reason && error.reason.length\n            ? error.reason\n            : \"Server error. Try again after sometime.\",\n          \"error\"\n        );\n      }\n    );\n  };\n\n  _getAllUsers = () => {\n    getAllUsers().then(\n      (response) => {\n        console.log(\"response :\", response);\n        let creatorList = response.influencers.map((each) => {\n          return {\n            name: each.name.full.trim(),\n            id: each.id,\n          };\n        });\n        creatorList = creatorList.sort(function (a, b) {\n          let textA = a.name.toLowerCase();\n          let textB = b.name.toLowerCase();\n          return textA < textB ? -1 : textA > textB ? 1 : 0;\n        });\n        let subscriberList = response.fans.map((each) => {\n          return {\n            name: each.name.full.trim(),\n            id: each.id,\n          };\n        });\n        subscriberList = subscriberList.sort(function (a, b) {\n          let textA = a.name.toLowerCase();\n          let textB = b.name.toLowerCase();\n          return textA < textB ? -1 : textA > textB ? 1 : 0;\n        });\n        this.setState({ creatorList, subscriberList });\n      },\n      (error) => {\n        console.log(\"error :\", error);\n        showToast(\n          error.reason && error.reason.length\n            ? error.reason\n            : \"Server error. Try again after sometime.\",\n          \"error\"\n        );\n      }\n    );\n  };\n\n  _getAllTransactions = (data) => {\n    let { transactionList, tableConfig } = deepClone(this.state);\n    if (!transactionList.length) {\n      this._manageLoading(\"data\", true);\n    }\n    getAllTransactions(data).then(\n      (response) => {\n        console.log(response);\n        this._manageLoading(\"data\", false);\n        tableConfig.loading = false;\n        this.setState({ tableConfig });\n        let transactionListResp = response.transactions.map((each) => {\n          return {\n            name: each.paymentType,\n            id: each._id,\n            amount: each.amount ? Number(each.amount) : \"-\",\n            date: each.time,\n            subscriber: each._from,\n            subscriberName:\n              each._from && each._from.name ? each._from.name.full : \"NA\",\n            creator: each._to,\n            creatorName: each._to && each._to.name ? each._to.name.full : \"NA\",\n            relatedContent: each._message || each._post,\n            status: each.status,\n          };\n        });\n        // transactionListResp = transactionListResp.sort((item1,item2)=>{\n        //   return new Date(item2.date) - new Date(item1.date);\n        // });\n        transactionList = transactionListResp;\n        this.setState({\n          transactionList,\n          transactionListBackup: transactionList,\n          totalCount: response.count,\n        });\n      },\n      (error) => {\n        console.log(error);\n        tableConfig.loading = false;\n        this.setState({ tableConfig });\n        this._manageLoading(\"data\", false);\n        // ToastsStore.error(error.reason);\n        showToast(\n          error.reason && error.reason.length\n            ? error.reason\n            : \"Server error. Try again after sometime.\",\n          \"error\"\n        );\n      }\n    );\n  };\n\n  _dataFormat = (cell, row, header) => {\n    // console.log(cell, row, header);_formatDate\n    if (header === \"name\") {\n      console.log(row.name);\n      return (\n        <div className=\"capitalize\">\n          {row.name === \"payperview\"\n            ? \"Pay Per View\"\n            : row.name === \"liveEvent\"\n            ? \"Live Event\"\n            : row.name}\n        </div>\n      );\n    } else if (header === \"amount\") {\n      return typeof cell === \"number\" ? \"$\" + cell.toFixed(2) : \"-\";\n    } else if (header === \"date\") {\n      return (\n        <>\n          {this._formatDate(cell, \"MMM d, yyyy\")}\n          <br />\n          {this._formatDate(cell, \"HH:mm\")}\n        </>\n      );\n    } else if (header === \"subscriberName\") {\n      return cell ? (\n        <Link to={`/subscriber-view/${row.subscriber._id}`}>\n          <span>{cell}</span>\n        </Link>\n      ) : (\n        \"-\"\n      );\n    } else if (header === \"creatorName\") {\n      return cell ? (\n        <Link to={`/creator-view/${row.creator._id}`}>\n          <span>{cell}</span>\n        </Link>\n      ) : (\n        \"-\"\n      );\n    } else if (header === \"status\") {\n      return (\n        <Input\n          type=\"select\"\n          value={cell}\n          className=\"capitalize\"\n          onChange={(e) => this._onUpdateTransactions(e, row)}\n        >\n          {this.state.paymentStatusList.map((option, index) => (\n            <option key={index} value={option}>\n              {option}\n            </option>\n          ))}\n        </Input>\n      );\n    } else if (header === \"relatedContent\") {\n      let content = \"\";\n      if (row.name === \"message\" && cell.content && cell.content[0].thumbnail) {\n        content = (\n          <a\n            href={cell.content && cell.content[0].thumbnail}\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n          >\n            Link\n          </a>\n        );\n      } else if (\n        row.name === \"post\" &&\n        cell._contents.length &&\n        cell._contents[0].thumbnail\n      ) {\n        content = (\n          <a\n            href={cell._contents[0].thumbnail}\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n          >\n            Link\n          </a>\n        );\n      } else {\n        content = \"-\";\n      }\n      return content;\n    } else {\n      return cell;\n    }\n  };\n\n  _filterOnChange = ({ currentTarget }) => {\n    let { filters } = this.state;\n    filters[currentTarget.name] = currentTarget.value;\n    this.setState({ filters });\n    if (currentTarget.name !== \"search\") {\n      // this._filterTransactionList();\n      this._applyFilterChanges();\n    }\n  };\n\n  // old function for frontend filtering - not using now\n  _filterTransactionList = () => {\n    let filterConditions = [];\n    // console.log(this.state);\n    let { filters, transactionListBackup, transactionList } = this.state;\n    Object.keys(filters).forEach((key) => {\n      if (filters[key]) {\n        filterConditions.push(key);\n      }\n    });\n    // console.log(filterConditions);\n    transactionList = transactionListBackup;\n    if (filterConditions.length) {\n      if (filters.dateRange.startDate && filters.dateRange.endDate) {\n        transactionList = transactionList.filter((each) => {\n          // console.log('====>>',filters.dateRange.startDate.toDate(), each.date, isAfter((filters.dateRange.startDate.toDate()), each.date))\n          // return (filters.dateRange.startDate.toDate()) >= new Date(each.date);\n          return moment(moment(each.date).format(\"YYYY-MM-DD\")).isBetween(\n            filters.dateRange.startDate.format(\"YYYY-MM-DD\"),\n            filters.dateRange.endDate.format(\"YYYY-MM-DD\"),\n            null,\n            \"[]\"\n          );\n        });\n      }\n      if (filters.type) {\n        transactionList = transactionList.filter((each) => {\n          return each.name.toLowerCase() === filters.type.toLowerCase();\n        });\n      }\n      if (filters.subscriber) {\n        transactionList = transactionList.filter((each) => {\n          return each.subscriber.id === filters.subscriber;\n        });\n      }\n      if (filters.creator) {\n        transactionList = transactionList.filter((each) => {\n          return each.creator.id === filters.creator;\n        });\n      }\n      if (filters.status) {\n        transactionList = transactionList.filter((each) => {\n          return each.status.toLowerCase() === filters.status.toLowerCase();\n        });\n      }\n      if (filters.search.trim().length) {\n        transactionList = transactionList.filter((each) => {\n          return (\n            each.name.toLowerCase().includes(filters.search.toLowerCase()) ||\n            each.subscriberName\n              .toLowerCase()\n              .includes(filters.search.toLowerCase()) ||\n            each.creatorName\n              .toLowerCase()\n              .includes(filters.search.toLowerCase()) ||\n            each.status.toLowerCase().includes(filters.search.toLowerCase())\n          );\n        });\n      }\n      this.setState({ transactionList });\n    } else {\n      this.setState({ transactionList: transactionListBackup });\n    }\n  };\n\n  _onUpdateTransactions({ currentTarget }, data) {\n    console.log(currentTarget.value);\n    let { transactionList } = this.state;\n    let transaction = transactionList.find((each) => each.id === data.id);\n    transaction.status = currentTarget.value;\n    let dataToUpdate = {\n      ids: [transaction.id],\n      status: transaction.status,\n    };\n    console.log(dataToUpdate);\n    this.setState({\n      transactionList,\n      transactionListBackup: transactionList,\n    });\n    updateTransactions(dataToUpdate).then(\n      (response) => {\n        console.log(response);\n        ToastsStore.success(\"Status changed Successfully!\", 3000);\n      },\n      (error) => {\n        console.log(error);\n        // ToastsStore.error(error.reason, 3000);\n        showToast(\n          error.reason && error.reason.length\n            ? error.reason\n            : \"Server error. Try again after sometime.\",\n          \"error\"\n        );\n      }\n    );\n  }\n\n  _setSelectedRows = (data) => {\n    console.log(data);\n    let { selectedTransactions } = this.state;\n    selectedTransactions = data;\n    this.setState({ selectedTransactions });\n  };\n\n  _onBulkStatusChange = ({ currentTarget }) => {\n    let { bulkStatus } = this.state;\n    bulkStatus = currentTarget.value;\n    this.setState({ bulkStatus });\n  };\n\n  _applyBulkStatusUpdate = () => {\n    let { bulkStatus, selectedTransactions } = this.state;\n    let dataToUpdate = {\n      status: bulkStatus,\n      ids: selectedTransactions,\n    };\n    if (!dataToUpdate.ids.length || !bulkStatus) {\n      ToastsStore.warning(\n        \"Please select atleast one transaction and a status.\",\n        3000\n      );\n      return;\n    } else {\n      console.log(dataToUpdate);\n      this._manageLoading(\"change-status\", true);\n      updateTransactions(dataToUpdate).then(\n        (response) => {\n          console.log(response);\n          this._manageLoading(\"change-status\", false);\n          ToastsStore.success(\"Status changed Successfully!\", 3000);\n          selectedTransactions = [];\n          this.setState({ selectedTransactions });\n          this._getAllTransactions(this.state.tableConfig);\n        },\n        (error) => {\n          console.log(error);\n          this._manageLoading(\"change-status\", false);\n          // ToastsStore.error(error.reason, 3000);\n          showToast(\n            error.reason && error.reason.length\n              ? error.reason\n              : \"Server error. Try again after sometime.\",\n            \"error\"\n          );\n        }\n      );\n    }\n  };\n\n  _paginate = (pageNumber, pageSize) => {\n    console.log(\"pageNumber, pageSize :\", pageNumber, pageSize);\n    const { tableConfig } = this.state;\n    tableConfig.pageNumber = pageNumber;\n    tableConfig.pageSize = pageSize;\n    tableConfig.loading = true;\n    setTimeout(() => {\n      this.setState({ tableConfig }, () => {\n        this._getAllTransactions(this.state.tableConfig);\n      });\n    }, 100);\n  };\n\n  _onSortChange = (sortName, sortOrder) => {\n    const { tableConfig } = deepClone(this.state);\n    tableConfig.sort.sortBy = this.state.transactionFieldsKeyMap[sortName];\n    tableConfig.sort.sortOrder = sortOrder;\n    tableConfig.loading = true;\n    this.setState({ tableConfig }, () => {\n      this._getAllTransactions(tableConfig);\n    });\n    console.log(\"sortName, sortOrder :\", sortName, sortOrder);\n  };\n\n  _applyFilterChanges = () => {\n    const { filters, tableConfig } = deepClone(this.state);\n    console.log(\"filters :\", filters);\n    let data = {};\n    if (filters.type.length) {\n      data.paymentType = filters.type;\n    }\n    if (filters.subscriber.length) {\n      data._from = filters.subscriber;\n    }\n    if (filters.creator.length) {\n      data._to = filters.creator;\n    }\n    if (filters.status.length) {\n      data.status = filters.status;\n    }\n    if (filters.dateRange.startDate && filters.dateRange.endDate) {\n      data.start = filters.dateRange.startDate.toISOString();\n      data.end = filters.dateRange.endDate.toISOString();\n    }\n    console.log(\"data :\", data);\n    tableConfig.filters = data;\n    if (filters.search.length) {\n      tableConfig.search = filters.search;\n    } else {\n      tableConfig.search = \"\";\n    }\n    tableConfig.loading = true;\n    this.setState({ tableConfig }, () => {\n      this._getAllTransactions(tableConfig);\n    });\n  };\n\n  componentDidMount() {\n    let { tableConfig } = deepClone(this.state);\n\n    if (this.props.location.hasOwnProperty(\"creatorId\")) {\n      tableConfig.filters._to = this.props.location.creatorId;\n      this.setState({ tableConfig }, () => {\n        this._getAllTransactions(tableConfig);\n        this._getAllUsers();\n      });\n    } else if (this.props.location.hasOwnProperty(\"subscriberId\")) {\n      tableConfig.filters._from = this.props.location.subscriberId;\n      this.setState({ tableConfig }, () => {\n        this._getAllTransactions(tableConfig);\n        this._getAllUsers();\n      });\n    } else {\n      this._getAllTransactions(tableConfig);\n      this._getAllUsers();\n    }\n  }\n\n  render() {\n    const {\n      filters,\n      loading,\n      subscriberList,\n      creatorList,\n      paymentTypes,\n      paymentStatusList,\n      bulkStatus,\n      totalCount,\n      tableConfig,\n    } = this.state;\n\n    console.log(\"subscriberList\", subscriberList);\n\n    return (\n      <div className=\"app TruFansPgBg animated fadeIn\">\n        <Container fluid>\n          <Row>\n            <Col xs=\"12\">\n              <div className=\"PgTitle justify-content-start align-items-center\">\n                {/* on clicking the below btn, it should take back the user to the previous page in history */}\n                {/* <Button color=\"ghost-dark\" className=\"customBackBtn\">\n                  <i className=\"fa fa-arrow-left\"></i>\n                </Button> */}\n\n                <h2>Transactions</h2>\n              </div>\n              {/* filters */}\n              {!loading.loadingData && (\n                <div>\n                  <div className=\"filterWrap filterWrap-TransactionsPg\">\n                    <div className=\"d-flex align-items-center\">\n                      <i className=\"fa fa-filter\"></i>\n                      {/* there will be a \"Date Range\" below in place of an input field */}\n                      {/* <Input\n                    type=\"text\"\n                    id=\"\"\n                    placeholder=\"Date Range\"\n                    className=\"ml-2\"\n                  /> */}\n\n                      <div className=\"ml-2\">\n                        <CustomDateRangePicker\n                          dateRange={filters.dateRange}\n                          onDatesChange={this._onDatesChange}\n                          onFocusChange={this._onFocusChange}\n                        ></CustomDateRangePicker>\n                      </div>\n\n                      <Input\n                        type=\"select\"\n                        name=\"type\"\n                        value={filters.type}\n                        onChange={this._filterOnChange}\n                        className=\"capitalize\"\n                      >\n                        <option value=\"\">Type</option>\n                        {paymentTypes.map((option) => (\n                          <option key={option} value={option}>\n                            {option === \"payperview\"\n                              ? \"Pay Per View\"\n                              : option === \"liveEvent\"\n                              ? \"Live Event\"\n                              : option}\n                          </option>\n                        ))}\n                      </Input>\n                      <Input\n                        type=\"select\"\n                        name=\"subscriber\"\n                        value={filters.subscriber}\n                        onChange={this._filterOnChange}\n                      >\n                        <option value=\"\">Subscriber</option>\n                        {subscriberList.map((option) => (\n                          <option key={option.id} value={option.id}>\n                            {option.name}\n                          </option>\n                        ))}\n                      </Input>\n                      <Input\n                        type=\"select\"\n                        name=\"creator\"\n                        value={filters.creator}\n                        onChange={this._filterOnChange}\n                      >\n                        <option value=\"\">Creator</option>\n                        {creatorList.map((option) => (\n                          <option key={option.id} value={option.id}>\n                            {option.name}\n                          </option>\n                        ))}\n                      </Input>\n                      <Input\n                        type=\"select\"\n                        name=\"status\"\n                        value={filters.status}\n                        onChange={this._filterOnChange}\n                        className=\"capitalize\"\n                      >\n                        <option value=\"\">Status</option>\n                        {paymentStatusList.map((option) => (\n                          <option key={option} value={option}>\n                            {option}\n                          </option>\n                        ))}\n                      </Input>\n                    </div>\n\n                    <div className=\"d-flex align-items-center mt-md-3 mt-xl-0\">\n                      <Input\n                        type=\"text\"\n                        id=\"search\"\n                        placeholder=\"Search\"\n                        className=\"ml-2\"\n                        name=\"search\"\n                        autoComplete=\"off\"\n                        value={filters.search}\n                        onChange={this._filterOnChange}\n                      />\n\n                      <Button\n                        color=\"secondary\"\n                        className=\"ml-2\"\n                        onClick={() => this._applyFilterChanges()}\n                      >\n                        <i className=\"icon-magnifier\"></i>\n                      </Button>\n                    </div>\n                  </div>{\" \"}\n                  {/* filterWrap */}\n                  {/* <CustomTable\n                    tableData={this.state.transactionList}\n                    headerKeys={this.state.headerKeys}\n                    dataFormat={this._dataFormat}\n                    rowSelection={true}\n                    setSelectedRows={data => this._setSelectedRows(data)}\n                  ></CustomTable> */}\n                  <CustomDataTable\n                    tableData={this.state.transactionList}\n                    headerKeys={this.state.headerKeys}\n                    dataFormat={this._dataFormat}\n                    totalCount={totalCount}\n                    rowSelection={true}\n                    onPaginate={(pageNumber, pageSize) =>\n                      this._paginate(pageNumber, pageSize)\n                    }\n                    onSortChange={(sortName, sortOrder) =>\n                      this._onSortChange(sortName, sortOrder)\n                    }\n                    setSelectedRows={(data) => this._setSelectedRows(data)}\n                    showTableLoading={tableConfig.loading}\n                  ></CustomDataTable>\n                </div>\n              )}\n              {loading.loadingData && (\n                <div className=\"filterWrap\">\n                  <div className=\"loading-section list-loading\">\n                    <i className=\"fa fa-spinner fa-spin\"></i> &nbsp; Loading\n                    Transactions..\n                  </div>\n                </div>\n              )}\n            </Col>\n          </Row>\n\n          {/* The below \"Row\" will appear after the user selects row(s) from the above table */}\n          <Row className=\"justify-content-center\">\n            <Col md=\"4\" lg=\"3\">\n              <div className=\"d-flex my-5 flex-column\">\n                <h3 className=\"text-center mb-3\">Change Status</h3>\n                <Input\n                  type=\"select\"\n                  name=\"bulkStatus\"\n                  value={bulkStatus}\n                  onChange={this._onBulkStatusChange}\n                  className=\"capitalize\"\n                >\n                  <option value=\"\">Select</option>\n                  {paymentStatusList.map((option) => (\n                    <option key={option} value={option}>\n                      {option}\n                    </option>\n                  ))}\n                </Input>\n                <Button\n                  className=\"BtnPurple mt-4 d-block mx-auto\"\n                  style={{ padding: \"8px 25px\" }}\n                  onClick={this._applyBulkStatusUpdate}\n                  disabled={loading.changeStatusLoading}\n                >\n                  {loading.changeStatusLoading ? (\n                    <>\n                      <i className=\"fa fa-spinner fa-spin mr5\" />\n                      &nbsp;\n                    </>\n                  ) : null}\n                  Submit\n                </Button>\n              </div>\n            </Col>\n          </Row>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default Transactions;\n"]},"metadata":{},"sourceType":"module"}